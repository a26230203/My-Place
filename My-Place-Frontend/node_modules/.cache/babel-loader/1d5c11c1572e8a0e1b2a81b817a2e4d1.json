{"ast":null,"code":"var _jsxFileName = \"/home/lin/phase5/My-Place-Frontend/my-place/src/Component/Music.js\";\nimport React, { Component } from \"react\";\nimport { Upload, Input, Button } from 'antd';\nimport { CloseOutlined, UploadOutlined } from '@ant-design/icons';\nimport _ from \"lodash\";\nimport \"../static/style.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst props = {\n  action: 'http://localhost:3000/musicpreview'\n};\nexport default class Music extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isPause: false,\n      musicList: [],\n      currentMusic: {},\n      totalTime: \"00:00\",\n      currentTime: \"00:00\",\n      processItemMove: false,\n      volumeProcessItemMove: false,\n      volumeControl: false,\n      playMode: 1,\n      isMusicListShow: false,\n      addMusic: false,\n      placement: 'top',\n      fileList: [],\n      upFiles: [],\n      title: \"\",\n      author: \"\",\n      img: \"\",\n      description: \"\"\n    };\n\n    this.getTime = time => {\n      if (time) {\n        const minute = parseInt(time / 60 % 60);\n        const second = parseInt(time % 60);\n        let minuteText = `${minute}`;\n        let secondText = `${second}`;\n\n        if (minute < 10) {\n          minuteText = `0${minute}`;\n        }\n\n        if (second < 10) {\n          secondText = `0${second}`;\n        }\n\n        return `${minuteText}:${secondText}`;\n      } else {\n        return \"00:00\";\n      }\n    };\n\n    this.onPlay = () => {\n      const audio = this.audio;\n      this.setState({\n        isPause: true\n      });\n      audio.play();\n    };\n\n    this.onPause = () => {\n      const audio = this.audio;\n      this.setState({\n        isPause: false\n      });\n      audio.pause();\n    };\n\n    this.onProcessClick = e => {\n      this.setProcess(e, \"click\");\n    };\n\n    this.setProcess = (e, key) => {\n      let offsetWidth = e.pageX - this.processPlayed.getBoundingClientRect().left;\n\n      if (offsetWidth < 0) {\n        offsetWidth = 0;\n      }\n\n      if (offsetWidth > this.process.offsetWidth) {\n        offsetWidth = this.process.offsetWidth;\n      }\n\n      const offsetPercentage = offsetWidth / this.process.offsetWidth;\n      const currentTime = this.audio.duration * offsetPercentage;\n\n      if (key == \"click\" || key == \"dragMove\") {\n        this.processPlayed.style.width = `${offsetWidth}px`;\n        this.processItem.style.left = `${offsetWidth - 4}px`;\n        this.setState({\n          currentTime: this.getTime(currentTime)\n        });\n      }\n\n      if (key == \"dragEnd\" || key == \"click\") {\n        this.audio.currentTime = currentTime;\n      }\n    };\n\n    this.onProcessItemMouseDown = e => {\n      e.stopPropagation();\n      this.setState({\n        processItemMove: true\n      });\n    };\n\n    this.onProcessItemMouseMove = e => {\n      e.stopPropagation();\n      const {\n        processItemMove\n      } = this.state;\n\n      if (processItemMove) {\n        this.setProcess(e, \"dragMove\");\n      }\n    };\n\n    this.onProcessItemMouseUp = e => {\n      const {\n        processItemMove\n      } = this.state;\n      e.stopPropagation();\n\n      if (processItemMove) {\n        this.setState({\n          processItemMove: false\n        });\n        this.setProcess(e, \"dragEnd\");\n      }\n    };\n\n    this.endedPlayMusic = () => {\n      const {\n        playMode,\n        currentMusic\n      } = this.state;\n      const {\n        musicList\n      } = this.state;\n\n      if (musicList.length > 0 && currentMusic) {\n        const currentIndex = musicList.findIndex(item => {\n          return item.id === currentMusic.id;\n        });\n\n        if (playMode === 1) {\n          if (musicList[currentIndex + 1]) {\n            this.setState({\n              currentMusic: musicList[currentIndex + 1]\n            }, () => {\n              this.onSwitchAction();\n            });\n          } else {\n            this.setState({\n              currentMusic: musicList[0]\n            }, () => {\n              this.onSwitchAction();\n            });\n          }\n        } else if (playMode === 2) {\n          const randomIndex = Math.floor(Math.random() * 3 + 1);\n\n          if (musicList[randomIndex + 1]) {\n            this.setState({\n              currentMusic: musicList[randomIndex + 1]\n            }, () => {\n              this.onSwitchAction();\n            });\n          } else {\n            this.setState({\n              currentMusic: musicList[0]\n            }, () => {\n              this.onSwitchAction();\n            });\n          }\n        } else if (playMode === 3) {\n          this.onSwitchAction();\n        }\n      } else {\n        this.onSwitchAction();\n      }\n    };\n\n    this.nextMusic = () => {\n      const {\n        currentMusic\n      } = this.state;\n      const {\n        musicList\n      } = this.state;\n\n      if (musicList.length > 1 && currentMusic) {\n        const currentIndex = musicList.findIndex(item => {\n          return item.id === currentMusic.id;\n        });\n\n        if (musicList[currentIndex + 1]) {\n          this.setState({\n            currentMusic: musicList[currentIndex + 1]\n          }, () => {\n            this.onSwitchAction();\n          });\n        } else {\n          this.setState({\n            currentMusic: musicList[0]\n          }, () => {\n            this.onSwitchAction();\n          });\n        }\n      } else {\n        this.audio.currentTime = 0;\n        this.onSwitchAction();\n      }\n    };\n\n    this.previousMusic = () => {\n      const {\n        currentMusic\n      } = this.state;\n      const {\n        musicList\n      } = this.state;\n\n      if (musicList.length > 1 && currentMusic) {\n        const currentIndex = musicList.findIndex(item => {\n          return item.id === currentMusic.id;\n        });\n\n        if (musicList[currentIndex - 1]) {\n          this.setState({\n            currentMusic: musicList[currentIndex - 1]\n          }, () => {\n            this.onSwitchAction();\n          });\n        } else {\n          this.setState({\n            currentMusic: musicList[musicList.length - 1]\n          }, () => {\n            this.onSwitchAction();\n          });\n        }\n      } else {\n        this.audio.currentTime = 0;\n        this.onSwitchAction();\n      }\n    };\n\n    this.onSwitchAction = () => {\n      const {\n        isPause\n      } = this.state;\n      this.resetProcess();\n\n      if (isPause) {\n        this.onPlay();\n      }\n    };\n\n    this.resetProcess = () => {\n      this.processPlayed.style.width = \"0px\";\n      this.processItem.style.left = \"-4px\";\n    };\n\n    this.onVolumeControl = () => {\n      const {\n        volumeControl\n      } = this.state;\n      this.setState({\n        volumeControl: !volumeControl\n      });\n    };\n\n    this.onVolumeControlHide = () => {\n      const {\n        volumeControl\n      } = this.state;\n\n      if (volumeControl) {\n        this.setState({\n          volumeControl: false\n        });\n      }\n    };\n\n    this.initVolumeProcess = () => {\n      const processLength = this.volumeProcess.offsetHeight;\n      this.volumeProcessCurrent.style.height = `${processLength / 2}px`;\n      this.volumeProcessItem.style.bottom = `${processLength / 2 - 6}px`;\n      this.audio.volume = 0.5;\n    };\n\n    this.onVolumeProcessSet = e => {\n      const processLength = this.volumeProcess.offsetHeight;\n      let volumeOffsetHeight = processLength - (e.pageY - this.volumeProcess.getBoundingClientRect().top);\n      let volumepercentage = 0;\n\n      if (volumeOffsetHeight < 0) {\n        volumeOffsetHeight = 0;\n      }\n\n      if (volumeOffsetHeight > processLength) {\n        volumeOffsetHeight = processLength;\n      }\n\n      volumepercentage = volumeOffsetHeight / processLength;\n      this.volumeProcessCurrent.style.height = `${volumeOffsetHeight}px`;\n      this.volumeProcessItem.style.bottom = `${volumeOffsetHeight - 6}px`;\n      this.audio.volume = volumepercentage;\n    };\n\n    this.onVolumeProcessItemMouseDown = () => {\n      this.setState({\n        volumeProcessItemMove: true\n      });\n    };\n\n    this.onVolumeProcessItemMouseUp = e => {\n      const {\n        volumeProcessItemMove\n      } = this.state;\n\n      if (volumeProcessItemMove) {\n        this.setState({\n          volumeProcessItemMove: false\n        });\n      }\n    };\n\n    this.onVolumeProcessItemMove = e => {\n      const {\n        volumeProcessItemMove\n      } = this.state;\n\n      if (volumeProcessItemMove) {\n        this.onVolumeProcessSet(e);\n      }\n    };\n\n    this.onPlayModeChange = () => {\n      const {\n        playMode\n      } = this.state;\n\n      if (playMode === 3) {\n        this.setState({\n          playMode: 1\n        });\n      } else {\n        this.setState({\n          playMode: playMode + 1\n        });\n      }\n    };\n\n    this.titleOnChange = e => {\n      this.setState({\n        title: e.target.value\n      });\n    };\n\n    this.authorOnChange = e => {\n      this.setState({\n        author: e.target.value\n      });\n    };\n\n    this.imgOnChange = e => {\n      this.setState({\n        img: e.target.value\n      });\n    };\n\n    this.descriptionOnChnage = e => {\n      this.setState({\n        description: e.target.value\n      });\n    };\n\n    this.addPlayList = () => {\n      this.setState({\n        addMusic: !this.state.addMusic\n      });\n    };\n\n    this.submitAddMusic = e => {\n      e.preventDefault();\n      const {\n        upFiles,\n        title,\n        author,\n        img,\n        description\n      } = this.state;\n      let formData = new FormData();\n      formData.append('music', upFiles[0]);\n      formData.append('user_id', this.props.loginUser.id);\n      formData.append('title', title);\n      formData.append('author', author);\n      formData.append('img', img);\n      formData.append('description', description);\n      fetch(\"http://localhost:3000/musics\", {\n        method: \"POST\",\n        body: formData\n      }).then(res => res.json()).then(() => {\n        this.componentDidMount();\n        this.addPlayList();\n        this.setState({\n          upFiles: [],\n          title: \"\",\n          author: \"\",\n          img: \"\",\n          description: \"\"\n        });\n      });\n    };\n\n    this.beforeUpload = file => {\n      const {\n        upFiles\n      } = this.state;\n      upFiles.push(file);\n      this.setState({\n        upFiles: upFiles\n      });\n    };\n\n    this.onMusicList = () => {\n      const {\n        isMusicListShow\n      } = this.state;\n      this.setState({\n        isMusicListShow: !isMusicListShow\n      });\n    };\n\n    this.onDeleteMusic = (e, item) => {\n      e.stopPropagation();\n      const {\n        onDeleteMusic\n      } = this.props;\n\n      if (onDeleteMusic) {\n        onDeleteMusic(item.id);\n      }\n    };\n\n    this.onDeleteAllMusic = () => {\n      const {\n        onDeleteAllMusic\n      } = this.props;\n\n      if (onDeleteAllMusic) {\n        onDeleteAllMusic();\n      }\n    };\n\n    this.onMusicListItemClick = id => {\n      const {\n        musicList\n      } = this.state;\n      const {\n        currentMusic\n      } = this.state;\n      const index = musicList.findIndex(item => {\n        return item.id === id;\n      });\n\n      if (index !== -1) {\n        if (currentMusic.id === id) {\n          this.resetProcess();\n          this.audio.currentTime = 0;\n          this.onPlay();\n        } else {\n          this.setState({\n            currentMusic: musicList[index]\n          }, () => {\n            this.resetProcess();\n            this.onPlay();\n          });\n        }\n      }\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevState.currentMusic.id !== this.state.currentMusic.id) {\n      this.resetProcess();\n\n      if (this.state.isPause) {\n        this.onPlay();\n      }\n    }\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:3000/musics').then(res => res.json()).then(musicList => this.setState({\n      musicList: musicList,\n      currentMusic: musicList[0]\n    }));\n    const audio = this.audio;\n    audio.addEventListener(\"canplay\", () => {\n      const totalTime = parseInt(audio.duration);\n      this.setState({\n        totalTime: this.getTime(totalTime)\n      });\n    });\n    audio.addEventListener(\"timeupdate\", () => {\n      const {\n        processItemMove\n      } = this.state;\n      const currentTime = parseInt(audio.currentTime);\n      const buffered = audio.buffered;\n      let bufferTime = 0;\n\n      if (buffered.length !== 0) {\n        bufferTime = buffered.end(buffered.length - 1);\n      }\n\n      const bufferWidth = 500 * (bufferTime / audio.duration);\n      const playWidth = 500 * (audio.currentTime / audio.duration);\n\n      if (this.processPlayed || this.processItem.style) {\n        if (!processItemMove) {\n          this.processPlayed.style.width = `${playWidth}px`;\n          this.processItem.style.left = `${playWidth - 4}px`;\n          this.setState({\n            currentTime: this.getTime(currentTime)\n          });\n        }\n      }\n\n      this.processBuffered.style.width = `${bufferWidth}px`;\n    });\n    audio.addEventListener(\"ended\", () => {\n      this.endedPlayMusic();\n    });\n    this.initVolumeProcess();\n  }\n\n  render() {\n    const {\n      currentMusic,\n      isPause,\n      totalTime,\n      currentTime,\n      volumeControl,\n      playMode,\n      isMusicListShow\n    } = this.state;\n    const {\n      title,\n      info,\n      img,\n      resource,\n      id\n    } = currentMusic || {};\n    const {\n      musicList\n    } = this.state;\n    let playModeIcon = \"\";\n\n    switch (playMode) {\n      case 1:\n        playModeIcon = \"icon-circulation-list\";\n        break;\n\n      case 2:\n        playModeIcon = \"icon-circulation-random\";\n        break;\n\n      case 3:\n        playModeIcon = \"icon-circulation-single\";\n        break;\n\n      default:\n        playModeIcon = \"icon-circulation-list\";\n        break;\n    }\n\n    console.log(this.state.upFiles);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mainLayout\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mainContent\",\n        onMouseMove: this.onProcessItemMouseMove,\n        onMouseUp: this.onProcessItemMouseUp,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"playContent\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"left-controler\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-prev prev-next-icon\",\n              onClick: this.previousMusic\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 15\n            }, this), isPause ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-pause playIcon\",\n              onClick: this.onPause\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-play playIcon\",\n              onClick: this.onPlay\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-next prev-next-icon\",\n              onClick: this.nextMusic\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"main-controler\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: img,\n              alt: \"\",\n              className: \"thumbnail\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"music-control\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"music-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"title-info\",\n                  children: title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"author-info\",\n                  children: info\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 505,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 503,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"process-time\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"process-wrapper\",\n                  onClick: this.onProcessClick,\n                  ref: ref => this.process = ref,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"process\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"progress-buffered\",\n                      ref: ref => this.processBuffered = ref\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 514,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"progress-played\",\n                      ref: ref => this.processPlayed = ref,\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"process-item\",\n                        ref: ref => this.processItem = ref,\n                        onMouseDown: this.onProcessItemMouseDown,\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"process-item-inside\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 527,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 522,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 518,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 513,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 508,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"time\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"current-time\",\n                    children: currentTime\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 533,\n                    columnNumber: 21\n                  }, this), \"/\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"total-time\",\n                    children: totalTime\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 534,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 532,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"right-folder\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: () => this.addPlayList(),\n              className: \"icon-folder folder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 540,\n              columnNumber: 19\n            }, this), this.state.addMusic ? /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"upload-title\",\n                children: \"Upload Music\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 543,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                className: \"add-music\",\n                onSubmit: e => this.submitAddMusic(e),\n                children: [/*#__PURE__*/_jsxDEV(CloseOutlined, {\n                  className: \"close-add\",\n                  onClick: () => this.addPlayList()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 547,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 548,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(Upload, { ...props,\n                  showUploadList: true,\n                  beforeUpload: this.beforeUpload,\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    className: \"add-upload\",\n                    icon: /*#__PURE__*/_jsxDEV(UploadOutlined, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 550,\n                      columnNumber: 74\n                    }, this),\n                    children: \"Upload\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 550,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 549,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  className: \"add-input\",\n                  addonBefore: \"Title: \",\n                  onChange: e => this.titleOnChange(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 552,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  className: \"add-input\",\n                  addonBefore: \"Author: \",\n                  onChange: e => this.authorOnChange(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 553,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  className: \"add-input\",\n                  addonBefore: \"Image: \",\n                  onChange: e => this.imgOnChange(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 554,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  className: \"add-input\",\n                  addonBefore: \"Description: \",\n                  onChange: e => this.descriptionOnChnage(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 555,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"add-submit\",\n                  children: \"Submit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 556,\n                  columnNumber: 35\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 544,\n                columnNumber: 35\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 35\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"right-controler\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"volume-controler\",\n              style: {\n                visibility: volumeControl ? \"visible\" : \"hidden\"\n              },\n              onMouseMove: this.onVolumeProcessItemMove,\n              onMouseUp: this.onVolumeProcessItemMouseUp,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"volume-process\",\n                onClick: this.onVolumeProcessSet,\n                ref: ref => this.volumeProcess = ref,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"volume-current\",\n                  ref: ref => this.volumeProcessCurrent = ref,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"volume-item\",\n                    ref: ref => this.volumeProcessItem = ref,\n                    onMouseDown: this.onVolumeProcessItemMouseDown,\n                    onMouseUp: this.onVolumeProcessItemMouseUp,\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"volume-item-inside\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 584,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 578,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 574,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 569,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 563,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-volume volume\",\n              onClick: this.onVolumeControl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 589,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `${playModeIcon} circulation`,\n              onClick: this.onPlayModeChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 593,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-list list\",\n              onClick: this.onMusicList\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 597,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 13\n          }, this), isMusicListShow && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"musicList\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"music-list-head\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"music-list-head-title\",\n                children: [\"Playlist(\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: musicList && musicList.length ? musicList.length : 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 21\n                }, this), \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 602,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"music-list-head-collect\",\n                onClick: this.onCollect,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"icon-addfile music-list-common-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 613,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 609,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"music-list-head-line\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 615,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"music-list-head-clear\",\n                onClick: this.onDeleteAllMusic\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 616,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"music-list-head-name\",\n                children: title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 621,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"music-list-head-close\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"icon-close music-list-common-icon\",\n                  onClick: this.onMusicList\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 623,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 622,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"music-list-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"music-list-body-content\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"music-list-body-ul\",\n                  children: musicList && musicList.length > 0 && musicList.map(item => {\n                    return /*#__PURE__*/_jsxDEV(\"li\", {\n                      className: `music-list-li ${id === item.id && \"music-current\"}`,\n                      onClick: () => this.onMusicListItemClick(item.id),\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-1\",\n                        children: id === item.id && /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"play-triangle-icon icon-currentPlay\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 644,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 642,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-2\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"music-list-li-text\",\n                          children: item.title\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 648,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 647,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-3\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"icon-clear music-list-action-icon\",\n                          onClick: e => this.onDeleteMusic(e, item)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 653,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 652,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"music-list-li-text\",\n                          children: item.info\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 659,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 658,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-5\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"music-list-li-text\",\n                          children: item.time\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 664,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 663,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-6\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"icon-link music-list-action-icon\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 669,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 668,\n                        columnNumber: 31\n                      }, this)]\n                    }, item.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 636,\n                      columnNumber: 29\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 631,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 630,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"music-cover\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 600,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n            src: resource,\n            ref: ref => this.audio = ref\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/lin/phase5/My-Place-Frontend/my-place/src/Component/Music.js"],"names":["React","Component","Upload","Input","Button","CloseOutlined","UploadOutlined","_","props","action","Music","state","isPause","musicList","currentMusic","totalTime","currentTime","processItemMove","volumeProcessItemMove","volumeControl","playMode","isMusicListShow","addMusic","placement","fileList","upFiles","title","author","img","description","getTime","time","minute","parseInt","second","minuteText","secondText","onPlay","audio","setState","play","onPause","pause","onProcessClick","e","setProcess","key","offsetWidth","pageX","processPlayed","getBoundingClientRect","left","process","offsetPercentage","duration","style","width","processItem","onProcessItemMouseDown","stopPropagation","onProcessItemMouseMove","onProcessItemMouseUp","endedPlayMusic","length","currentIndex","findIndex","item","id","onSwitchAction","randomIndex","Math","floor","random","nextMusic","previousMusic","resetProcess","onVolumeControl","onVolumeControlHide","initVolumeProcess","processLength","volumeProcess","offsetHeight","volumeProcessCurrent","height","volumeProcessItem","bottom","volume","onVolumeProcessSet","volumeOffsetHeight","pageY","top","volumepercentage","onVolumeProcessItemMouseDown","onVolumeProcessItemMouseUp","onVolumeProcessItemMove","onPlayModeChange","titleOnChange","target","value","authorOnChange","imgOnChange","descriptionOnChnage","addPlayList","submitAddMusic","preventDefault","formData","FormData","append","loginUser","fetch","method","body","then","res","json","componentDidMount","beforeUpload","file","push","onMusicList","onDeleteMusic","onDeleteAllMusic","onMusicListItemClick","index","componentDidUpdate","prevProps","prevState","snapshot","addEventListener","buffered","bufferTime","end","bufferWidth","playWidth","processBuffered","render","info","resource","playModeIcon","console","log","ref","visibility","onCollect","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Upload, Input, Button } from 'antd';\nimport {  CloseOutlined, UploadOutlined } from '@ant-design/icons';\nimport _ from \"lodash\";\nimport \"../static/style.css\";\n\n\n\n\n  const props = {\n    action: 'http://localhost:3000/musicpreview'\n  };\n\n\nexport default class Music extends Component {\n\n    state = {\n      isPause: false,\n      musicList: [],\n      currentMusic: {},\n      totalTime: \"00:00\",\n      currentTime: \"00:00\",\n      processItemMove: false,\n      volumeProcessItemMove: false,\n      volumeControl: false,\n      playMode: 1,\n      isMusicListShow: false,\n      addMusic: false,\n      placement: 'top',\n      fileList: [],\n      upFiles: [],\n      title: \"\",\n      author: \"\",\n      img: \"\",\n      description: \"\",\n\n    };\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevState.currentMusic.id !== this.state.currentMusic.id) {\n      this.resetProcess();\n      if (this.state.isPause) {\n        this.onPlay();\n      }\n    }\n  }\n\n  componentDidMount() {\n\n    fetch('http://localhost:3000/musics')\n      .then(res => res.json())\n      .then(musicList => this.setState({\n          musicList: musicList,\n          currentMusic: musicList[0]\n      }))\n\n    const audio = this.audio;\n    audio.addEventListener(\"canplay\", () => {\n      const totalTime = parseInt(audio.duration);\n      this.setState({\n        totalTime: this.getTime(totalTime)\n      });\n    });\n    audio.addEventListener(\"timeupdate\", () => {\n      const { processItemMove } = this.state;\n      const currentTime = parseInt(audio.currentTime);\n      const buffered = audio.buffered;\n      let bufferTime = 0;\n      if (buffered.length !== 0) {\n        bufferTime = buffered.end(buffered.length - 1);\n      }\n      const bufferWidth = 500 * (bufferTime / audio.duration);\n      const playWidth = 500 * (audio.currentTime / audio.duration);\n      if(this.processPlayed || this.processItem.style){\n        if (!processItemMove) {\n          this.processPlayed.style.width = `${playWidth}px`;\n          this.processItem.style.left = `${playWidth - 4}px`;\n          this.setState({\n            currentTime: this.getTime(currentTime)\n          });\n        }\n    }\n      this.processBuffered.style.width = `${bufferWidth}px`;\n    });\n\n    audio.addEventListener(\"ended\", () => {\n      this.endedPlayMusic();\n    });\n    this.initVolumeProcess();\n  }\n\n  getTime = time => {\n    if (time) {\n      const minute = parseInt((time / 60) % 60);\n      const second = parseInt(time % 60);\n      let minuteText = `${minute}`;\n      let secondText = `${second}`;\n      if (minute < 10) {\n        minuteText = `0${minute}`;\n      }\n      if (second < 10) {\n        secondText = `0${second}`;\n      }\n      return `${minuteText}:${secondText}`;\n    } else {\n      return \"00:00\";\n    }\n  };\n\n  onPlay = () => {\n    const audio = this.audio;\n    this.setState({ isPause: true });\n    audio.play();\n  };\n\n  onPause = () => {\n    const audio = this.audio;\n    this.setState({ isPause: false });\n    audio.pause();\n  };\n\n  onProcessClick = e => {\n    this.setProcess(e, \"click\");\n  };\n\n  setProcess = (e, key) => {\n    let offsetWidth = e.pageX - this.processPlayed.getBoundingClientRect().left;\n    if (offsetWidth < 0) {\n      offsetWidth = 0;\n    }\n    if (offsetWidth > this.process.offsetWidth) {\n      offsetWidth = this.process.offsetWidth;\n    }\n    const offsetPercentage = offsetWidth / this.process.offsetWidth;\n    const currentTime = this.audio.duration * offsetPercentage;\n    if (key == \"click\" || key == \"dragMove\") {\n      this.processPlayed.style.width = `${offsetWidth}px`;\n      this.processItem.style.left = `${offsetWidth - 4}px`;\n      this.setState({ currentTime: this.getTime(currentTime) });\n    }\n    if (key == \"dragEnd\" || key == \"click\") {\n      this.audio.currentTime = currentTime;\n    }\n  };\n\n  onProcessItemMouseDown = e => {\n    e.stopPropagation();\n    this.setState({ processItemMove: true });\n  };\n\n  onProcessItemMouseMove = e => {\n    e.stopPropagation();\n    const { processItemMove } = this.state;\n    if (processItemMove) {\n      this.setProcess(e, \"dragMove\");\n    }\n  };\n  \n  onProcessItemMouseUp = e => {\n    const { processItemMove } = this.state;\n    e.stopPropagation();\n    if (processItemMove) {\n      this.setState({ processItemMove: false });\n      this.setProcess(e, \"dragEnd\");\n    }\n  };\n\n  endedPlayMusic = () => {\n    const { playMode, currentMusic } = this.state;\n    const { musicList } = this.state;\n    if (musicList.length > 0 && currentMusic) {\n      const currentIndex = musicList.findIndex(item => {\n        return item.id === currentMusic.id;\n      });\n      if (playMode === 1) {\n        if (musicList[currentIndex + 1]) {\n          this.setState({ currentMusic: musicList[currentIndex + 1] }, () => {\n            this.onSwitchAction();\n          });\n        } else {\n          this.setState({ currentMusic: musicList[0] }, () => {\n            this.onSwitchAction();\n          });\n        }\n      }\n      else if (playMode === 2) {\n        const randomIndex = Math.floor(Math.random() * 3 + 1);\n        if (musicList[randomIndex + 1]) {\n          this.setState({ currentMusic: musicList[randomIndex + 1] }, () => {\n            this.onSwitchAction();\n          });\n        } else {\n          this.setState({ currentMusic: musicList[0] }, () => {\n            this.onSwitchAction();\n          });\n        }\n      }\n      else if (playMode === 3) {\n        this.onSwitchAction();\n      }\n    } else {\n      this.onSwitchAction();\n    }\n  };\n\n  nextMusic = () => {\n    const { currentMusic } = this.state;\n    const { musicList } = this.state;\n    if (musicList.length > 1 && currentMusic) {\n      const currentIndex = musicList.findIndex(item => {\n        return item.id === currentMusic.id;\n      });\n      if (musicList[currentIndex + 1]) {\n        this.setState({ currentMusic: musicList[currentIndex + 1] }, () => {\n          this.onSwitchAction();\n        });\n      } else {\n        this.setState({ currentMusic: musicList[0] }, () => {\n          this.onSwitchAction();\n        });\n      }\n    } else {\n      this.audio.currentTime = 0;\n      this.onSwitchAction();\n    }\n  };\n\n  previousMusic = () => {\n    const { currentMusic } = this.state;\n    const { musicList } = this.state;\n    if (musicList.length > 1 && currentMusic) {\n      const currentIndex = musicList.findIndex(item => {\n        return item.id === currentMusic.id;\n      });\n      if (musicList[currentIndex - 1]) {\n        this.setState({ currentMusic: musicList[currentIndex - 1] }, () => {\n          this.onSwitchAction();\n        });\n      } else {\n        this.setState({ currentMusic: musicList[musicList.length - 1] }, () => {\n          this.onSwitchAction();\n        });\n      }\n    } else {\n      this.audio.currentTime = 0;\n      this.onSwitchAction();\n    }\n  };\n\n  onSwitchAction = () => {\n    const { isPause } = this.state;\n    this.resetProcess();\n    if (isPause) {\n      this.onPlay();\n    }\n  };\n\n  resetProcess = () => {\n    this.processPlayed.style.width = \"0px\";\n    this.processItem.style.left = \"-4px\";\n  };\n\n\n  onVolumeControl = () => {\n    const { volumeControl } = this.state;\n    this.setState({ volumeControl: !volumeControl });\n  };\n\n  onVolumeControlHide = () => {\n    const { volumeControl } = this.state;\n    if (volumeControl) {\n      this.setState({ volumeControl: false });\n    }\n  };\n\n  initVolumeProcess = () => {\n\n    const processLength = this.volumeProcess.offsetHeight;\n\n    this.volumeProcessCurrent.style.height = `${processLength / 2}px`;\n\n    this.volumeProcessItem.style.bottom = `${processLength / 2 - 6}px`;\n  \n    this.audio.volume = 0.5;\n  };\n\n\n  onVolumeProcessSet = e => {\n    const processLength = this.volumeProcess.offsetHeight;\n    let volumeOffsetHeight =\n      processLength -\n      (e.pageY - this.volumeProcess.getBoundingClientRect().top);\n    let volumepercentage = 0;\n\n    if (volumeOffsetHeight < 0) {\n      volumeOffsetHeight = 0;\n    }\n    if (volumeOffsetHeight > processLength) {\n      volumeOffsetHeight = processLength;\n    }\n    volumepercentage = volumeOffsetHeight / processLength;\n\n    this.volumeProcessCurrent.style.height = `${volumeOffsetHeight}px`;\n\n    this.volumeProcessItem.style.bottom = `${volumeOffsetHeight - 6}px`;\n\n    this.audio.volume = volumepercentage;\n  };\n\n  onVolumeProcessItemMouseDown = () => {\n    this.setState({ volumeProcessItemMove: true });\n  };\n\n\n  onVolumeProcessItemMouseUp = e => {\n    const { volumeProcessItemMove } = this.state;\n    if (volumeProcessItemMove) {\n      this.setState({ volumeProcessItemMove: false });\n    }\n  };\n\n  onVolumeProcessItemMove = e => {\n    const { volumeProcessItemMove } = this.state;\n    if (volumeProcessItemMove) {\n      this.onVolumeProcessSet(e);\n    }\n  };\n\n  onPlayModeChange = () => {\n    const { playMode } = this.state;\n    if (playMode === 3) {\n      this.setState({ playMode: 1 });\n    } else {\n      this.setState({ playMode: playMode + 1 });\n    }\n  };\n\n\n  titleOnChange = (e) => {\n    this.setState({\n      title: e.target.value\n    })\n  }\n\n  authorOnChange = (e) => {\n    this.setState({\n      author: e.target.value,\n    })\n  }\n\n  imgOnChange = (e) => {\n    this.setState({\n      img: e.target.value,\n    })\n  }\n\n  descriptionOnChnage = (e) => {\n    this.setState({\n      description: e.target.value\n    })\n  }\n\n  addPlayList = () => {\n      this.setState({\n        addMusic: !this.state.addMusic\n      })\n  };\n\n\n  submitAddMusic = (e) => {\n    e.preventDefault()\n    const {upFiles, title, author, img, description } = this.state\n    let formData = new FormData();\n    formData.append('music', upFiles[0]);\n    formData.append('user_id', this.props.loginUser.id);\n    formData.append('title', title);\n    formData.append('author', author);\n    formData.append('img', img);\n    formData.append('description', description);\n\n    fetch(\"http://localhost:3000/musics\", {\n      method: \"POST\",\n      body: formData\n    })\n    .then(res => res.json())\n    .then(() => {\n      this.componentDidMount()\n      this.addPlayList()\n      this.setState({\n        upFiles: [],\n        title: \"\",\n        author: \"\",\n        img: \"\",\n        description: \"\"\n      })\n    })\n  }\n\n\n  beforeUpload = (file) => {\n    const {upFiles} = this.state;\n    upFiles.push(file);\n    this.setState({upFiles: upFiles});\n  }\n\n\n  onMusicList = () => {\n    const { isMusicListShow } = this.state;\n    this.setState({ isMusicListShow: !isMusicListShow });\n  };\n\n\n  onDeleteMusic = (e, item) => {\n    e.stopPropagation();\n    const { onDeleteMusic } = this.props;\n    if (onDeleteMusic) {\n      onDeleteMusic(item.id);\n    }\n  };\n\n  onDeleteAllMusic = () => {\n    const { onDeleteAllMusic } = this.props;\n    if (onDeleteAllMusic) {\n      onDeleteAllMusic();\n    }\n  };\n\n  onMusicListItemClick = id => {\n    const { musicList } = this.state;\n    const { currentMusic } = this.state;\n    const index = musicList.findIndex(item => {\n      return item.id === id;\n    });\n    if (index !== -1) {\n      if (currentMusic.id === id) {\n        this.resetProcess();\n        this.audio.currentTime = 0;\n        this.onPlay();\n      } else {\n        this.setState({ currentMusic: musicList[index] }, () => {\n          this.resetProcess();\n          this.onPlay();\n        });\n      }\n    }\n  };\n\n  render() {\n    const {\n      currentMusic,\n      isPause,\n      totalTime,\n      currentTime,\n      volumeControl,\n      playMode,\n      isMusicListShow\n    } = this.state;\n    const { title, info, img, resource, id } = currentMusic || {};\n    const { musicList } = this.state;\n    let playModeIcon = \"\";\n    switch (playMode) {\n      case 1:\n        playModeIcon = \"icon-circulation-list\";\n        break;\n      case 2:\n        playModeIcon = \"icon-circulation-random\";\n        break;\n      case 3:\n        playModeIcon = \"icon-circulation-single\";\n        break;\n      default:\n        playModeIcon = \"icon-circulation-list\";\n        break;\n    }\n\n    console.log(this.state.upFiles);\n    return (\n      <div className=\"mainLayout\">\n        <div\n          className=\"mainContent\"\n          onMouseMove={this.onProcessItemMouseMove}\n          onMouseUp={this.onProcessItemMouseUp}\n        >\n          <div className=\"playContent\">\n            <div className=\"left-controler\">\n              <span\n                className=\"icon-prev prev-next-icon\"\n                onClick={this.previousMusic}\n              />\n              {isPause ? (\n                <span className=\"icon-pause playIcon\" onClick={this.onPause} />\n              ) : (\n                <span className=\"icon-play playIcon\" onClick={this.onPlay} />\n              )}\n              <span\n                className=\"icon-next prev-next-icon\"\n                onClick={this.nextMusic}\n              />\n            </div>\n            <div className=\"main-controler\">\n              <img src={img} alt=\"\" className=\"thumbnail\" />\n              <div className=\"music-control\">\n                <div className=\"music-info\">\n                  <span className=\"title-info\">{title}</span>\n                  <span className=\"author-info\">{info}</span>\n                </div>\n                <div className=\"process-time\">\n                  <div\n                    className=\"process-wrapper\"\n                    onClick={this.onProcessClick}\n                    ref={ref => (this.process = ref)}\n                  >\n                    <div className=\"process\">\n                      <div\n                        className=\"progress-buffered\"\n                        ref={ref => (this.processBuffered = ref)}\n                      />\n                      <div\n                        className=\"progress-played\"\n                        ref={ref => (this.processPlayed = ref)}\n                      >\n                        <div\n                          className=\"process-item\"\n                          ref={ref => (this.processItem = ref)}\n                          onMouseDown={this.onProcessItemMouseDown}\n                        >\n                          <div className=\"process-item-inside\" />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"time\">\n                    <span className=\"current-time\">{currentTime}</span>/\n                    <span className=\"total-time\">{totalTime}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"right-folder\">\n                  <span onClick={() => this.addPlayList()} className=\"icon-folder folder\"/>\n                          {this.state.addMusic\n                                 ?<div>\n                                 <h4 className=\"upload-title\">Upload Music</h4>\n                                  <form className=\"add-music\"\n                                    onSubmit={(e) => this.submitAddMusic(e)}\n                                  >\n                                  <CloseOutlined className=\"close-add\" onClick={() => this.addPlayList()}/>\n                                  <br/>\n                                  <Upload {...props} showUploadList={true} beforeUpload={this.beforeUpload}>\n                                    <Button className=\"add-upload\" icon={<UploadOutlined />}>Upload</Button>    \n                                  </Upload>\n                                  <Input  className=\"add-input\" addonBefore=\"Title: \" onChange={(e) => this.titleOnChange(e)}></Input>\n                                  <Input className=\"add-input\" addonBefore=\"Author: \" onChange={(e) => this.authorOnChange(e)}></Input>\n                                  <Input className=\"add-input\" addonBefore=\"Image: \" onChange={(e) => this.imgOnChange(e)}></Input>\n                                  <Input className=\"add-input\" addonBefore=\"Description: \" onChange={(e) => this.descriptionOnChnage(e)}></Input>\n                                  <button className=\"add-submit\">Submit</button> \n                                </form>\n                                </div>\n                                :null\n                          }\n            </div>\n            <div className=\"right-controler\">\n              <div\n                className=\"volume-controler\"\n                style={{ visibility: volumeControl ? \"visible\" : \"hidden\" }}\n                onMouseMove={this.onVolumeProcessItemMove}\n                onMouseUp={this.onVolumeProcessItemMouseUp}\n              >\n                <div\n                  className=\"volume-process\"\n                  onClick={this.onVolumeProcessSet}\n                  ref={ref => (this.volumeProcess = ref)}\n                >\n                  <div\n                    className=\"volume-current\"\n                    ref={ref => (this.volumeProcessCurrent = ref)}\n                  >\n                    <div\n                      className=\"volume-item\"\n                      ref={ref => (this.volumeProcessItem = ref)}\n                      onMouseDown={this.onVolumeProcessItemMouseDown}\n                      onMouseUp={this.onVolumeProcessItemMouseUp}\n                    >\n                      <div className=\"volume-item-inside\" />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <span\n                className=\"icon-volume volume\"\n                onClick={this.onVolumeControl}\n              />\n              <span\n                className={`${playModeIcon} circulation`}\n                onClick={this.onPlayModeChange}\n              />\n              <span className=\"icon-list list\" onClick={this.onMusicList} />\n            </div>\n            {isMusicListShow && (\n              <div className=\"musicList\">\n                <div className=\"music-list-head\">\n                  <h4 className=\"music-list-head-title\">\n                     Playlist(\n                    <span>\n                      {musicList && musicList.length ? musicList.length : 0}\n                    </span>\n                    )\n                  </h4>\n                  <span\n                    className=\"music-list-head-collect\"\n                    onClick={this.onCollect}\n                  >\n                    <span className=\"icon-addfile music-list-common-icon\" />\n                  </span>\n                  <span className=\"music-list-head-line\" />\n                  <span\n                    className=\"music-list-head-clear\"\n                    onClick={this.onDeleteAllMusic}\n                  >\n                  </span>\n                  <p className=\"music-list-head-name\">{title}</p>\n                  <span className=\"music-list-head-close\">\n                    <span\n                      className=\"icon-close music-list-common-icon\"\n                      onClick={this.onMusicList}\n                    />\n                  </span>\n                </div>\n                <div className=\"music-list-body\">\n                  <div className=\"music-list-body-content\">\n                    <ul className=\"music-list-body-ul\">\n                      {musicList &&\n                        musicList.length > 0 &&\n                        musicList.map(item => {\n                          return (\n                            <li\n                              className={`music-list-li ${id === item.id &&\n                                \"music-current\"}`}\n                              onClick={() => this.onMusicListItemClick(item.id)}\n                              key={item.id}\n                            >\n                              <div className=\"col music-list-li-col-1\">\n                                {id === item.id && (\n                                  <span className=\"play-triangle-icon icon-currentPlay\" />\n                                )}\n                              </div>\n                              <div className=\"col music-list-li-col-2\">\n                                <span className=\"music-list-li-text\">\n                                  {item.title}\n                                </span>\n                              </div>\n                              <div className=\"col music-list-li-col-3\">\n                                <span\n                                  className=\"icon-clear music-list-action-icon\"\n                                  onClick={e => this.onDeleteMusic(e, item)}\n                                />\n                              </div>\n                              <div className=\"col music-list-li-col-4\">\n                                <span className=\"music-list-li-text\">\n                                  {item.info}\n                                </span>\n                              </div>\n                              <div className=\"col music-list-li-col-5\">\n                                <span className=\"music-list-li-text\">\n                                  {item.time}\n                                </span>\n                              </div>\n                              <div className=\"col music-list-li-col-6\">\n                                <span className=\"icon-link music-list-action-icon\" />\n                              </div>\n                            </li>\n                          );\n                        })}\n                    </ul>\n                  </div>\n                  <div className=\"music-cover\">\n                  </div>\n                </div>\n              </div>\n            )}\n            <audio src={resource} ref={ref => (this.audio = ref)} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n\n"]},"metadata":{},"sourceType":"module"}