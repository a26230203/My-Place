{"ast":null,"code":"/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.8.2 (2021-06-23)\n */\n(function () {\n  'use strict';\n\n  var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n  var noop = function () {};\n\n  var constant = function (value) {\n    return function () {\n      return value;\n    };\n  };\n\n  function curry(fn) {\n    var initialArgs = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      initialArgs[_i - 1] = arguments[_i];\n    }\n\n    return function () {\n      var restArgs = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        restArgs[_i] = arguments[_i];\n      }\n\n      var all = initialArgs.concat(restArgs);\n      return fn.apply(null, all);\n    };\n  }\n\n  var never = constant(false);\n  var always = constant(true);\n  var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n  var global$2 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n  var getCreationDateClasses = function (editor) {\n    return editor.getParam('template_cdate_classes', 'cdate');\n  };\n\n  var getModificationDateClasses = function (editor) {\n    return editor.getParam('template_mdate_classes', 'mdate');\n  };\n\n  var getSelectedContentClasses = function (editor) {\n    return editor.getParam('template_selected_content_classes', 'selcontent');\n  };\n\n  var getPreviewReplaceValues = function (editor) {\n    return editor.getParam('template_preview_replace_values');\n  };\n\n  var getContentStyle = function (editor) {\n    return editor.getParam('content_style', '', 'string');\n  };\n\n  var shouldUseContentCssCors = function (editor) {\n    return editor.getParam('content_css_cors', false, 'boolean');\n  };\n\n  var getTemplateReplaceValues = function (editor) {\n    return editor.getParam('template_replace_values');\n  };\n\n  var getTemplates = function (editor) {\n    return editor.getParam('templates');\n  };\n\n  var getCdateFormat = function (editor) {\n    return editor.getParam('template_cdate_format', editor.translate('%Y-%m-%d'));\n  };\n\n  var getMdateFormat = function (editor) {\n    return editor.getParam('template_mdate_format', editor.translate('%Y-%m-%d'));\n  };\n\n  var getBodyClassFromHash = function (editor) {\n    var bodyClass = editor.getParam('body_class', '', 'hash');\n    return bodyClass[editor.id] || '';\n  };\n\n  var getBodyClass = function (editor) {\n    var bodyClass = editor.getParam('body_class', '', 'string');\n\n    if (bodyClass.indexOf('=') === -1) {\n      return bodyClass;\n    } else {\n      return getBodyClassFromHash(editor);\n    }\n  };\n\n  var addZeros = function (value, len) {\n    value = '' + value;\n\n    if (value.length < len) {\n      for (var i = 0; i < len - value.length; i++) {\n        value = '0' + value;\n      }\n    }\n\n    return value;\n  };\n\n  var getDateTime = function (editor, fmt, date) {\n    var daysShort = 'Sun Mon Tue Wed Thu Fri Sat Sun'.split(' ');\n    var daysLong = 'Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday'.split(' ');\n    var monthsShort = 'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');\n    var monthsLong = 'January February March April May June July August September October November December'.split(' ');\n    date = date || new Date();\n    fmt = fmt.replace('%D', '%m/%d/%Y');\n    fmt = fmt.replace('%r', '%I:%M:%S %p');\n    fmt = fmt.replace('%Y', '' + date.getFullYear());\n    fmt = fmt.replace('%y', '' + date.getYear());\n    fmt = fmt.replace('%m', addZeros(date.getMonth() + 1, 2));\n    fmt = fmt.replace('%d', addZeros(date.getDate(), 2));\n    fmt = fmt.replace('%H', '' + addZeros(date.getHours(), 2));\n    fmt = fmt.replace('%M', '' + addZeros(date.getMinutes(), 2));\n    fmt = fmt.replace('%S', '' + addZeros(date.getSeconds(), 2));\n    fmt = fmt.replace('%I', '' + ((date.getHours() + 11) % 12 + 1));\n    fmt = fmt.replace('%p', '' + (date.getHours() < 12 ? 'AM' : 'PM'));\n    fmt = fmt.replace('%B', '' + editor.translate(monthsLong[date.getMonth()]));\n    fmt = fmt.replace('%b', '' + editor.translate(monthsShort[date.getMonth()]));\n    fmt = fmt.replace('%A', '' + editor.translate(daysLong[date.getDay()]));\n    fmt = fmt.replace('%a', '' + editor.translate(daysShort[date.getDay()]));\n    fmt = fmt.replace('%%', '%');\n    return fmt;\n  };\n\n  var createTemplateList = function (editor, callback) {\n    return function () {\n      var templateList = getTemplates(editor);\n\n      if (typeof templateList === 'function') {\n        templateList(callback);\n        return;\n      }\n\n      if (typeof templateList === 'string') {\n        global$2.send({\n          url: templateList,\n          success: function (text) {\n            callback(JSON.parse(text));\n          }\n        });\n      } else {\n        callback(templateList);\n      }\n    };\n  };\n\n  var replaceTemplateValues = function (html, templateValues) {\n    global$1.each(templateValues, function (v, k) {\n      if (typeof v === 'function') {\n        v = v(k);\n      }\n\n      html = html.replace(new RegExp('\\\\{\\\\$' + k + '\\\\}', 'g'), v);\n    });\n    return html;\n  };\n\n  var replaceVals = function (editor, e) {\n    var dom = editor.dom,\n        vl = getTemplateReplaceValues(editor);\n    global$1.each(dom.select('*', e), function (e) {\n      global$1.each(vl, function (v, k) {\n        if (dom.hasClass(e, k)) {\n          if (typeof vl[k] === 'function') {\n            vl[k](e);\n          }\n        }\n      });\n    });\n  };\n\n  var hasClass = function (n, c) {\n    return new RegExp('\\\\b' + c + '\\\\b', 'g').test(n.className);\n  };\n\n  var insertTemplate = function (editor, _ui, html) {\n    var el;\n    var dom = editor.dom;\n    var sel = editor.selection.getContent();\n    html = replaceTemplateValues(html, getTemplateReplaceValues(editor));\n    el = dom.create('div', null, html);\n    var n = dom.select('.mceTmpl', el);\n\n    if (n && n.length > 0) {\n      el = dom.create('div', null);\n      el.appendChild(n[0].cloneNode(true));\n    }\n\n    global$1.each(dom.select('*', el), function (n) {\n      if (hasClass(n, getCreationDateClasses(editor).replace(/\\s+/g, '|'))) {\n        n.innerHTML = getDateTime(editor, getCdateFormat(editor));\n      }\n\n      if (hasClass(n, getModificationDateClasses(editor).replace(/\\s+/g, '|'))) {\n        n.innerHTML = getDateTime(editor, getMdateFormat(editor));\n      }\n\n      if (hasClass(n, getSelectedContentClasses(editor).replace(/\\s+/g, '|'))) {\n        n.innerHTML = sel;\n      }\n    });\n    replaceVals(editor, el);\n    editor.execCommand('mceInsertContent', false, el.innerHTML);\n    editor.addVisual();\n  };\n\n  var register = function (editor) {\n    editor.addCommand('mceInsertTemplate', curry(insertTemplate, editor));\n  };\n\n  var setup = function (editor) {\n    editor.on('PreProcess', function (o) {\n      var dom = editor.dom,\n          dateFormat = getMdateFormat(editor);\n      global$1.each(dom.select('div', o.node), function (e) {\n        if (dom.hasClass(e, 'mceTmpl')) {\n          global$1.each(dom.select('*', e), function (e) {\n            if (dom.hasClass(e, getModificationDateClasses(editor).replace(/\\s+/g, '|'))) {\n              e.innerHTML = getDateTime(editor, dateFormat);\n            }\n          });\n          replaceVals(editor, e);\n        }\n      });\n    });\n  };\n\n  var none = function () {\n    return NONE;\n  };\n\n  var NONE = function () {\n    var eq = function (o) {\n      return o.isNone();\n    };\n\n    var call = function (thunk) {\n      return thunk();\n    };\n\n    var id = function (n) {\n      return n;\n    };\n\n    var me = {\n      fold: function (n, _s) {\n        return n();\n      },\n      is: never,\n      isSome: never,\n      isNone: always,\n      getOr: id,\n      getOrThunk: call,\n      getOrDie: function (msg) {\n        throw new Error(msg || 'error: getOrDie called on none.');\n      },\n      getOrNull: constant(null),\n      getOrUndefined: constant(undefined),\n      or: id,\n      orThunk: call,\n      map: none,\n      each: noop,\n      bind: none,\n      exists: never,\n      forall: always,\n      filter: none,\n      equals: eq,\n      equals_: eq,\n      toArray: function () {\n        return [];\n      },\n      toString: constant('none()')\n    };\n    return me;\n  }();\n\n  var some = function (a) {\n    var constant_a = constant(a);\n\n    var self = function () {\n      return me;\n    };\n\n    var bind = function (f) {\n      return f(a);\n    };\n\n    var me = {\n      fold: function (n, s) {\n        return s(a);\n      },\n      is: function (v) {\n        return a === v;\n      },\n      isSome: always,\n      isNone: never,\n      getOr: constant_a,\n      getOrThunk: constant_a,\n      getOrDie: constant_a,\n      getOrNull: constant_a,\n      getOrUndefined: constant_a,\n      or: self,\n      orThunk: self,\n      map: function (f) {\n        return some(f(a));\n      },\n      each: function (f) {\n        f(a);\n      },\n      bind: bind,\n      exists: bind,\n      forall: bind,\n      filter: function (f) {\n        return f(a) ? me : NONE;\n      },\n      toArray: function () {\n        return [a];\n      },\n      toString: function () {\n        return 'some(' + a + ')';\n      },\n      equals: function (o) {\n        return o.is(a);\n      },\n      equals_: function (o, elementEq) {\n        return o.fold(never, function (b) {\n          return elementEq(a, b);\n        });\n      }\n    };\n    return me;\n  };\n\n  var from = function (value) {\n    return value === null || value === undefined ? NONE : some(value);\n  };\n\n  var Optional = {\n    some: some,\n    none: none,\n    from: from\n  };\n\n  var map = function (xs, f) {\n    var len = xs.length;\n    var r = new Array(len);\n\n    for (var i = 0; i < len; i++) {\n      var x = xs[i];\n      r[i] = f(x, i);\n    }\n\n    return r;\n  };\n\n  var findUntil = function (xs, pred, until) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n\n      if (pred(x, i)) {\n        return Optional.some(x);\n      } else if (until(x, i)) {\n        break;\n      }\n    }\n\n    return Optional.none();\n  };\n\n  var find = function (xs, pred) {\n    return findUntil(xs, pred, never);\n  };\n\n  var global$3 = tinymce.util.Tools.resolve('tinymce.Env');\n  var global$4 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n  var hasOwnProperty = Object.hasOwnProperty;\n\n  var get = function (obj, key) {\n    return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n  };\n\n  var has = function (obj, key) {\n    return hasOwnProperty.call(obj, key);\n  };\n\n  var entitiesAttr = {\n    '\"': '&quot;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '&': '&amp;',\n    '\\'': '&#039;'\n  };\n\n  var htmlEscape = function (html) {\n    return html.replace(/[\"'<>&]/g, function (match) {\n      return get(entitiesAttr, match).getOr(match);\n    });\n  };\n\n  var getPreviewContent = function (editor, html) {\n    if (html.indexOf('<html>') === -1) {\n      var contentCssEntries_1 = '';\n      var contentStyle = getContentStyle(editor);\n      var cors_1 = shouldUseContentCssCors(editor) ? ' crossorigin=\"anonymous\"' : '';\n      global$1.each(editor.contentCSS, function (url) {\n        contentCssEntries_1 += '<link type=\"text/css\" rel=\"stylesheet\" href=\"' + editor.documentBaseURI.toAbsolute(url) + '\"' + cors_1 + '>';\n      });\n\n      if (contentStyle) {\n        contentCssEntries_1 += '<style type=\"text/css\">' + contentStyle + '</style>';\n      }\n\n      var bodyClass = getBodyClass(editor);\n      var encode = editor.dom.encode;\n      var isMetaKeyPressed = global$3.mac ? 'e.metaKey' : 'e.ctrlKey && !e.altKey';\n      var preventClicksOnLinksScript = '<script>' + 'document.addEventListener && document.addEventListener(\"click\", function(e) {' + 'for (var elm = e.target; elm; elm = elm.parentNode) {' + 'if (elm.nodeName === \"A\" && !(' + isMetaKeyPressed + ')) {' + 'e.preventDefault();' + '}' + '}' + '}, false);' + '</script> ';\n      var directionality = editor.getBody().dir;\n      var dirAttr = directionality ? ' dir=\"' + encode(directionality) + '\"' : '';\n      html = '<!DOCTYPE html>' + '<html>' + '<head>' + '<base href=\"' + encode(editor.documentBaseURI.getURI()) + '\">' + contentCssEntries_1 + preventClicksOnLinksScript + '</head>' + '<body class=\"' + encode(bodyClass) + '\"' + dirAttr + '>' + html + '</body>' + '</html>';\n    }\n\n    return replaceTemplateValues(html, getPreviewReplaceValues(editor));\n  };\n\n  var open = function (editor, templateList) {\n    var createTemplates = function () {\n      if (!templateList || templateList.length === 0) {\n        var message = editor.translate('No templates defined.');\n        editor.notificationManager.open({\n          text: message,\n          type: 'info'\n        });\n        return Optional.none();\n      }\n\n      return Optional.from(global$1.map(templateList, function (template, index) {\n        var isUrlTemplate = function (t) {\n          return t.url !== undefined;\n        };\n\n        return {\n          selected: index === 0,\n          text: template.title,\n          value: {\n            url: isUrlTemplate(template) ? Optional.from(template.url) : Optional.none(),\n            content: !isUrlTemplate(template) ? Optional.from(template.content) : Optional.none(),\n            description: template.description\n          }\n        };\n      }));\n    };\n\n    var createSelectBoxItems = function (templates) {\n      return map(templates, function (t) {\n        return {\n          text: t.text,\n          value: t.text\n        };\n      });\n    };\n\n    var findTemplate = function (templates, templateTitle) {\n      return find(templates, function (t) {\n        return t.text === templateTitle;\n      });\n    };\n\n    var loadFailedAlert = function (api) {\n      editor.windowManager.alert('Could not load the specified template.', function () {\n        return api.focus('template');\n      });\n    };\n\n    var getTemplateContent = function (t) {\n      return new global$4(function (resolve, reject) {\n        t.value.url.fold(function () {\n          return resolve(t.value.content.getOr(''));\n        }, function (url) {\n          return global$2.send({\n            url: url,\n            success: function (html) {\n              resolve(html);\n            },\n            error: function (e) {\n              reject(e);\n            }\n          });\n        });\n      });\n    };\n\n    var onChange = function (templates, updateDialog) {\n      return function (api, change) {\n        if (change.name === 'template') {\n          var newTemplateTitle = api.getData().template;\n          findTemplate(templates, newTemplateTitle).each(function (t) {\n            api.block('Loading...');\n            getTemplateContent(t).then(function (previewHtml) {\n              updateDialog(api, t, previewHtml);\n            }).catch(function () {\n              updateDialog(api, t, '');\n              api.disable('save');\n              loadFailedAlert(api);\n            });\n          });\n        }\n      };\n    };\n\n    var onSubmit = function (templates) {\n      return function (api) {\n        var data = api.getData();\n        findTemplate(templates, data.template).each(function (t) {\n          getTemplateContent(t).then(function (previewHtml) {\n            insertTemplate(editor, false, previewHtml);\n            api.close();\n          }).catch(function () {\n            api.disable('save');\n            loadFailedAlert(api);\n          });\n        });\n      };\n    };\n\n    var openDialog = function (templates) {\n      var selectBoxItems = createSelectBoxItems(templates);\n\n      var buildDialogSpec = function (bodyItems, initialData) {\n        return {\n          title: 'Insert Template',\n          size: 'large',\n          body: {\n            type: 'panel',\n            items: bodyItems\n          },\n          initialData: initialData,\n          buttons: [{\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          }, {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }],\n          onSubmit: onSubmit(templates),\n          onChange: onChange(templates, updateDialog)\n        };\n      };\n\n      var updateDialog = function (dialogApi, template, previewHtml) {\n        var content = getPreviewContent(editor, previewHtml);\n        var bodyItems = [{\n          type: 'selectbox',\n          name: 'template',\n          label: 'Templates',\n          items: selectBoxItems\n        }, {\n          type: 'htmlpanel',\n          html: '<p aria-live=\"polite\">' + htmlEscape(template.value.description) + '</p>'\n        }, {\n          label: 'Preview',\n          type: 'iframe',\n          name: 'preview',\n          sandboxed: false\n        }];\n        var initialData = {\n          template: template.text,\n          preview: content\n        };\n        dialogApi.unblock();\n        dialogApi.redial(buildDialogSpec(bodyItems, initialData));\n        dialogApi.focus('template');\n      };\n\n      var dialogApi = editor.windowManager.open(buildDialogSpec([], {\n        template: '',\n        preview: ''\n      }));\n      dialogApi.block('Loading...');\n      getTemplateContent(templates[0]).then(function (previewHtml) {\n        updateDialog(dialogApi, templates[0], previewHtml);\n      }).catch(function () {\n        updateDialog(dialogApi, templates[0], '');\n        dialogApi.disable('save');\n        loadFailedAlert(dialogApi);\n      });\n    };\n\n    var optTemplates = createTemplates();\n    optTemplates.each(openDialog);\n  };\n\n  var showDialog = function (editor) {\n    return function (templates) {\n      open(editor, templates);\n    };\n  };\n\n  var register$1 = function (editor) {\n    editor.ui.registry.addButton('template', {\n      icon: 'template',\n      tooltip: 'Insert template',\n      onAction: createTemplateList(editor, showDialog(editor))\n    });\n    editor.ui.registry.addMenuItem('template', {\n      icon: 'template',\n      text: 'Insert template...',\n      onAction: createTemplateList(editor, showDialog(editor))\n    });\n  };\n\n  function Plugin() {\n    global.add('template', function (editor) {\n      register$1(editor);\n      register(editor);\n      setup(editor);\n    });\n  }\n\n  Plugin();\n})();","map":{"version":3,"sources":["/home/lin/phase5/My-Place-Frontend/my-place/node_modules/tinymce/plugins/template/plugin.js"],"names":["global","tinymce","util","Tools","resolve","noop","constant","value","curry","fn","initialArgs","_i","arguments","length","restArgs","all","concat","apply","never","always","global$1","global$2","getCreationDateClasses","editor","getParam","getModificationDateClasses","getSelectedContentClasses","getPreviewReplaceValues","getContentStyle","shouldUseContentCssCors","getTemplateReplaceValues","getTemplates","getCdateFormat","translate","getMdateFormat","getBodyClassFromHash","bodyClass","id","getBodyClass","indexOf","addZeros","len","i","getDateTime","fmt","date","daysShort","split","daysLong","monthsShort","monthsLong","Date","replace","getFullYear","getYear","getMonth","getDate","getHours","getMinutes","getSeconds","getDay","createTemplateList","callback","templateList","send","url","success","text","JSON","parse","replaceTemplateValues","html","templateValues","each","v","k","RegExp","replaceVals","e","dom","vl","select","hasClass","n","c","test","className","insertTemplate","_ui","el","sel","selection","getContent","create","appendChild","cloneNode","innerHTML","execCommand","addVisual","register","addCommand","setup","on","o","dateFormat","node","none","NONE","eq","isNone","call","thunk","me","fold","_s","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","bind","exists","forall","filter","equals","equals_","toArray","toString","some","a","constant_a","self","f","s","elementEq","b","from","Optional","xs","r","Array","x","findUntil","pred","until","find","global$3","global$4","hasOwnProperty","Object","get","obj","key","has","entitiesAttr","htmlEscape","match","getPreviewContent","contentCssEntries_1","contentStyle","cors_1","contentCSS","documentBaseURI","toAbsolute","encode","isMetaKeyPressed","mac","preventClicksOnLinksScript","directionality","getBody","dir","dirAttr","getURI","open","createTemplates","message","notificationManager","type","template","index","isUrlTemplate","t","selected","title","content","description","createSelectBoxItems","templates","findTemplate","templateTitle","loadFailedAlert","api","windowManager","alert","focus","getTemplateContent","reject","error","onChange","updateDialog","change","name","newTemplateTitle","getData","block","then","previewHtml","catch","disable","onSubmit","data","close","openDialog","selectBoxItems","buildDialogSpec","bodyItems","initialData","size","body","items","buttons","primary","dialogApi","label","sandboxed","preview","unblock","redial","optTemplates","showDialog","register$1","ui","registry","addButton","icon","tooltip","onAction","addMenuItem","Plugin","add"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.8.2 (2021-06-23)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var never = constant(false);\n    var always = constant(true);\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var getCreationDateClasses = function (editor) {\n      return editor.getParam('template_cdate_classes', 'cdate');\n    };\n    var getModificationDateClasses = function (editor) {\n      return editor.getParam('template_mdate_classes', 'mdate');\n    };\n    var getSelectedContentClasses = function (editor) {\n      return editor.getParam('template_selected_content_classes', 'selcontent');\n    };\n    var getPreviewReplaceValues = function (editor) {\n      return editor.getParam('template_preview_replace_values');\n    };\n    var getContentStyle = function (editor) {\n      return editor.getParam('content_style', '', 'string');\n    };\n    var shouldUseContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors', false, 'boolean');\n    };\n    var getTemplateReplaceValues = function (editor) {\n      return editor.getParam('template_replace_values');\n    };\n    var getTemplates = function (editor) {\n      return editor.getParam('templates');\n    };\n    var getCdateFormat = function (editor) {\n      return editor.getParam('template_cdate_format', editor.translate('%Y-%m-%d'));\n    };\n    var getMdateFormat = function (editor) {\n      return editor.getParam('template_mdate_format', editor.translate('%Y-%m-%d'));\n    };\n    var getBodyClassFromHash = function (editor) {\n      var bodyClass = editor.getParam('body_class', '', 'hash');\n      return bodyClass[editor.id] || '';\n    };\n    var getBodyClass = function (editor) {\n      var bodyClass = editor.getParam('body_class', '', 'string');\n      if (bodyClass.indexOf('=') === -1) {\n        return bodyClass;\n      } else {\n        return getBodyClassFromHash(editor);\n      }\n    };\n\n    var addZeros = function (value, len) {\n      value = '' + value;\n      if (value.length < len) {\n        for (var i = 0; i < len - value.length; i++) {\n          value = '0' + value;\n        }\n      }\n      return value;\n    };\n    var getDateTime = function (editor, fmt, date) {\n      var daysShort = 'Sun Mon Tue Wed Thu Fri Sat Sun'.split(' ');\n      var daysLong = 'Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday'.split(' ');\n      var monthsShort = 'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');\n      var monthsLong = 'January February March April May June July August September October November December'.split(' ');\n      date = date || new Date();\n      fmt = fmt.replace('%D', '%m/%d/%Y');\n      fmt = fmt.replace('%r', '%I:%M:%S %p');\n      fmt = fmt.replace('%Y', '' + date.getFullYear());\n      fmt = fmt.replace('%y', '' + date.getYear());\n      fmt = fmt.replace('%m', addZeros(date.getMonth() + 1, 2));\n      fmt = fmt.replace('%d', addZeros(date.getDate(), 2));\n      fmt = fmt.replace('%H', '' + addZeros(date.getHours(), 2));\n      fmt = fmt.replace('%M', '' + addZeros(date.getMinutes(), 2));\n      fmt = fmt.replace('%S', '' + addZeros(date.getSeconds(), 2));\n      fmt = fmt.replace('%I', '' + ((date.getHours() + 11) % 12 + 1));\n      fmt = fmt.replace('%p', '' + (date.getHours() < 12 ? 'AM' : 'PM'));\n      fmt = fmt.replace('%B', '' + editor.translate(monthsLong[date.getMonth()]));\n      fmt = fmt.replace('%b', '' + editor.translate(monthsShort[date.getMonth()]));\n      fmt = fmt.replace('%A', '' + editor.translate(daysLong[date.getDay()]));\n      fmt = fmt.replace('%a', '' + editor.translate(daysShort[date.getDay()]));\n      fmt = fmt.replace('%%', '%');\n      return fmt;\n    };\n\n    var createTemplateList = function (editor, callback) {\n      return function () {\n        var templateList = getTemplates(editor);\n        if (typeof templateList === 'function') {\n          templateList(callback);\n          return;\n        }\n        if (typeof templateList === 'string') {\n          global$2.send({\n            url: templateList,\n            success: function (text) {\n              callback(JSON.parse(text));\n            }\n          });\n        } else {\n          callback(templateList);\n        }\n      };\n    };\n    var replaceTemplateValues = function (html, templateValues) {\n      global$1.each(templateValues, function (v, k) {\n        if (typeof v === 'function') {\n          v = v(k);\n        }\n        html = html.replace(new RegExp('\\\\{\\\\$' + k + '\\\\}', 'g'), v);\n      });\n      return html;\n    };\n    var replaceVals = function (editor, e) {\n      var dom = editor.dom, vl = getTemplateReplaceValues(editor);\n      global$1.each(dom.select('*', e), function (e) {\n        global$1.each(vl, function (v, k) {\n          if (dom.hasClass(e, k)) {\n            if (typeof vl[k] === 'function') {\n              vl[k](e);\n            }\n          }\n        });\n      });\n    };\n    var hasClass = function (n, c) {\n      return new RegExp('\\\\b' + c + '\\\\b', 'g').test(n.className);\n    };\n    var insertTemplate = function (editor, _ui, html) {\n      var el;\n      var dom = editor.dom;\n      var sel = editor.selection.getContent();\n      html = replaceTemplateValues(html, getTemplateReplaceValues(editor));\n      el = dom.create('div', null, html);\n      var n = dom.select('.mceTmpl', el);\n      if (n && n.length > 0) {\n        el = dom.create('div', null);\n        el.appendChild(n[0].cloneNode(true));\n      }\n      global$1.each(dom.select('*', el), function (n) {\n        if (hasClass(n, getCreationDateClasses(editor).replace(/\\s+/g, '|'))) {\n          n.innerHTML = getDateTime(editor, getCdateFormat(editor));\n        }\n        if (hasClass(n, getModificationDateClasses(editor).replace(/\\s+/g, '|'))) {\n          n.innerHTML = getDateTime(editor, getMdateFormat(editor));\n        }\n        if (hasClass(n, getSelectedContentClasses(editor).replace(/\\s+/g, '|'))) {\n          n.innerHTML = sel;\n        }\n      });\n      replaceVals(editor, el);\n      editor.execCommand('mceInsertContent', false, el.innerHTML);\n      editor.addVisual();\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceInsertTemplate', curry(insertTemplate, editor));\n    };\n\n    var setup = function (editor) {\n      editor.on('PreProcess', function (o) {\n        var dom = editor.dom, dateFormat = getMdateFormat(editor);\n        global$1.each(dom.select('div', o.node), function (e) {\n          if (dom.hasClass(e, 'mceTmpl')) {\n            global$1.each(dom.select('*', e), function (e) {\n              if (dom.hasClass(e, getModificationDateClasses(editor).replace(/\\s+/g, '|'))) {\n                e.innerHTML = getDateTime(editor, dateFormat);\n              }\n            });\n            replaceVals(editor, e);\n          }\n        });\n      });\n    };\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var hasOwnProperty = Object.hasOwnProperty;\n    var get = function (obj, key) {\n      return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var entitiesAttr = {\n      '\"': '&quot;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '\\'': '&#039;'\n    };\n    var htmlEscape = function (html) {\n      return html.replace(/[\"'<>&]/g, function (match) {\n        return get(entitiesAttr, match).getOr(match);\n      });\n    };\n\n    var getPreviewContent = function (editor, html) {\n      if (html.indexOf('<html>') === -1) {\n        var contentCssEntries_1 = '';\n        var contentStyle = getContentStyle(editor);\n        var cors_1 = shouldUseContentCssCors(editor) ? ' crossorigin=\"anonymous\"' : '';\n        global$1.each(editor.contentCSS, function (url) {\n          contentCssEntries_1 += '<link type=\"text/css\" rel=\"stylesheet\" href=\"' + editor.documentBaseURI.toAbsolute(url) + '\"' + cors_1 + '>';\n        });\n        if (contentStyle) {\n          contentCssEntries_1 += '<style type=\"text/css\">' + contentStyle + '</style>';\n        }\n        var bodyClass = getBodyClass(editor);\n        var encode = editor.dom.encode;\n        var isMetaKeyPressed = global$3.mac ? 'e.metaKey' : 'e.ctrlKey && !e.altKey';\n        var preventClicksOnLinksScript = '<script>' + 'document.addEventListener && document.addEventListener(\"click\", function(e) {' + 'for (var elm = e.target; elm; elm = elm.parentNode) {' + 'if (elm.nodeName === \"A\" && !(' + isMetaKeyPressed + ')) {' + 'e.preventDefault();' + '}' + '}' + '}, false);' + '</script> ';\n        var directionality = editor.getBody().dir;\n        var dirAttr = directionality ? ' dir=\"' + encode(directionality) + '\"' : '';\n        html = '<!DOCTYPE html>' + '<html>' + '<head>' + '<base href=\"' + encode(editor.documentBaseURI.getURI()) + '\">' + contentCssEntries_1 + preventClicksOnLinksScript + '</head>' + '<body class=\"' + encode(bodyClass) + '\"' + dirAttr + '>' + html + '</body>' + '</html>';\n      }\n      return replaceTemplateValues(html, getPreviewReplaceValues(editor));\n    };\n    var open = function (editor, templateList) {\n      var createTemplates = function () {\n        if (!templateList || templateList.length === 0) {\n          var message = editor.translate('No templates defined.');\n          editor.notificationManager.open({\n            text: message,\n            type: 'info'\n          });\n          return Optional.none();\n        }\n        return Optional.from(global$1.map(templateList, function (template, index) {\n          var isUrlTemplate = function (t) {\n            return t.url !== undefined;\n          };\n          return {\n            selected: index === 0,\n            text: template.title,\n            value: {\n              url: isUrlTemplate(template) ? Optional.from(template.url) : Optional.none(),\n              content: !isUrlTemplate(template) ? Optional.from(template.content) : Optional.none(),\n              description: template.description\n            }\n          };\n        }));\n      };\n      var createSelectBoxItems = function (templates) {\n        return map(templates, function (t) {\n          return {\n            text: t.text,\n            value: t.text\n          };\n        });\n      };\n      var findTemplate = function (templates, templateTitle) {\n        return find(templates, function (t) {\n          return t.text === templateTitle;\n        });\n      };\n      var loadFailedAlert = function (api) {\n        editor.windowManager.alert('Could not load the specified template.', function () {\n          return api.focus('template');\n        });\n      };\n      var getTemplateContent = function (t) {\n        return new global$4(function (resolve, reject) {\n          t.value.url.fold(function () {\n            return resolve(t.value.content.getOr(''));\n          }, function (url) {\n            return global$2.send({\n              url: url,\n              success: function (html) {\n                resolve(html);\n              },\n              error: function (e) {\n                reject(e);\n              }\n            });\n          });\n        });\n      };\n      var onChange = function (templates, updateDialog) {\n        return function (api, change) {\n          if (change.name === 'template') {\n            var newTemplateTitle = api.getData().template;\n            findTemplate(templates, newTemplateTitle).each(function (t) {\n              api.block('Loading...');\n              getTemplateContent(t).then(function (previewHtml) {\n                updateDialog(api, t, previewHtml);\n              }).catch(function () {\n                updateDialog(api, t, '');\n                api.disable('save');\n                loadFailedAlert(api);\n              });\n            });\n          }\n        };\n      };\n      var onSubmit = function (templates) {\n        return function (api) {\n          var data = api.getData();\n          findTemplate(templates, data.template).each(function (t) {\n            getTemplateContent(t).then(function (previewHtml) {\n              insertTemplate(editor, false, previewHtml);\n              api.close();\n            }).catch(function () {\n              api.disable('save');\n              loadFailedAlert(api);\n            });\n          });\n        };\n      };\n      var openDialog = function (templates) {\n        var selectBoxItems = createSelectBoxItems(templates);\n        var buildDialogSpec = function (bodyItems, initialData) {\n          return {\n            title: 'Insert Template',\n            size: 'large',\n            body: {\n              type: 'panel',\n              items: bodyItems\n            },\n            initialData: initialData,\n            buttons: [\n              {\n                type: 'cancel',\n                name: 'cancel',\n                text: 'Cancel'\n              },\n              {\n                type: 'submit',\n                name: 'save',\n                text: 'Save',\n                primary: true\n              }\n            ],\n            onSubmit: onSubmit(templates),\n            onChange: onChange(templates, updateDialog)\n          };\n        };\n        var updateDialog = function (dialogApi, template, previewHtml) {\n          var content = getPreviewContent(editor, previewHtml);\n          var bodyItems = [\n            {\n              type: 'selectbox',\n              name: 'template',\n              label: 'Templates',\n              items: selectBoxItems\n            },\n            {\n              type: 'htmlpanel',\n              html: '<p aria-live=\"polite\">' + htmlEscape(template.value.description) + '</p>'\n            },\n            {\n              label: 'Preview',\n              type: 'iframe',\n              name: 'preview',\n              sandboxed: false\n            }\n          ];\n          var initialData = {\n            template: template.text,\n            preview: content\n          };\n          dialogApi.unblock();\n          dialogApi.redial(buildDialogSpec(bodyItems, initialData));\n          dialogApi.focus('template');\n        };\n        var dialogApi = editor.windowManager.open(buildDialogSpec([], {\n          template: '',\n          preview: ''\n        }));\n        dialogApi.block('Loading...');\n        getTemplateContent(templates[0]).then(function (previewHtml) {\n          updateDialog(dialogApi, templates[0], previewHtml);\n        }).catch(function () {\n          updateDialog(dialogApi, templates[0], '');\n          dialogApi.disable('save');\n          loadFailedAlert(dialogApi);\n        });\n      };\n      var optTemplates = createTemplates();\n      optTemplates.each(openDialog);\n    };\n\n    var showDialog = function (editor) {\n      return function (templates) {\n        open(editor, templates);\n      };\n    };\n    var register$1 = function (editor) {\n      editor.ui.registry.addButton('template', {\n        icon: 'template',\n        tooltip: 'Insert template',\n        onAction: createTemplateList(editor, showDialog(editor))\n      });\n      editor.ui.registry.addMenuItem('template', {\n        icon: 'template',\n        text: 'Insert template...',\n        onAction: createTemplateList(editor, showDialog(editor))\n      });\n    };\n\n    function Plugin () {\n      global.add('template', function (editor) {\n        register$1(editor);\n        register(editor);\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n"]},"metadata":{},"sourceType":"script"}