{"ast":null,"code":"/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.8.2 (2021-06-23)\n */\n(function () {\n  'use strict';\n\n  var Cell = function (initial) {\n    var value = initial;\n\n    var get = function () {\n      return value;\n    };\n\n    var set = function (v) {\n      value = v;\n    };\n\n    return {\n      get: get,\n      set: set\n    };\n  };\n\n  var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n  var get = function (fullscreenState) {\n    return {\n      isFullscreen: function () {\n        return fullscreenState.get() !== null;\n      }\n    };\n  };\n\n  var typeOf = function (x) {\n    var t = typeof x;\n\n    if (x === null) {\n      return 'null';\n    } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n      return 'array';\n    } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n      return 'string';\n    } else {\n      return t;\n    }\n  };\n\n  var isType = function (type) {\n    return function (value) {\n      return typeOf(value) === type;\n    };\n  };\n\n  var isSimpleType = function (type) {\n    return function (value) {\n      return typeof value === type;\n    };\n  };\n\n  var isString = isType('string');\n  var isArray = isType('array');\n  var isBoolean = isSimpleType('boolean');\n\n  var isNullable = function (a) {\n    return a === null || a === undefined;\n  };\n\n  var isNonNullable = function (a) {\n    return !isNullable(a);\n  };\n\n  var isFunction = isSimpleType('function');\n  var isNumber = isSimpleType('number');\n\n  var noop = function () {};\n\n  var compose = function (fa, fb) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return fa(fb.apply(null, args));\n    };\n  };\n\n  var compose1 = function (fbc, fab) {\n    return function (a) {\n      return fbc(fab(a));\n    };\n  };\n\n  var constant = function (value) {\n    return function () {\n      return value;\n    };\n  };\n\n  function curry(fn) {\n    var initialArgs = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      initialArgs[_i - 1] = arguments[_i];\n    }\n\n    return function () {\n      var restArgs = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        restArgs[_i] = arguments[_i];\n      }\n\n      var all = initialArgs.concat(restArgs);\n      return fn.apply(null, all);\n    };\n  }\n\n  var never = constant(false);\n  var always = constant(true);\n\n  var none = function () {\n    return NONE;\n  };\n\n  var NONE = function () {\n    var eq = function (o) {\n      return o.isNone();\n    };\n\n    var call = function (thunk) {\n      return thunk();\n    };\n\n    var id = function (n) {\n      return n;\n    };\n\n    var me = {\n      fold: function (n, _s) {\n        return n();\n      },\n      is: never,\n      isSome: never,\n      isNone: always,\n      getOr: id,\n      getOrThunk: call,\n      getOrDie: function (msg) {\n        throw new Error(msg || 'error: getOrDie called on none.');\n      },\n      getOrNull: constant(null),\n      getOrUndefined: constant(undefined),\n      or: id,\n      orThunk: call,\n      map: none,\n      each: noop,\n      bind: none,\n      exists: never,\n      forall: always,\n      filter: none,\n      equals: eq,\n      equals_: eq,\n      toArray: function () {\n        return [];\n      },\n      toString: constant('none()')\n    };\n    return me;\n  }();\n\n  var some = function (a) {\n    var constant_a = constant(a);\n\n    var self = function () {\n      return me;\n    };\n\n    var bind = function (f) {\n      return f(a);\n    };\n\n    var me = {\n      fold: function (n, s) {\n        return s(a);\n      },\n      is: function (v) {\n        return a === v;\n      },\n      isSome: always,\n      isNone: never,\n      getOr: constant_a,\n      getOrThunk: constant_a,\n      getOrDie: constant_a,\n      getOrNull: constant_a,\n      getOrUndefined: constant_a,\n      or: self,\n      orThunk: self,\n      map: function (f) {\n        return some(f(a));\n      },\n      each: function (f) {\n        f(a);\n      },\n      bind: bind,\n      exists: bind,\n      forall: bind,\n      filter: function (f) {\n        return f(a) ? me : NONE;\n      },\n      toArray: function () {\n        return [a];\n      },\n      toString: function () {\n        return 'some(' + a + ')';\n      },\n      equals: function (o) {\n        return o.is(a);\n      },\n      equals_: function (o, elementEq) {\n        return o.fold(never, function (b) {\n          return elementEq(a, b);\n        });\n      }\n    };\n    return me;\n  };\n\n  var from = function (value) {\n    return value === null || value === undefined ? NONE : some(value);\n  };\n\n  var Optional = {\n    some: some,\n    none: none,\n    from: from\n  };\n\n  var revocable = function (doRevoke) {\n    var subject = Cell(Optional.none());\n\n    var revoke = function () {\n      return subject.get().each(doRevoke);\n    };\n\n    var clear = function () {\n      revoke();\n      subject.set(Optional.none());\n    };\n\n    var isSet = function () {\n      return subject.get().isSome();\n    };\n\n    var set = function (s) {\n      revoke();\n      subject.set(Optional.some(s));\n    };\n\n    return {\n      clear: clear,\n      isSet: isSet,\n      set: set\n    };\n  };\n\n  var unbindable = function () {\n    return revocable(function (s) {\n      return s.unbind();\n    });\n  };\n\n  var value = function () {\n    var subject = Cell(Optional.none());\n\n    var clear = function () {\n      return subject.set(Optional.none());\n    };\n\n    var set = function (s) {\n      return subject.set(Optional.some(s));\n    };\n\n    var isSet = function () {\n      return subject.get().isSome();\n    };\n\n    var on = function (f) {\n      return subject.get().each(f);\n    };\n\n    return {\n      clear: clear,\n      set: set,\n      isSet: isSet,\n      on: on\n    };\n  };\n\n  var nativePush = Array.prototype.push;\n\n  var map = function (xs, f) {\n    var len = xs.length;\n    var r = new Array(len);\n\n    for (var i = 0; i < len; i++) {\n      var x = xs[i];\n      r[i] = f(x, i);\n    }\n\n    return r;\n  };\n\n  var each = function (xs, f) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n      f(x, i);\n    }\n  };\n\n  var filter = function (xs, pred) {\n    var r = [];\n\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n\n      if (pred(x, i)) {\n        r.push(x);\n      }\n    }\n\n    return r;\n  };\n\n  var flatten = function (xs) {\n    var r = [];\n\n    for (var i = 0, len = xs.length; i < len; ++i) {\n      if (!isArray(xs[i])) {\n        throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n      }\n\n      nativePush.apply(r, xs[i]);\n    }\n\n    return r;\n  };\n\n  var bind = function (xs, f) {\n    return flatten(map(xs, f));\n  };\n\n  var get$1 = function (xs, i) {\n    return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n  };\n\n  var head = function (xs) {\n    return get$1(xs, 0);\n  };\n\n  var keys = Object.keys;\n\n  var each$1 = function (obj, f) {\n    var props = keys(obj);\n\n    for (var k = 0, len = props.length; k < len; k++) {\n      var i = props[k];\n      var x = obj[i];\n      f(x, i);\n    }\n  };\n\n  var isSupported = function (dom) {\n    return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n  };\n\n  var fromHtml = function (html, scope) {\n    var doc = scope || document;\n    var div = doc.createElement('div');\n    div.innerHTML = html;\n\n    if (!div.hasChildNodes() || div.childNodes.length > 1) {\n      console.error('HTML does not have a single root node', html);\n      throw new Error('HTML must have a single root node');\n    }\n\n    return fromDom(div.childNodes[0]);\n  };\n\n  var fromTag = function (tag, scope) {\n    var doc = scope || document;\n    var node = doc.createElement(tag);\n    return fromDom(node);\n  };\n\n  var fromText = function (text, scope) {\n    var doc = scope || document;\n    var node = doc.createTextNode(text);\n    return fromDom(node);\n  };\n\n  var fromDom = function (node) {\n    if (node === null || node === undefined) {\n      throw new Error('Node cannot be null or undefined');\n    }\n\n    return {\n      dom: node\n    };\n  };\n\n  var fromPoint = function (docElm, x, y) {\n    return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n  };\n\n  var SugarElement = {\n    fromHtml: fromHtml,\n    fromTag: fromTag,\n    fromText: fromText,\n    fromDom: fromDom,\n    fromPoint: fromPoint\n  };\n  var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n  var DOCUMENT = 9;\n  var DOCUMENT_FRAGMENT = 11;\n  var ELEMENT = 1;\n  var TEXT = 3;\n\n  var type = function (element) {\n    return element.dom.nodeType;\n  };\n\n  var isType$1 = function (t) {\n    return function (element) {\n      return type(element) === t;\n    };\n  };\n\n  var isElement = isType$1(ELEMENT);\n  var isText = isType$1(TEXT);\n  var isDocument = isType$1(DOCUMENT);\n  var isDocumentFragment = isType$1(DOCUMENT_FRAGMENT);\n\n  var is = function (element, selector) {\n    var dom = element.dom;\n\n    if (dom.nodeType !== ELEMENT) {\n      return false;\n    } else {\n      var elem = dom;\n\n      if (elem.matches !== undefined) {\n        return elem.matches(selector);\n      } else if (elem.msMatchesSelector !== undefined) {\n        return elem.msMatchesSelector(selector);\n      } else if (elem.webkitMatchesSelector !== undefined) {\n        return elem.webkitMatchesSelector(selector);\n      } else if (elem.mozMatchesSelector !== undefined) {\n        return elem.mozMatchesSelector(selector);\n      } else {\n        throw new Error('Browser lacks native selectors');\n      }\n    }\n  };\n\n  var bypassSelector = function (dom) {\n    return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n  };\n\n  var all = function (selector, scope) {\n    var base = scope === undefined ? document : scope.dom;\n    return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n  };\n\n  var eq = function (e1, e2) {\n    return e1.dom === e2.dom;\n  };\n\n  var owner = function (element) {\n    return SugarElement.fromDom(element.dom.ownerDocument);\n  };\n\n  var documentOrOwner = function (dos) {\n    return isDocument(dos) ? dos : owner(dos);\n  };\n\n  var parent = function (element) {\n    return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n  };\n\n  var parents = function (element, isRoot) {\n    var stop = isFunction(isRoot) ? isRoot : never;\n    var dom = element.dom;\n    var ret = [];\n\n    while (dom.parentNode !== null && dom.parentNode !== undefined) {\n      var rawParent = dom.parentNode;\n      var p = SugarElement.fromDom(rawParent);\n      ret.push(p);\n\n      if (stop(p) === true) {\n        break;\n      } else {\n        dom = rawParent;\n      }\n    }\n\n    return ret;\n  };\n\n  var siblings = function (element) {\n    var filterSelf = function (elements) {\n      return filter(elements, function (x) {\n        return !eq(element, x);\n      });\n    };\n\n    return parent(element).map(children).map(filterSelf).getOr([]);\n  };\n\n  var children = function (element) {\n    return map(element.dom.childNodes, SugarElement.fromDom);\n  };\n\n  var isShadowRoot = function (dos) {\n    return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n  };\n\n  var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n  var isSupported$1 = constant(supported);\n  var getRootNode = supported ? function (e) {\n    return SugarElement.fromDom(e.dom.getRootNode());\n  } : documentOrOwner;\n\n  var getShadowRoot = function (e) {\n    var r = getRootNode(e);\n    return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n  };\n\n  var getShadowHost = function (e) {\n    return SugarElement.fromDom(e.dom.host);\n  };\n\n  var getOriginalEventTarget = function (event) {\n    if (isSupported$1() && isNonNullable(event.target)) {\n      var el = SugarElement.fromDom(event.target);\n\n      if (isElement(el) && isOpenShadowHost(el)) {\n        if (event.composed && event.composedPath) {\n          var composedPath = event.composedPath();\n\n          if (composedPath) {\n            return head(composedPath);\n          }\n        }\n      }\n    }\n\n    return Optional.from(event.target);\n  };\n\n  var isOpenShadowHost = function (element) {\n    return isNonNullable(element.dom.shadowRoot);\n  };\n\n  var inBody = function (element) {\n    var dom = isText(element) ? element.dom.parentNode : element.dom;\n\n    if (dom === undefined || dom === null || dom.ownerDocument === null) {\n      return false;\n    }\n\n    var doc = dom.ownerDocument;\n    return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n      return doc.body.contains(dom);\n    }, compose1(inBody, getShadowHost));\n  };\n\n  var getBody = function (doc) {\n    var b = doc.dom.body;\n\n    if (b === null || b === undefined) {\n      throw new Error('Body is not available yet');\n    }\n\n    return SugarElement.fromDom(b);\n  };\n\n  var rawSet = function (dom, key, value) {\n    if (isString(value) || isBoolean(value) || isNumber(value)) {\n      dom.setAttribute(key, value + '');\n    } else {\n      console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n      throw new Error('Attribute value was not simple');\n    }\n  };\n\n  var set = function (element, key, value) {\n    rawSet(element.dom, key, value);\n  };\n\n  var get$2 = function (element, key) {\n    var v = element.dom.getAttribute(key);\n    return v === null ? undefined : v;\n  };\n\n  var remove = function (element, key) {\n    element.dom.removeAttribute(key);\n  };\n\n  var internalSet = function (dom, property, value) {\n    if (!isString(value)) {\n      console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n      throw new Error('CSS value must be a string: ' + value);\n    }\n\n    if (isSupported(dom)) {\n      dom.style.setProperty(property, value);\n    }\n  };\n\n  var setAll = function (element, css) {\n    var dom = element.dom;\n    each$1(css, function (v, k) {\n      internalSet(dom, k, v);\n    });\n  };\n\n  var get$3 = function (element, property) {\n    var dom = element.dom;\n    var styles = window.getComputedStyle(dom);\n    var r = styles.getPropertyValue(property);\n    return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n  };\n\n  var getUnsafeProperty = function (dom, property) {\n    return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n  };\n\n  var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n    return {\n      target: target,\n      x: x,\n      y: y,\n      stop: stop,\n      prevent: prevent,\n      kill: kill,\n      raw: raw\n    };\n  };\n\n  var fromRawEvent = function (rawEvent) {\n    var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n\n    var stop = function () {\n      return rawEvent.stopPropagation();\n    };\n\n    var prevent = function () {\n      return rawEvent.preventDefault();\n    };\n\n    var kill = compose(prevent, stop);\n    return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n  };\n\n  var handle = function (filter, handler) {\n    return function (rawEvent) {\n      if (filter(rawEvent)) {\n        handler(fromRawEvent(rawEvent));\n      }\n    };\n  };\n\n  var binder = function (element, event, filter, handler, useCapture) {\n    var wrapped = handle(filter, handler);\n    element.dom.addEventListener(event, wrapped, useCapture);\n    return {\n      unbind: curry(unbind, element, event, wrapped, useCapture)\n    };\n  };\n\n  var bind$1 = function (element, event, filter, handler) {\n    return binder(element, event, filter, handler, false);\n  };\n\n  var unbind = function (element, event, handler, useCapture) {\n    element.dom.removeEventListener(event, handler, useCapture);\n  };\n\n  var filter$1 = always;\n\n  var bind$2 = function (element, event, handler) {\n    return bind$1(element, event, filter$1, handler);\n  };\n\n  var r = function (left, top) {\n    var translate = function (x, y) {\n      return r(left + x, top + y);\n    };\n\n    return {\n      left: left,\n      top: top,\n      translate: translate\n    };\n  };\n\n  var SugarPosition = r;\n\n  var get$4 = function (_DOC) {\n    var doc = _DOC !== undefined ? _DOC.dom : document;\n    var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n    var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n    return SugarPosition(x, y);\n  };\n\n  var get$5 = function (_win) {\n    var win = _win === undefined ? window : _win;\n    return Optional.from(win['visualViewport']);\n  };\n\n  var bounds = function (x, y, width, height) {\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height,\n      right: x + width,\n      bottom: y + height\n    };\n  };\n\n  var getBounds = function (_win) {\n    var win = _win === undefined ? window : _win;\n    var doc = win.document;\n    var scroll = get$4(SugarElement.fromDom(doc));\n    return get$5(win).fold(function () {\n      var html = win.document.documentElement;\n      var width = html.clientWidth;\n      var height = html.clientHeight;\n      return bounds(scroll.left, scroll.top, width, height);\n    }, function (visualViewport) {\n      return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n    });\n  };\n\n  var bind$3 = function (name, callback, _win) {\n    return get$5(_win).map(function (visualViewport) {\n      var handler = function (e) {\n        return callback(fromRawEvent(e));\n      };\n\n      visualViewport.addEventListener(name, handler);\n      return {\n        unbind: function () {\n          return visualViewport.removeEventListener(name, handler);\n        }\n      };\n    }).getOrThunk(function () {\n      return {\n        unbind: noop\n      };\n    });\n  };\n\n  var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n  var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n  var global$3 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n  var fireFullscreenStateChanged = function (editor, state) {\n    editor.fire('FullscreenStateChanged', {\n      state: state\n    });\n  };\n\n  var getFullscreenNative = function (editor) {\n    return editor.getParam('fullscreen_native', false, 'boolean');\n  };\n\n  var getFullscreenRoot = function (editor) {\n    var elem = SugarElement.fromDom(editor.getElement());\n    return getShadowRoot(elem).map(getShadowHost).getOrThunk(function () {\n      return getBody(owner(elem));\n    });\n  };\n\n  var getFullscreenElement = function (root) {\n    if (root.fullscreenElement !== undefined) {\n      return root.fullscreenElement;\n    } else if (root.msFullscreenElement !== undefined) {\n      return root.msFullscreenElement;\n    } else if (root.webkitFullscreenElement !== undefined) {\n      return root.webkitFullscreenElement;\n    } else {\n      return null;\n    }\n  };\n\n  var getFullscreenchangeEventName = function () {\n    if (document.fullscreenElement !== undefined) {\n      return 'fullscreenchange';\n    } else if (document.msFullscreenElement !== undefined) {\n      return 'MSFullscreenChange';\n    } else if (document.webkitFullscreenElement !== undefined) {\n      return 'webkitfullscreenchange';\n    } else {\n      return 'fullscreenchange';\n    }\n  };\n\n  var requestFullscreen = function (sugarElem) {\n    var elem = sugarElem.dom;\n\n    if (elem.requestFullscreen) {\n      elem.requestFullscreen();\n    } else if (elem.msRequestFullscreen) {\n      elem.msRequestFullscreen();\n    } else if (elem.webkitRequestFullScreen) {\n      elem.webkitRequestFullScreen();\n    }\n  };\n\n  var exitFullscreen = function (sugarDoc) {\n    var doc = sugarDoc.dom;\n\n    if (doc.exitFullscreen) {\n      doc.exitFullscreen();\n    } else if (doc.msExitFullscreen) {\n      doc.msExitFullscreen();\n    } else if (doc.webkitCancelFullScreen) {\n      doc.webkitCancelFullScreen();\n    }\n  };\n\n  var isFullscreenElement = function (elem) {\n    return elem.dom === getFullscreenElement(owner(elem).dom);\n  };\n\n  var ancestors = function (scope, predicate, isRoot) {\n    return filter(parents(scope, isRoot), predicate);\n  };\n\n  var siblings$1 = function (scope, predicate) {\n    return filter(siblings(scope), predicate);\n  };\n\n  var all$1 = function (selector) {\n    return all(selector);\n  };\n\n  var ancestors$1 = function (scope, selector, isRoot) {\n    return ancestors(scope, function (e) {\n      return is(e, selector);\n    }, isRoot);\n  };\n\n  var siblings$2 = function (scope, selector) {\n    return siblings$1(scope, function (e) {\n      return is(e, selector);\n    });\n  };\n\n  var attr = 'data-ephox-mobile-fullscreen-style';\n  var siblingStyles = 'display:none!important;';\n  var ancestorPosition = 'position:absolute!important;';\n  var ancestorStyles = 'top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;';\n  var bgFallback = 'background-color:rgb(255,255,255)!important;';\n  var isAndroid = global$2.os.isAndroid();\n\n  var matchColor = function (editorBody) {\n    var color = get$3(editorBody, 'background-color');\n    return color !== undefined && color !== '' ? 'background-color:' + color + '!important' : bgFallback;\n  };\n\n  var clobberStyles = function (dom, container, editorBody) {\n    var gatherSiblings = function (element) {\n      return siblings$2(element, '*:not(.tox-silver-sink)');\n    };\n\n    var clobber = function (clobberStyle) {\n      return function (element) {\n        var styles = get$2(element, 'style');\n        var backup = styles === undefined ? 'no-styles' : styles.trim();\n\n        if (backup === clobberStyle) {\n          return;\n        } else {\n          set(element, attr, backup);\n          setAll(element, dom.parseStyle(clobberStyle));\n        }\n      };\n    };\n\n    var ancestors = ancestors$1(container, '*');\n    var siblings = bind(ancestors, gatherSiblings);\n    var bgColor = matchColor(editorBody);\n    each(siblings, clobber(siblingStyles));\n    each(ancestors, clobber(ancestorPosition + ancestorStyles + bgColor));\n    var containerStyles = isAndroid === true ? '' : ancestorPosition;\n    clobber(containerStyles + ancestorStyles + bgColor)(container);\n  };\n\n  var restoreStyles = function (dom) {\n    var clobberedEls = all$1('[' + attr + ']');\n    each(clobberedEls, function (element) {\n      var restore = get$2(element, attr);\n\n      if (restore !== 'no-styles') {\n        setAll(element, dom.parseStyle(restore));\n      } else {\n        remove(element, 'style');\n      }\n\n      remove(element, attr);\n    });\n  };\n\n  var DOM = global$1.DOM;\n\n  var getScrollPos = function () {\n    var vp = getBounds(window);\n    return {\n      x: vp.x,\n      y: vp.y\n    };\n  };\n\n  var setScrollPos = function (pos) {\n    window.scrollTo(pos.x, pos.y);\n  };\n\n  var viewportUpdate = get$5().fold(function () {\n    return {\n      bind: noop,\n      unbind: noop\n    };\n  }, function (visualViewport) {\n    var editorContainer = value();\n    var resizeBinder = unbindable();\n    var scrollBinder = unbindable();\n\n    var refreshScroll = function () {\n      document.body.scrollTop = 0;\n      document.documentElement.scrollTop = 0;\n    };\n\n    var refreshVisualViewport = function () {\n      window.requestAnimationFrame(function () {\n        editorContainer.on(function (container) {\n          return setAll(container, {\n            top: visualViewport.offsetTop + 'px',\n            left: visualViewport.offsetLeft + 'px',\n            height: visualViewport.height + 'px',\n            width: visualViewport.width + 'px'\n          });\n        });\n      });\n    };\n\n    var update = global$3.throttle(function () {\n      refreshScroll();\n      refreshVisualViewport();\n    }, 50);\n\n    var bind = function (element) {\n      editorContainer.set(element);\n      update();\n      resizeBinder.set(bind$3('resize', update));\n      scrollBinder.set(bind$3('scroll', update));\n    };\n\n    var unbind = function () {\n      editorContainer.on(function () {\n        resizeBinder.clear();\n        scrollBinder.clear();\n      });\n      editorContainer.clear();\n    };\n\n    return {\n      bind: bind,\n      unbind: unbind\n    };\n  });\n\n  var toggleFullscreen = function (editor, fullscreenState) {\n    var body = document.body;\n    var documentElement = document.documentElement;\n    var editorContainer = editor.getContainer();\n    var editorContainerS = SugarElement.fromDom(editorContainer);\n    var fullscreenRoot = getFullscreenRoot(editor);\n    var fullscreenInfo = fullscreenState.get();\n    var editorBody = SugarElement.fromDom(editor.getBody());\n    var isTouch = global$2.deviceType.isTouch();\n    var editorContainerStyle = editorContainer.style;\n    var iframe = editor.iframeElement;\n    var iframeStyle = iframe.style;\n\n    var handleClasses = function (handler) {\n      handler(body, 'tox-fullscreen');\n      handler(documentElement, 'tox-fullscreen');\n      handler(editorContainer, 'tox-fullscreen');\n      getShadowRoot(editorContainerS).map(function (root) {\n        return getShadowHost(root).dom;\n      }).each(function (host) {\n        handler(host, 'tox-fullscreen');\n        handler(host, 'tox-shadowhost');\n      });\n    };\n\n    var cleanup = function () {\n      if (isTouch) {\n        restoreStyles(editor.dom);\n      }\n\n      handleClasses(DOM.removeClass);\n      viewportUpdate.unbind();\n      Optional.from(fullscreenState.get()).each(function (info) {\n        return info.fullscreenChangeHandler.unbind();\n      });\n    };\n\n    if (!fullscreenInfo) {\n      var fullscreenChangeHandler = bind$2(owner(fullscreenRoot), getFullscreenchangeEventName(), function (_evt) {\n        if (getFullscreenNative(editor)) {\n          if (!isFullscreenElement(fullscreenRoot) && fullscreenState.get() !== null) {\n            toggleFullscreen(editor, fullscreenState);\n          }\n        }\n      });\n      var newFullScreenInfo = {\n        scrollPos: getScrollPos(),\n        containerWidth: editorContainerStyle.width,\n        containerHeight: editorContainerStyle.height,\n        containerTop: editorContainerStyle.top,\n        containerLeft: editorContainerStyle.left,\n        iframeWidth: iframeStyle.width,\n        iframeHeight: iframeStyle.height,\n        fullscreenChangeHandler: fullscreenChangeHandler\n      };\n\n      if (isTouch) {\n        clobberStyles(editor.dom, editorContainerS, editorBody);\n      }\n\n      iframeStyle.width = iframeStyle.height = '100%';\n      editorContainerStyle.width = editorContainerStyle.height = '';\n      handleClasses(DOM.addClass);\n      viewportUpdate.bind(editorContainerS);\n      editor.on('remove', cleanup);\n      fullscreenState.set(newFullScreenInfo);\n\n      if (getFullscreenNative(editor)) {\n        requestFullscreen(fullscreenRoot);\n      }\n\n      fireFullscreenStateChanged(editor, true);\n    } else {\n      fullscreenInfo.fullscreenChangeHandler.unbind();\n\n      if (getFullscreenNative(editor) && isFullscreenElement(fullscreenRoot)) {\n        exitFullscreen(owner(fullscreenRoot));\n      }\n\n      iframeStyle.width = fullscreenInfo.iframeWidth;\n      iframeStyle.height = fullscreenInfo.iframeHeight;\n      editorContainerStyle.width = fullscreenInfo.containerWidth;\n      editorContainerStyle.height = fullscreenInfo.containerHeight;\n      editorContainerStyle.top = fullscreenInfo.containerTop;\n      editorContainerStyle.left = fullscreenInfo.containerLeft;\n      setScrollPos(fullscreenInfo.scrollPos);\n      fullscreenState.set(null);\n      fireFullscreenStateChanged(editor, false);\n      cleanup();\n      editor.off('remove', cleanup);\n    }\n  };\n\n  var register = function (editor, fullscreenState) {\n    editor.addCommand('mceFullScreen', function () {\n      toggleFullscreen(editor, fullscreenState);\n    });\n  };\n\n  var makeSetupHandler = function (editor, fullscreenState) {\n    return function (api) {\n      api.setActive(fullscreenState.get() !== null);\n\n      var editorEventCallback = function (e) {\n        return api.setActive(e.state);\n      };\n\n      editor.on('FullscreenStateChanged', editorEventCallback);\n      return function () {\n        return editor.off('FullscreenStateChanged', editorEventCallback);\n      };\n    };\n  };\n\n  var register$1 = function (editor, fullscreenState) {\n    editor.ui.registry.addToggleMenuItem('fullscreen', {\n      text: 'Fullscreen',\n      icon: 'fullscreen',\n      shortcut: 'Meta+Shift+F',\n      onAction: function () {\n        return editor.execCommand('mceFullScreen');\n      },\n      onSetup: makeSetupHandler(editor, fullscreenState)\n    });\n    editor.ui.registry.addToggleButton('fullscreen', {\n      tooltip: 'Fullscreen',\n      icon: 'fullscreen',\n      onAction: function () {\n        return editor.execCommand('mceFullScreen');\n      },\n      onSetup: makeSetupHandler(editor, fullscreenState)\n    });\n  };\n\n  function Plugin() {\n    global.add('fullscreen', function (editor) {\n      var fullscreenState = Cell(null);\n\n      if (editor.inline) {\n        return get(fullscreenState);\n      }\n\n      register(editor, fullscreenState);\n      register$1(editor, fullscreenState);\n      editor.addShortcut('Meta+Shift+F', '', 'mceFullScreen');\n      return get(fullscreenState);\n    });\n  }\n\n  Plugin();\n})();","map":{"version":3,"sources":["/home/lin/phase5/My-Place-Frontend/my-place/node_modules/tinymce/plugins/fullscreen/plugin.js"],"names":["Cell","initial","value","get","set","v","global","tinymce","util","Tools","resolve","fullscreenState","isFullscreen","typeOf","x","t","Array","prototype","isPrototypeOf","constructor","name","String","isType","type","isSimpleType","isString","isArray","isBoolean","isNullable","a","undefined","isNonNullable","isFunction","isNumber","noop","compose","fa","fb","args","_i","arguments","length","apply","compose1","fbc","fab","constant","curry","fn","initialArgs","restArgs","all","concat","never","always","none","NONE","eq","o","isNone","call","thunk","id","n","me","fold","_s","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","some","constant_a","self","f","s","elementEq","b","from","Optional","revocable","doRevoke","subject","revoke","clear","isSet","unbindable","unbind","on","nativePush","push","xs","len","r","i","pred","flatten","get$1","head","keys","Object","each$1","obj","props","k","isSupported","dom","style","getPropertyValue","fromHtml","html","scope","doc","document","div","createElement","innerHTML","hasChildNodes","childNodes","console","error","fromDom","fromTag","tag","node","fromText","text","createTextNode","fromPoint","docElm","y","elementFromPoint","SugarElement","Global","window","Function","DOCUMENT","DOCUMENT_FRAGMENT","ELEMENT","TEXT","element","nodeType","isType$1","isElement","isText","isDocument","isDocumentFragment","selector","elem","matches","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","base","querySelectorAll","e1","e2","owner","ownerDocument","documentOrOwner","dos","parent","parentNode","parents","isRoot","stop","ret","rawParent","p","siblings","filterSelf","elements","children","isShadowRoot","host","supported","Element","attachShadow","Node","getRootNode","isSupported$1","e","getShadowRoot","getShadowHost","getOriginalEventTarget","event","target","el","isOpenShadowHost","composed","composedPath","shadowRoot","inBody","body","contains","getBody","rawSet","key","setAttribute","get$2","getAttribute","remove","removeAttribute","internalSet","property","setProperty","setAll","css","get$3","styles","getComputedStyle","getUnsafeProperty","mkEvent","prevent","kill","raw","fromRawEvent","rawEvent","stopPropagation","preventDefault","clientX","clientY","handle","handler","binder","useCapture","wrapped","addEventListener","bind$1","removeEventListener","filter$1","bind$2","left","top","translate","SugarPosition","get$4","_DOC","scrollLeft","documentElement","scrollTop","get$5","_win","win","bounds","width","height","right","bottom","getBounds","scroll","clientWidth","clientHeight","visualViewport","Math","max","pageLeft","pageTop","bind$3","callback","global$1","global$2","global$3","fireFullscreenStateChanged","editor","state","fire","getFullscreenNative","getParam","getFullscreenRoot","getElement","getFullscreenElement","root","fullscreenElement","msFullscreenElement","webkitFullscreenElement","getFullscreenchangeEventName","requestFullscreen","sugarElem","msRequestFullscreen","webkitRequestFullScreen","exitFullscreen","sugarDoc","msExitFullscreen","webkitCancelFullScreen","isFullscreenElement","ancestors","predicate","siblings$1","all$1","ancestors$1","siblings$2","attr","siblingStyles","ancestorPosition","ancestorStyles","bgFallback","isAndroid","os","matchColor","editorBody","color","clobberStyles","container","gatherSiblings","clobber","clobberStyle","backup","trim","parseStyle","bgColor","containerStyles","restoreStyles","clobberedEls","restore","DOM","getScrollPos","vp","setScrollPos","pos","scrollTo","viewportUpdate","editorContainer","resizeBinder","scrollBinder","refreshScroll","refreshVisualViewport","requestAnimationFrame","offsetTop","offsetLeft","update","throttle","toggleFullscreen","getContainer","editorContainerS","fullscreenRoot","fullscreenInfo","isTouch","deviceType","editorContainerStyle","iframe","iframeElement","iframeStyle","handleClasses","cleanup","removeClass","info","fullscreenChangeHandler","_evt","newFullScreenInfo","scrollPos","containerWidth","containerHeight","containerTop","containerLeft","iframeWidth","iframeHeight","addClass","off","register","addCommand","makeSetupHandler","api","setActive","editorEventCallback","register$1","ui","registry","addToggleMenuItem","icon","shortcut","onAction","execCommand","onSetup","addToggleButton","tooltip","Plugin","add","inline","addShortcut"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.8.2 (2021-06-23)\n */\n(function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var get = function (fullscreenState) {\n      return {\n        isFullscreen: function () {\n          return fullscreenState.get() !== null;\n        }\n      };\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isSimpleType('boolean');\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var revocable = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        set: set\n      };\n    };\n    var unbindable = function () {\n      return revocable(function (s) {\n        return s.unbind();\n      });\n    };\n    var value = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var nativePush = Array.prototype.push;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var get$1 = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get$1(xs, 0);\n    };\n\n    var keys = Object.keys;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n    var isDocument = isType$1(DOCUMENT);\n    var isDocumentFragment = isType$1(DOCUMENT_FRAGMENT);\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n\n    var owner = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var siblings = function (element) {\n      var filterSelf = function (elements) {\n        return filter(elements, function (x) {\n          return !eq(element, x);\n        });\n      };\n      return parent(element).map(children).map(filterSelf).getOr([]);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos) && isNonNullable(dos.dom.host);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported$1 = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported$1() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var get$2 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var remove = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$3 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var filter$1 = always;\n    var bind$2 = function (element, event, handler) {\n      return bind$1(element, event, filter$1, handler);\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var get$4 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n\n    var get$5 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      return Optional.from(win['visualViewport']);\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$4(SugarElement.fromDom(doc));\n      return get$5(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n    var bind$3 = function (name, callback, _win) {\n      return get$5(_win).map(function (visualViewport) {\n        var handler = function (e) {\n          return callback(fromRawEvent(e));\n        };\n        visualViewport.addEventListener(name, handler);\n        return {\n          unbind: function () {\n            return visualViewport.removeEventListener(name, handler);\n          }\n        };\n      }).getOrThunk(function () {\n        return { unbind: noop };\n      });\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var fireFullscreenStateChanged = function (editor, state) {\n      editor.fire('FullscreenStateChanged', { state: state });\n    };\n\n    var getFullscreenNative = function (editor) {\n      return editor.getParam('fullscreen_native', false, 'boolean');\n    };\n\n    var getFullscreenRoot = function (editor) {\n      var elem = SugarElement.fromDom(editor.getElement());\n      return getShadowRoot(elem).map(getShadowHost).getOrThunk(function () {\n        return getBody(owner(elem));\n      });\n    };\n    var getFullscreenElement = function (root) {\n      if (root.fullscreenElement !== undefined) {\n        return root.fullscreenElement;\n      } else if (root.msFullscreenElement !== undefined) {\n        return root.msFullscreenElement;\n      } else if (root.webkitFullscreenElement !== undefined) {\n        return root.webkitFullscreenElement;\n      } else {\n        return null;\n      }\n    };\n    var getFullscreenchangeEventName = function () {\n      if (document.fullscreenElement !== undefined) {\n        return 'fullscreenchange';\n      } else if (document.msFullscreenElement !== undefined) {\n        return 'MSFullscreenChange';\n      } else if (document.webkitFullscreenElement !== undefined) {\n        return 'webkitfullscreenchange';\n      } else {\n        return 'fullscreenchange';\n      }\n    };\n    var requestFullscreen = function (sugarElem) {\n      var elem = sugarElem.dom;\n      if (elem.requestFullscreen) {\n        elem.requestFullscreen();\n      } else if (elem.msRequestFullscreen) {\n        elem.msRequestFullscreen();\n      } else if (elem.webkitRequestFullScreen) {\n        elem.webkitRequestFullScreen();\n      }\n    };\n    var exitFullscreen = function (sugarDoc) {\n      var doc = sugarDoc.dom;\n      if (doc.exitFullscreen) {\n        doc.exitFullscreen();\n      } else if (doc.msExitFullscreen) {\n        doc.msExitFullscreen();\n      } else if (doc.webkitCancelFullScreen) {\n        doc.webkitCancelFullScreen();\n      }\n    };\n    var isFullscreenElement = function (elem) {\n      return elem.dom === getFullscreenElement(owner(elem).dom);\n    };\n\n    var ancestors = function (scope, predicate, isRoot) {\n      return filter(parents(scope, isRoot), predicate);\n    };\n    var siblings$1 = function (scope, predicate) {\n      return filter(siblings(scope), predicate);\n    };\n\n    var all$1 = function (selector) {\n      return all(selector);\n    };\n    var ancestors$1 = function (scope, selector, isRoot) {\n      return ancestors(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var siblings$2 = function (scope, selector) {\n      return siblings$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n\n    var attr = 'data-ephox-mobile-fullscreen-style';\n    var siblingStyles = 'display:none!important;';\n    var ancestorPosition = 'position:absolute!important;';\n    var ancestorStyles = 'top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;';\n    var bgFallback = 'background-color:rgb(255,255,255)!important;';\n    var isAndroid = global$2.os.isAndroid();\n    var matchColor = function (editorBody) {\n      var color = get$3(editorBody, 'background-color');\n      return color !== undefined && color !== '' ? 'background-color:' + color + '!important' : bgFallback;\n    };\n    var clobberStyles = function (dom, container, editorBody) {\n      var gatherSiblings = function (element) {\n        return siblings$2(element, '*:not(.tox-silver-sink)');\n      };\n      var clobber = function (clobberStyle) {\n        return function (element) {\n          var styles = get$2(element, 'style');\n          var backup = styles === undefined ? 'no-styles' : styles.trim();\n          if (backup === clobberStyle) {\n            return;\n          } else {\n            set(element, attr, backup);\n            setAll(element, dom.parseStyle(clobberStyle));\n          }\n        };\n      };\n      var ancestors = ancestors$1(container, '*');\n      var siblings = bind(ancestors, gatherSiblings);\n      var bgColor = matchColor(editorBody);\n      each(siblings, clobber(siblingStyles));\n      each(ancestors, clobber(ancestorPosition + ancestorStyles + bgColor));\n      var containerStyles = isAndroid === true ? '' : ancestorPosition;\n      clobber(containerStyles + ancestorStyles + bgColor)(container);\n    };\n    var restoreStyles = function (dom) {\n      var clobberedEls = all$1('[' + attr + ']');\n      each(clobberedEls, function (element) {\n        var restore = get$2(element, attr);\n        if (restore !== 'no-styles') {\n          setAll(element, dom.parseStyle(restore));\n        } else {\n          remove(element, 'style');\n        }\n        remove(element, attr);\n      });\n    };\n\n    var DOM = global$1.DOM;\n    var getScrollPos = function () {\n      var vp = getBounds(window);\n      return {\n        x: vp.x,\n        y: vp.y\n      };\n    };\n    var setScrollPos = function (pos) {\n      window.scrollTo(pos.x, pos.y);\n    };\n    var viewportUpdate = get$5().fold(function () {\n      return {\n        bind: noop,\n        unbind: noop\n      };\n    }, function (visualViewport) {\n      var editorContainer = value();\n      var resizeBinder = unbindable();\n      var scrollBinder = unbindable();\n      var refreshScroll = function () {\n        document.body.scrollTop = 0;\n        document.documentElement.scrollTop = 0;\n      };\n      var refreshVisualViewport = function () {\n        window.requestAnimationFrame(function () {\n          editorContainer.on(function (container) {\n            return setAll(container, {\n              top: visualViewport.offsetTop + 'px',\n              left: visualViewport.offsetLeft + 'px',\n              height: visualViewport.height + 'px',\n              width: visualViewport.width + 'px'\n            });\n          });\n        });\n      };\n      var update = global$3.throttle(function () {\n        refreshScroll();\n        refreshVisualViewport();\n      }, 50);\n      var bind = function (element) {\n        editorContainer.set(element);\n        update();\n        resizeBinder.set(bind$3('resize', update));\n        scrollBinder.set(bind$3('scroll', update));\n      };\n      var unbind = function () {\n        editorContainer.on(function () {\n          resizeBinder.clear();\n          scrollBinder.clear();\n        });\n        editorContainer.clear();\n      };\n      return {\n        bind: bind,\n        unbind: unbind\n      };\n    });\n    var toggleFullscreen = function (editor, fullscreenState) {\n      var body = document.body;\n      var documentElement = document.documentElement;\n      var editorContainer = editor.getContainer();\n      var editorContainerS = SugarElement.fromDom(editorContainer);\n      var fullscreenRoot = getFullscreenRoot(editor);\n      var fullscreenInfo = fullscreenState.get();\n      var editorBody = SugarElement.fromDom(editor.getBody());\n      var isTouch = global$2.deviceType.isTouch();\n      var editorContainerStyle = editorContainer.style;\n      var iframe = editor.iframeElement;\n      var iframeStyle = iframe.style;\n      var handleClasses = function (handler) {\n        handler(body, 'tox-fullscreen');\n        handler(documentElement, 'tox-fullscreen');\n        handler(editorContainer, 'tox-fullscreen');\n        getShadowRoot(editorContainerS).map(function (root) {\n          return getShadowHost(root).dom;\n        }).each(function (host) {\n          handler(host, 'tox-fullscreen');\n          handler(host, 'tox-shadowhost');\n        });\n      };\n      var cleanup = function () {\n        if (isTouch) {\n          restoreStyles(editor.dom);\n        }\n        handleClasses(DOM.removeClass);\n        viewportUpdate.unbind();\n        Optional.from(fullscreenState.get()).each(function (info) {\n          return info.fullscreenChangeHandler.unbind();\n        });\n      };\n      if (!fullscreenInfo) {\n        var fullscreenChangeHandler = bind$2(owner(fullscreenRoot), getFullscreenchangeEventName(), function (_evt) {\n          if (getFullscreenNative(editor)) {\n            if (!isFullscreenElement(fullscreenRoot) && fullscreenState.get() !== null) {\n              toggleFullscreen(editor, fullscreenState);\n            }\n          }\n        });\n        var newFullScreenInfo = {\n          scrollPos: getScrollPos(),\n          containerWidth: editorContainerStyle.width,\n          containerHeight: editorContainerStyle.height,\n          containerTop: editorContainerStyle.top,\n          containerLeft: editorContainerStyle.left,\n          iframeWidth: iframeStyle.width,\n          iframeHeight: iframeStyle.height,\n          fullscreenChangeHandler: fullscreenChangeHandler\n        };\n        if (isTouch) {\n          clobberStyles(editor.dom, editorContainerS, editorBody);\n        }\n        iframeStyle.width = iframeStyle.height = '100%';\n        editorContainerStyle.width = editorContainerStyle.height = '';\n        handleClasses(DOM.addClass);\n        viewportUpdate.bind(editorContainerS);\n        editor.on('remove', cleanup);\n        fullscreenState.set(newFullScreenInfo);\n        if (getFullscreenNative(editor)) {\n          requestFullscreen(fullscreenRoot);\n        }\n        fireFullscreenStateChanged(editor, true);\n      } else {\n        fullscreenInfo.fullscreenChangeHandler.unbind();\n        if (getFullscreenNative(editor) && isFullscreenElement(fullscreenRoot)) {\n          exitFullscreen(owner(fullscreenRoot));\n        }\n        iframeStyle.width = fullscreenInfo.iframeWidth;\n        iframeStyle.height = fullscreenInfo.iframeHeight;\n        editorContainerStyle.width = fullscreenInfo.containerWidth;\n        editorContainerStyle.height = fullscreenInfo.containerHeight;\n        editorContainerStyle.top = fullscreenInfo.containerTop;\n        editorContainerStyle.left = fullscreenInfo.containerLeft;\n        setScrollPos(fullscreenInfo.scrollPos);\n        fullscreenState.set(null);\n        fireFullscreenStateChanged(editor, false);\n        cleanup();\n        editor.off('remove', cleanup);\n      }\n    };\n\n    var register = function (editor, fullscreenState) {\n      editor.addCommand('mceFullScreen', function () {\n        toggleFullscreen(editor, fullscreenState);\n      });\n    };\n\n    var makeSetupHandler = function (editor, fullscreenState) {\n      return function (api) {\n        api.setActive(fullscreenState.get() !== null);\n        var editorEventCallback = function (e) {\n          return api.setActive(e.state);\n        };\n        editor.on('FullscreenStateChanged', editorEventCallback);\n        return function () {\n          return editor.off('FullscreenStateChanged', editorEventCallback);\n        };\n      };\n    };\n    var register$1 = function (editor, fullscreenState) {\n      editor.ui.registry.addToggleMenuItem('fullscreen', {\n        text: 'Fullscreen',\n        icon: 'fullscreen',\n        shortcut: 'Meta+Shift+F',\n        onAction: function () {\n          return editor.execCommand('mceFullScreen');\n        },\n        onSetup: makeSetupHandler(editor, fullscreenState)\n      });\n      editor.ui.registry.addToggleButton('fullscreen', {\n        tooltip: 'Fullscreen',\n        icon: 'fullscreen',\n        onAction: function () {\n          return editor.execCommand('mceFullScreen');\n        },\n        onSetup: makeSetupHandler(editor, fullscreenState)\n      });\n    };\n\n    function Plugin () {\n      global.add('fullscreen', function (editor) {\n        var fullscreenState = Cell(null);\n        if (editor.inline) {\n          return get(fullscreenState);\n        }\n        register(editor, fullscreenState);\n        register$1(editor, fullscreenState);\n        editor.addShortcut('Meta+Shift+F', '', 'mceFullScreen');\n        return get(fullscreenState);\n      });\n    }\n\n    Plugin();\n\n}());\n"]},"metadata":{},"sourceType":"script"}