{"ast":null,"code":"var _jsxFileName = \"/home/lin/phase5/My-Place-Frontend/my-place/src/Component/test.js\";\nimport { Card, Upload, Modal, Form, Button } from 'antd';\nimport React, { Component } from \"react\";\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class PicturesWall extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      previewVisible: false,\n      previewImage: '',\n      fileList: [],\n      upFiles: []\n    };\n\n    this.beforeUpload = file => {\n      const {\n        upFiles\n      } = this.state;\n      upFiles.push(file);\n      this.setState({\n        upFiles: upFiles\n      });\n    };\n\n    this.addOk = () => {\n      const {\n        upFiles,\n        id\n      } = this.state;\n      const formData = new FormData();\n      upFiles.forEach(file => {\n        formData.append('file', file);\n      });\n      formData.append('id', id);\n      this.props.dispatch({\n        type: 'upload/upImage',\n        payload: {\n          formData: formData\n        }\n      });\n    };\n  }\n\n  render() {\n    const {\n      previewVisible,\n      previewImage,\n      fileList\n    } = this.state; // const uploadButton = (\n    //   <div>\n    //     <Icon type=\"plus\" />\n    //     <div className=\"ant-upload-text\">Upload</div>\n    //   </div>\n    // )\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: this.addOk(),\n        children: \"\\u786E\\u8BA4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Upload, {\n        accept: \".png,,jpg,.jpeg,.pdf\",\n        listType: \"picture-card\",\n        multiple: true,\n        fileList: fileList,\n        onChange: this.handleChange,\n        onPreview: this.handlePreview,\n        beforeUpload: this.beforeUpload,\n        children: /*#__PURE__*/_jsxDEV(PlusOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        visble: previewVisible,\n        footer: null,\n        onCancel: this.handleCancel(),\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"example\",\n          style: {\n            width: '100%'\n          },\n          src: previewImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this);\n  }\n\n} // function getBase64(file){\n//   return new Promise((resolve, reject) => {\n//     const reader = new FileReader();\n//     reader.readAsDataURL(file);\n//     reader.onload = () => resolve(reader.result);\n//     reader.onerror = error => reject(error);\n//   });\n// }","map":{"version":3,"sources":["/home/lin/phase5/My-Place-Frontend/my-place/src/Component/test.js"],"names":["Card","Upload","Modal","Form","Button","React","Component","LoadingOutlined","PlusOutlined","PicturesWall","constructor","props","state","previewVisible","previewImage","fileList","upFiles","beforeUpload","file","push","setState","addOk","id","formData","FormData","forEach","append","dispatch","type","payload","render","handleChange","handlePreview","handleCancel","width"],"mappings":";AAAA,SAASA,IAAT,EAAeC,MAAf,EAAuBC,KAAvB,EAA8BC,IAA9B,EAAoCC,MAApC,QAAkD,MAAlD;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,eAAT,EAA0BC,YAA1B,QAA8C,mBAA9C;;AAEA,eAAe,MAAMC,YAAN,SAA2BJ,KAAK,CAACC,SAAjC,CAA0C;AACvDI,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;AADgB,SAGlBC,KAHkB,GAGV;AACNC,MAAAA,cAAc,EAAC,KADT;AAENC,MAAAA,YAAY,EAAC,EAFP;AAGNC,MAAAA,QAAQ,EAAC,EAHH;AAINC,MAAAA,OAAO,EAAC;AAJF,KAHU;;AAAA,SA4BlBC,YA5BkB,GA4BFC,IAAD,IAAU;AACvB,YAAM;AAACF,QAAAA;AAAD,UAAY,KAAKJ,KAAvB;AACAI,MAAAA,OAAO,CAACG,IAAR,CAAaD,IAAb;AACA,WAAKE,QAAL,CAAc;AAACJ,QAAAA,OAAO,EAAEA;AAAV,OAAd;AACD,KAhCiB;;AAAA,SAkClBK,KAlCkB,GAkCV,MAAM;AACZ,YAAM;AAACL,QAAAA,OAAD;AAAUM,QAAAA;AAAV,UAAgB,KAAKV,KAA3B;AACA,YAAMW,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAR,MAAAA,OAAO,CAACS,OAAR,CAAiBP,IAAD,IAAU;AACxBK,QAAAA,QAAQ,CAACG,MAAT,CAAgB,MAAhB,EAAwBR,IAAxB;AACD,OAFD;AAGAK,MAAAA,QAAQ,CAACG,MAAT,CAAgB,IAAhB,EAAsBJ,EAAtB;AACA,WAAKX,KAAL,CAAWgB,QAAX,CAAoB;AAClBC,QAAAA,IAAI,EAAE,gBADY;AAElBC,QAAAA,OAAO,EAAE;AAACN,UAAAA,QAAQ,EAAEA;AAAX;AAFS,OAApB;AAID,KA7CiB;AAEjB;;AA6CDO,EAAAA,MAAM,GAAG;AACP,UAAM;AAACjB,MAAAA,cAAD;AAAiBC,MAAAA,YAAjB;AAA+BC,MAAAA;AAA/B,QAA2C,KAAKH,KAAtD,CADO,CAEP;AACA;AACA;AACA;AACA;AACA;;AACA,wBACE;AAAA,8BACE,QAAC,MAAD;AAAQ,QAAA,IAAI,EAAC,SAAb;AAAuB,QAAA,OAAO,EAAE,KAAKS,KAAL,EAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,MAAD;AACE,QAAA,MAAM,EAAC,sBADT;AAEE,QAAA,QAAQ,EAAC,cAFX;AAGE,QAAA,QAAQ,EAAE,IAHZ;AAIE,QAAA,QAAQ,EAAEN,QAJZ;AAKE,QAAA,QAAQ,EAAE,KAAKgB,YALjB;AAME,QAAA,SAAS,EAAE,KAAKC,aANlB;AAOE,QAAA,YAAY,EAAE,KAAKf,YAPrB;AAAA,+BASA,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AATA;AAAA;AAAA;AAAA;AAAA,cAFF,eAaE,QAAC,KAAD;AAAO,QAAA,MAAM,EAAEJ,cAAf;AAA+B,QAAA,MAAM,EAAE,IAAvC;AAA6C,QAAA,QAAQ,EAAE,KAAKoB,YAAL,EAAvD;AAAA,+BACE;AAAK,UAAA,GAAG,EAAC,SAAT;AAAmB,UAAA,KAAK,EAAE;AAACC,YAAAA,KAAK,EAAC;AAAP,WAA1B;AAA0C,UAAA,GAAG,EAAEpB;AAA/C;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAbF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAmBD;;AA3EsD,C,CA8EzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { Card, Upload, Modal, Form, Button } from 'antd'\nimport React, { Component } from \"react\";\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons';\n\nexport default class PicturesWall extends React.Component{\n  constructor(props){\n    super(props);\n  }\n  state = {\n    previewVisible:false,\n    previewImage:'',\n    fileList:[],\n    upFiles:[]\n  };\n  \n  // handleCancel=()=>{\n  //   this.setState({previewVisible:false});\n  // }\n  \n  // handlePreview = async file =>{\n  //   if(!file.url && !file.preview){\n  //     file.preview = await getBase64(file.originFileObj);\n  //   }\n  //   this.setState({\n  //     previewImage: file.url || file.preview,\n  //     previewVisible: true\n  //   });\n  // }\n  \n  // handleChange = (info) => {\n  //   this.setState({fileList: info.fileList});\n  // }\n  \n  beforeUpload = (file) => {\n    const {upFiles} = this.state;\n    upFiles.push(file);\n    this.setState({upFiles: upFiles});\n  }\n  \n  addOk = () => {\n    const {upFiles, id} = this.state;\n    const formData = new FormData();\n    upFiles.forEach((file) => {\n      formData.append('file', file);\n    });\n    formData.append('id', id);\n    this.props.dispatch({\n      type: 'upload/upImage',\n      payload: {formData: formData}\n    })\n  }\n  \n  render() {\n    const {previewVisible, previewImage, fileList} = this.state;\n    // const uploadButton = (\n    //   <div>\n    //     <Icon type=\"plus\" />\n    //     <div className=\"ant-upload-text\">Upload</div>\n    //   </div>\n    // )\n    return (\n      <div>\n        <Button type=\"primary\" onClick={this.addOk()}>чбошод</Button>\n        <Upload\n          accept=\".png,,jpg,.jpeg,.pdf\"\n          listType=\"picture-card\"\n          multiple={true}\n          fileList={fileList}\n          onChange={this.handleChange}\n          onPreview={this.handlePreview}\n          beforeUpload={this.beforeUpload}\n        >\n        <PlusOutlined />\n        </Upload>\n        <Modal visble={previewVisible} footer={null} onCancel={this.handleCancel()}>\n          <img alt=\"example\" style={{width:'100%'}} src={previewImage}/>\n        </Modal>\n      </div>\n    )\n  }\n}\n\n// function getBase64(file){\n//   return new Promise((resolve, reject) => {\n//     const reader = new FileReader();\n//     reader.readAsDataURL(file);\n//     reader.onload = () => resolve(reader.result);\n//     reader.onerror = error => reject(error);\n//   });\n// }\n"]},"metadata":{},"sourceType":"module"}