{"ast":null,"code":"var _jsxFileName = \"/home/lin/phase5/My-Place-Frontend/my-place/src/Component/Music.js\";\nimport React, { Component } from \"react\";\nimport { Upload, Input, Drawer } from 'antd';\nimport { CloseOutlined } from '@ant-design/icons';\nimport _ from \"lodash\";\nimport \"../static/style.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst musicList = [{\n  id: \"1\",\n  title: \"Mariage d'amour \",\n  info: \"Paul de Senneville \",\n  resource: \"http://m7.music.126.net/20210708034809/6c94250fbe265d93b04f11dab52132cf/ymusic/obj/w5zDlMODwrDDiGjCn8Ky/3463824034/c986/8c67/7d20/648bf98985577cfa9b6c89ed8ebcdd0f.mp3\",\n  time: \"5:00\",\n  img: \"http://singerimg.kugou.com/uploadpic/softhead/400/20160913/20160913140233132.jpg\"\n}, {\n  id: \"2\",\n  title: \"Kiss The Rain \",\n  info: \"Yiruma\",\n  resource: \"https://sharefs.ali.kugou.com/202107080001/570d32e1e386eacd9a133fa2e4d56f12/G203/M07/0B/0F/a4cBAF5d-ziAQNadAEnQf8bIoLs857.mp3\",\n  time: \"04:50\",\n  img: \"http://singerimg.kugou.com/uploadpic/softhead/400/20160913/20160913140233132.jpg\"\n}, {\n  id: \"3\",\n  title: \"My Soul\",\n  info: \"July\",\n  resource: \"https://sharefs.ali.kugou.com/202107080002/c0dffd58af5ed3012eceeb2152717ab4/G096/M08/01/09/oA0DAFkb-fqAKdpbADgXpJHizC0506.mp3\",\n  time: \"04:50\",\n  img: \"http://singerimg.kugou.com/uploadpic/softhead/400/20160913/20160913140233132.jpg\"\n}];\nconst props = {\n  action: 'http://localhost:3000/musicpreview'\n};\nexport default class Music extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isPause: false,\n      musicList: musicList || [],\n      currentMusic: musicList ? musicList[0] : {},\n      totalTime: \"00:00\",\n      currentTime: \"00:00\",\n      processItemMove: false,\n      volumeProcessItemMove: false,\n      volumeControl: false,\n      playMode: 1,\n      isMusicListShow: false,\n      addMusic: false,\n      fileList: [],\n      upFiles: []\n    };\n\n    this.getTime = time => {\n      if (time) {\n        const minute = parseInt(time / 60 % 60);\n        const second = parseInt(time % 60);\n        let minuteText = `${minute}`;\n        let secondText = `${second}`;\n\n        if (minute < 10) {\n          minuteText = `0${minute}`;\n        }\n\n        if (second < 10) {\n          secondText = `0${second}`;\n        }\n\n        return `${minuteText}:${secondText}`;\n      } else {\n        return \"00:00\";\n      }\n    };\n\n    this.onPlay = () => {\n      const audio = this.audio;\n      this.setState({\n        isPause: true\n      });\n      audio.play();\n    };\n\n    this.onPause = () => {\n      const audio = this.audio;\n      this.setState({\n        isPause: false\n      });\n      audio.pause();\n    };\n\n    this.onProcessClick = e => {\n      this.setProcess(e, \"click\");\n    };\n\n    this.setProcess = (e, key) => {\n      let offsetWidth = e.pageX - this.processPlayed.getBoundingClientRect().left;\n\n      if (offsetWidth < 0) {\n        offsetWidth = 0;\n      }\n\n      if (offsetWidth > this.process.offsetWidth) {\n        offsetWidth = this.process.offsetWidth;\n      }\n\n      const offsetPercentage = offsetWidth / this.process.offsetWidth;\n      const currentTime = this.audio.duration * offsetPercentage;\n\n      if (key == \"click\" || key == \"dragMove\") {\n        this.processPlayed.style.width = `${offsetWidth}px`;\n        this.processItem.style.left = `${offsetWidth - 4}px`;\n        this.setState({\n          currentTime: this.getTime(currentTime)\n        });\n      }\n\n      if (key == \"dragEnd\" || key == \"click\") {\n        this.audio.currentTime = currentTime;\n      }\n    };\n\n    this.onProcessItemMouseDown = e => {\n      e.stopPropagation();\n      this.setState({\n        processItemMove: true\n      });\n    };\n\n    this.onProcessItemMouseMove = e => {\n      e.stopPropagation();\n      const {\n        processItemMove\n      } = this.state;\n\n      if (processItemMove) {\n        this.setProcess(e, \"dragMove\");\n      }\n    };\n\n    this.onProcessItemMouseUp = e => {\n      const {\n        processItemMove\n      } = this.state;\n      e.stopPropagation();\n\n      if (processItemMove) {\n        this.setState({\n          processItemMove: false\n        });\n        this.setProcess(e, \"dragEnd\");\n      }\n    };\n\n    this.endedPlayMusic = () => {\n      const {\n        playMode,\n        currentMusic\n      } = this.state;\n      const {\n        musicList\n      } = this.state;\n\n      if (musicList.length > 0 && currentMusic) {\n        const currentIndex = musicList.findIndex(item => {\n          return item.id === currentMusic.id;\n        });\n\n        if (playMode === 1) {\n          if (musicList[currentIndex + 1]) {\n            this.setState({\n              currentMusic: musicList[currentIndex + 1]\n            }, () => {\n              this.onSwitchAction();\n            });\n          } else {\n            this.setState({\n              currentMusic: musicList[0]\n            }, () => {\n              this.onSwitchAction();\n            });\n          }\n        } else if (playMode === 2) {\n          const randomIndex = Math.floor(Math.random() * 3 + 1);\n\n          if (musicList[randomIndex + 1]) {\n            this.setState({\n              currentMusic: musicList[randomIndex + 1]\n            }, () => {\n              this.onSwitchAction();\n            });\n          } else {\n            this.setState({\n              currentMusic: musicList[0]\n            }, () => {\n              this.onSwitchAction();\n            });\n          }\n        } else if (playMode === 3) {\n          this.onSwitchAction();\n        }\n      } else {\n        this.onSwitchAction();\n      }\n    };\n\n    this.nextMusic = () => {\n      const {\n        currentMusic\n      } = this.state;\n      const {\n        musicList\n      } = this.state;\n\n      if (musicList.length > 1 && currentMusic) {\n        const currentIndex = musicList.findIndex(item => {\n          return item.id === currentMusic.id;\n        });\n\n        if (musicList[currentIndex + 1]) {\n          this.setState({\n            currentMusic: musicList[currentIndex + 1]\n          }, () => {\n            this.onSwitchAction();\n          });\n        } else {\n          this.setState({\n            currentMusic: musicList[0]\n          }, () => {\n            this.onSwitchAction();\n          });\n        }\n      } else {\n        this.audio.currentTime = 0;\n        this.onSwitchAction();\n      }\n    };\n\n    this.previousMusic = () => {\n      const {\n        currentMusic\n      } = this.state;\n      const {\n        musicList\n      } = this.state;\n\n      if (musicList.length > 1 && currentMusic) {\n        const currentIndex = musicList.findIndex(item => {\n          return item.id === currentMusic.id;\n        });\n\n        if (musicList[currentIndex - 1]) {\n          this.setState({\n            currentMusic: musicList[currentIndex - 1]\n          }, () => {\n            this.onSwitchAction();\n          });\n        } else {\n          this.setState({\n            currentMusic: musicList[musicList.length - 1]\n          }, () => {\n            this.onSwitchAction();\n          });\n        }\n      } else {\n        this.audio.currentTime = 0;\n        this.onSwitchAction();\n      }\n    };\n\n    this.onSwitchAction = () => {\n      const {\n        isPause\n      } = this.state;\n      this.resetProcess();\n\n      if (isPause) {\n        this.onPlay();\n      }\n    };\n\n    this.resetProcess = () => {\n      this.processPlayed.style.width = \"0px\";\n      this.processItem.style.left = \"-4px\";\n    };\n\n    this.onVolumeControl = () => {\n      const {\n        volumeControl\n      } = this.state;\n      this.setState({\n        volumeControl: !volumeControl\n      });\n    };\n\n    this.onVolumeControlHide = () => {\n      const {\n        volumeControl\n      } = this.state;\n\n      if (volumeControl) {\n        this.setState({\n          volumeControl: false\n        });\n      }\n    };\n\n    this.initVolumeProcess = () => {\n      const processLength = this.volumeProcess.offsetHeight;\n      this.volumeProcessCurrent.style.height = `${processLength / 2}px`;\n      this.volumeProcessItem.style.bottom = `${processLength / 2 - 6}px`;\n      this.audio.volume = 0.5;\n    };\n\n    this.onVolumeProcessSet = e => {\n      const processLength = this.volumeProcess.offsetHeight;\n      let volumeOffsetHeight = processLength - (e.pageY - this.volumeProcess.getBoundingClientRect().top);\n      let volumepercentage = 0;\n\n      if (volumeOffsetHeight < 0) {\n        volumeOffsetHeight = 0;\n      }\n\n      if (volumeOffsetHeight > processLength) {\n        volumeOffsetHeight = processLength;\n      }\n\n      volumepercentage = volumeOffsetHeight / processLength;\n      this.volumeProcessCurrent.style.height = `${volumeOffsetHeight}px`;\n      this.volumeProcessItem.style.bottom = `${volumeOffsetHeight - 6}px`;\n      this.audio.volume = volumepercentage;\n    };\n\n    this.onVolumeProcessItemMouseDown = () => {\n      this.setState({\n        volumeProcessItemMove: true\n      });\n    };\n\n    this.onVolumeProcessItemMouseUp = e => {\n      const {\n        volumeProcessItemMove\n      } = this.state;\n\n      if (volumeProcessItemMove) {\n        this.setState({\n          volumeProcessItemMove: false\n        });\n      }\n    };\n\n    this.onVolumeProcessItemMove = e => {\n      const {\n        volumeProcessItemMove\n      } = this.state;\n\n      if (volumeProcessItemMove) {\n        this.onVolumeProcessSet(e);\n      }\n    };\n\n    this.onPlayModeChange = () => {\n      const {\n        playMode\n      } = this.state;\n\n      if (playMode === 3) {\n        this.setState({\n          playMode: 1\n        });\n      } else {\n        this.setState({\n          playMode: playMode + 1\n        });\n      }\n    };\n\n    this.addPlayList = () => {\n      this.setState({\n        addMusic: !this.state.addMusic\n      });\n    };\n\n    this.beforeUpload = file => {\n      const {\n        upFiles\n      } = this.state;\n      upFiles.push(file);\n      this.setState({\n        upFiles: upFiles\n      });\n    };\n\n    this.onMusicList = () => {\n      const {\n        isMusicListShow\n      } = this.state;\n      this.setState({\n        isMusicListShow: !isMusicListShow\n      });\n    };\n\n    this.onDeleteMusic = (e, item) => {\n      e.stopPropagation();\n      const {\n        onDeleteMusic\n      } = this.props;\n\n      if (onDeleteMusic) {\n        onDeleteMusic(item.id);\n      }\n    };\n\n    this.onDeleteAllMusic = () => {\n      const {\n        onDeleteAllMusic\n      } = this.props;\n\n      if (onDeleteAllMusic) {\n        onDeleteAllMusic();\n      }\n    };\n\n    this.onMusicListItemClick = id => {\n      const {\n        musicList\n      } = this.state;\n      const {\n        currentMusic\n      } = this.state;\n      const index = musicList.findIndex(item => {\n        return item.id === id;\n      });\n\n      if (index !== -1) {\n        if (currentMusic.id === id) {\n          this.resetProcess();\n          this.audio.currentTime = 0;\n          this.onPlay();\n        } else {\n          this.setState({\n            currentMusic: musicList[index]\n          }, () => {\n            this.resetProcess();\n            this.onPlay();\n          });\n        }\n      }\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevState.currentMusic.id !== this.state.currentMusic.id) {\n      this.resetProcess();\n\n      if (this.state.isPause) {\n        this.onPlay();\n      }\n    }\n  }\n\n  componentDidMount() {\n    const audio = this.audio;\n    audio.addEventListener(\"canplay\", () => {\n      const totalTime = parseInt(audio.duration);\n      this.setState({\n        totalTime: this.getTime(totalTime)\n      });\n    });\n    audio.addEventListener(\"timeupdate\", () => {\n      const {\n        processItemMove\n      } = this.state;\n      const currentTime = parseInt(audio.currentTime);\n      const buffered = audio.buffered;\n      let bufferTime = 0;\n\n      if (buffered.length !== 0) {\n        bufferTime = buffered.end(buffered.length - 1);\n      }\n\n      const bufferWidth = 500 * (bufferTime / audio.duration);\n      const playWidth = 500 * (audio.currentTime / audio.duration);\n\n      if (this.processPlayed || this.processItem.style) {\n        if (!processItemMove) {\n          this.processPlayed.style.width = `${playWidth}px`;\n          this.processItem.style.left = `${playWidth - 4}px`;\n          this.setState({\n            currentTime: this.getTime(currentTime)\n          });\n        }\n      }\n\n      this.processBuffered.style.width = `${bufferWidth}px`;\n    });\n    audio.addEventListener(\"ended\", () => {\n      this.endedPlayMusic();\n    });\n    this.initVolumeProcess();\n  }\n\n  render() {\n    const {\n      currentMusic,\n      isPause,\n      totalTime,\n      currentTime,\n      volumeControl,\n      playMode,\n      isMusicListShow\n    } = this.state;\n    const {\n      title,\n      info,\n      img,\n      resource,\n      id\n    } = currentMusic || {};\n    const {\n      musicList\n    } = this.state;\n    let playModeIcon = \"\";\n\n    switch (playMode) {\n      case 1:\n        playModeIcon = \"icon-circulation-list\";\n        break;\n\n      case 2:\n        playModeIcon = \"icon-circulation-random\";\n        break;\n\n      case 3:\n        playModeIcon = \"icon-circulation-single\";\n        break;\n\n      default:\n        playModeIcon = \"icon-circulation-list\";\n        break;\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mainLayout\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mainContent\",\n        onMouseMove: this.onProcessItemMouseMove,\n        onMouseUp: this.onProcessItemMouseUp,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"playContent\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"left-controler\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-prev prev-next-icon\",\n              onClick: this.previousMusic\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 15\n            }, this), isPause ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-pause playIcon\",\n              onClick: this.onPause\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-play playIcon\",\n              onClick: this.onPlay\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-next prev-next-icon\",\n              onClick: this.nextMusic\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"main-controler\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: img,\n              alt: \"\",\n              className: \"thumbnail\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"music-control\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"music-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"title-info\",\n                  children: title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 461,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"author-info\",\n                  children: info\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"process-time\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"process-wrapper\",\n                  onClick: this.onProcessClick,\n                  ref: ref => this.process = ref,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"process\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"progress-buffered\",\n                      ref: ref => this.processBuffered = ref\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 471,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"progress-played\",\n                      ref: ref => this.processPlayed = ref,\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"process-item\",\n                        ref: ref => this.processItem = ref,\n                        onMouseDown: this.onProcessItemMouseDown,\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"process-item-inside\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 484,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 479,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 475,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 465,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"time\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"current-time\",\n                    children: currentTime\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 490,\n                    columnNumber: 21\n                  }, this), \"/\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"total-time\",\n                    children: totalTime\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 491,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 489,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 464,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"right-folder\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: () => this.addPlayList(),\n              className: \"icon-folder folder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 19\n            }, this), this.state.addMusic ? /*#__PURE__*/_jsxDEV(\"form\", {\n              children: [/*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 31\n              }, this), /*#__PURE__*/_jsxDEV(Upload, { ...props,\n                showUploadList: false,\n                beforeUpload: this.beforeUpload\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 31\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 30\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"right-controler\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"volume-controler\",\n              style: {\n                visibility: volumeControl ? \"visible\" : \"hidden\"\n              },\n              onMouseMove: this.onVolumeProcessItemMove,\n              onMouseUp: this.onVolumeProcessItemMouseUp,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"volume-process\",\n                onClick: this.onVolumeProcessSet,\n                ref: ref => this.volumeProcess = ref,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"volume-current\",\n                  ref: ref => this.volumeProcessCurrent = ref,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"volume-item\",\n                    ref: ref => this.volumeProcessItem = ref,\n                    onMouseDown: this.onVolumeProcessItemMouseDown,\n                    onMouseUp: this.onVolumeProcessItemMouseUp,\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"volume-item-inside\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 529,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 523,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 519,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-volume volume\",\n              onClick: this.onVolumeControl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `${playModeIcon} circulation`,\n              onClick: this.onPlayModeChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 538,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-list list\",\n              onClick: this.onMusicList\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 13\n          }, this), isMusicListShow && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"musicList\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"music-list-head\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"music-list-head-title\",\n                children: [\"Playlist(\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: musicList && musicList.length ? musicList.length : 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 549,\n                  columnNumber: 21\n                }, this), \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 547,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"music-list-head-collect\",\n                onClick: this.onCollect,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"icon-addfile music-list-common-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 554,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"music-list-head-line\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 560,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"music-list-head-clear\",\n                onClick: this.onDeleteAllMusic\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 561,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"music-list-head-name\",\n                children: title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 566,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"music-list-head-close\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"icon-close music-list-common-icon\",\n                  onClick: this.onMusicList\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 568,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 567,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"music-list-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"music-list-body-content\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"music-list-body-ul\",\n                  children: musicList && musicList.length > 0 && musicList.map(item => {\n                    return /*#__PURE__*/_jsxDEV(\"li\", {\n                      className: `music-list-li ${id === item.id && \"music-current\"}`,\n                      onClick: () => this.onMusicListItemClick(item.id),\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-1\",\n                        children: id === item.id && /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"play-triangle-icon icon-currentPlay\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 589,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 587,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-2\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"music-list-li-text\",\n                          children: item.title\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 593,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 592,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-3\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"icon-clear music-list-action-icon\",\n                          onClick: e => this.onDeleteMusic(e, item)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 598,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 597,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"music-list-li-text\",\n                          children: item.info\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 604,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 603,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-5\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"music-list-li-text\",\n                          children: item.time\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 609,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 608,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-6\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"icon-link music-list-action-icon\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 614,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 613,\n                        columnNumber: 31\n                      }, this)]\n                    }, item.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 581,\n                      columnNumber: 29\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 576,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"music-cover\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 621,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n            src: resource,\n            ref: ref => this.audio = ref\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 626,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/lin/phase5/My-Place-Frontend/my-place/src/Component/Music.js"],"names":["React","Component","Upload","Input","Drawer","CloseOutlined","_","musicList","id","title","info","resource","time","img","props","action","Music","state","isPause","currentMusic","totalTime","currentTime","processItemMove","volumeProcessItemMove","volumeControl","playMode","isMusicListShow","addMusic","fileList","upFiles","getTime","minute","parseInt","second","minuteText","secondText","onPlay","audio","setState","play","onPause","pause","onProcessClick","e","setProcess","key","offsetWidth","pageX","processPlayed","getBoundingClientRect","left","process","offsetPercentage","duration","style","width","processItem","onProcessItemMouseDown","stopPropagation","onProcessItemMouseMove","onProcessItemMouseUp","endedPlayMusic","length","currentIndex","findIndex","item","onSwitchAction","randomIndex","Math","floor","random","nextMusic","previousMusic","resetProcess","onVolumeControl","onVolumeControlHide","initVolumeProcess","processLength","volumeProcess","offsetHeight","volumeProcessCurrent","height","volumeProcessItem","bottom","volume","onVolumeProcessSet","volumeOffsetHeight","pageY","top","volumepercentage","onVolumeProcessItemMouseDown","onVolumeProcessItemMouseUp","onVolumeProcessItemMove","onPlayModeChange","addPlayList","beforeUpload","file","push","onMusicList","onDeleteMusic","onDeleteAllMusic","onMusicListItemClick","index","componentDidUpdate","prevProps","prevState","snapshot","componentDidMount","addEventListener","buffered","bufferTime","end","bufferWidth","playWidth","processBuffered","render","playModeIcon","ref","visibility","onCollect","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Upload, Input, Drawer } from 'antd';\nimport {  CloseOutlined } from '@ant-design/icons';\nimport _ from \"lodash\";\nimport \"../static/style.css\";\n\n\nconst musicList = [\n  {\n    id: \"1\",\n    title: \"Mariage d'amour \",\n    info: \"Paul de Senneville \",\n    resource: \"http://m7.music.126.net/20210708034809/6c94250fbe265d93b04f11dab52132cf/ymusic/obj/w5zDlMODwrDDiGjCn8Ky/3463824034/c986/8c67/7d20/648bf98985577cfa9b6c89ed8ebcdd0f.mp3\",\n    time: \"5:00\",\n    img:\n      \"http://singerimg.kugou.com/uploadpic/softhead/400/20160913/20160913140233132.jpg\"\n  },\n  {\n    id: \"2\",\n    title: \"Kiss The Rain \",\n    info: \"Yiruma\",\n    resource: \"https://sharefs.ali.kugou.com/202107080001/570d32e1e386eacd9a133fa2e4d56f12/G203/M07/0B/0F/a4cBAF5d-ziAQNadAEnQf8bIoLs857.mp3\",\n    time: \"04:50\",\n    img:\n      \"http://singerimg.kugou.com/uploadpic/softhead/400/20160913/20160913140233132.jpg\"\n  },\n  {\n    id: \"3\",\n    title: \"My Soul\",\n    info: \"July\",\n    resource: \"https://sharefs.ali.kugou.com/202107080002/c0dffd58af5ed3012eceeb2152717ab4/G096/M08/01/09/oA0DAFkb-fqAKdpbADgXpJHizC0506.mp3\",\n    time: \"04:50\",\n    img:\n      \"http://singerimg.kugou.com/uploadpic/softhead/400/20160913/20160913140233132.jpg\"\n  }]\n\n  const props = {\n    action: 'http://localhost:3000/musicpreview'\n  };\n\n\nexport default class Music extends Component {\n\n    state = {\n      isPause: false,\n      musicList: musicList || [],\n      currentMusic: musicList ? musicList[0] : {},\n      totalTime: \"00:00\",\n      currentTime: \"00:00\",\n      processItemMove: false,\n      volumeProcessItemMove: false,\n      volumeControl: false,\n      playMode: 1,\n      isMusicListShow: false,\n      addMusic: false,\n      fileList: [],\n      upFiles: []\n    };\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevState.currentMusic.id !== this.state.currentMusic.id) {\n      this.resetProcess();\n      if (this.state.isPause) {\n        this.onPlay();\n      }\n    }\n  }\n\n  componentDidMount() {\n    const audio = this.audio;\n    audio.addEventListener(\"canplay\", () => {\n      const totalTime = parseInt(audio.duration);\n      this.setState({\n        totalTime: this.getTime(totalTime)\n      });\n    });\n    audio.addEventListener(\"timeupdate\", () => {\n      const { processItemMove } = this.state;\n      const currentTime = parseInt(audio.currentTime);\n      const buffered = audio.buffered;\n      let bufferTime = 0;\n      if (buffered.length !== 0) {\n        bufferTime = buffered.end(buffered.length - 1);\n      }\n      const bufferWidth = 500 * (bufferTime / audio.duration);\n      const playWidth = 500 * (audio.currentTime / audio.duration);\n      if(this.processPlayed || this.processItem.style){\n        if (!processItemMove) {\n          this.processPlayed.style.width = `${playWidth}px`;\n          this.processItem.style.left = `${playWidth - 4}px`;\n          this.setState({\n            currentTime: this.getTime(currentTime)\n          });\n        }\n    }\n      this.processBuffered.style.width = `${bufferWidth}px`;\n    });\n\n    audio.addEventListener(\"ended\", () => {\n      this.endedPlayMusic();\n    });\n    this.initVolumeProcess();\n  }\n\n  getTime = time => {\n    if (time) {\n      const minute = parseInt((time / 60) % 60);\n      const second = parseInt(time % 60);\n      let minuteText = `${minute}`;\n      let secondText = `${second}`;\n      if (minute < 10) {\n        minuteText = `0${minute}`;\n      }\n      if (second < 10) {\n        secondText = `0${second}`;\n      }\n      return `${minuteText}:${secondText}`;\n    } else {\n      return \"00:00\";\n    }\n  };\n\n  onPlay = () => {\n    const audio = this.audio;\n    this.setState({ isPause: true });\n    audio.play();\n  };\n\n  onPause = () => {\n    const audio = this.audio;\n    this.setState({ isPause: false });\n    audio.pause();\n  };\n\n  onProcessClick = e => {\n    this.setProcess(e, \"click\");\n  };\n\n  setProcess = (e, key) => {\n    let offsetWidth = e.pageX - this.processPlayed.getBoundingClientRect().left;\n    if (offsetWidth < 0) {\n      offsetWidth = 0;\n    }\n    if (offsetWidth > this.process.offsetWidth) {\n      offsetWidth = this.process.offsetWidth;\n    }\n    const offsetPercentage = offsetWidth / this.process.offsetWidth;\n    const currentTime = this.audio.duration * offsetPercentage;\n    if (key == \"click\" || key == \"dragMove\") {\n      this.processPlayed.style.width = `${offsetWidth}px`;\n      this.processItem.style.left = `${offsetWidth - 4}px`;\n      this.setState({ currentTime: this.getTime(currentTime) });\n    }\n    if (key == \"dragEnd\" || key == \"click\") {\n      this.audio.currentTime = currentTime;\n    }\n  };\n\n  onProcessItemMouseDown = e => {\n    e.stopPropagation();\n    this.setState({ processItemMove: true });\n  };\n\n  onProcessItemMouseMove = e => {\n    e.stopPropagation();\n    const { processItemMove } = this.state;\n    if (processItemMove) {\n      this.setProcess(e, \"dragMove\");\n    }\n  };\n  \n  onProcessItemMouseUp = e => {\n    const { processItemMove } = this.state;\n    e.stopPropagation();\n    if (processItemMove) {\n      this.setState({ processItemMove: false });\n      this.setProcess(e, \"dragEnd\");\n    }\n  };\n\n  endedPlayMusic = () => {\n    const { playMode, currentMusic } = this.state;\n    const { musicList } = this.state;\n    if (musicList.length > 0 && currentMusic) {\n      const currentIndex = musicList.findIndex(item => {\n        return item.id === currentMusic.id;\n      });\n      if (playMode === 1) {\n        if (musicList[currentIndex + 1]) {\n          this.setState({ currentMusic: musicList[currentIndex + 1] }, () => {\n            this.onSwitchAction();\n          });\n        } else {\n          this.setState({ currentMusic: musicList[0] }, () => {\n            this.onSwitchAction();\n          });\n        }\n      }\n      else if (playMode === 2) {\n        const randomIndex = Math.floor(Math.random() * 3 + 1);\n        if (musicList[randomIndex + 1]) {\n          this.setState({ currentMusic: musicList[randomIndex + 1] }, () => {\n            this.onSwitchAction();\n          });\n        } else {\n          this.setState({ currentMusic: musicList[0] }, () => {\n            this.onSwitchAction();\n          });\n        }\n      }\n      else if (playMode === 3) {\n        this.onSwitchAction();\n      }\n    } else {\n      this.onSwitchAction();\n    }\n  };\n\n  nextMusic = () => {\n    const { currentMusic } = this.state;\n    const { musicList } = this.state;\n    if (musicList.length > 1 && currentMusic) {\n      const currentIndex = musicList.findIndex(item => {\n        return item.id === currentMusic.id;\n      });\n      if (musicList[currentIndex + 1]) {\n        this.setState({ currentMusic: musicList[currentIndex + 1] }, () => {\n          this.onSwitchAction();\n        });\n      } else {\n        this.setState({ currentMusic: musicList[0] }, () => {\n          this.onSwitchAction();\n        });\n      }\n    } else {\n      this.audio.currentTime = 0;\n      this.onSwitchAction();\n    }\n  };\n\n  previousMusic = () => {\n    const { currentMusic } = this.state;\n    const { musicList } = this.state;\n    if (musicList.length > 1 && currentMusic) {\n      const currentIndex = musicList.findIndex(item => {\n        return item.id === currentMusic.id;\n      });\n      if (musicList[currentIndex - 1]) {\n        this.setState({ currentMusic: musicList[currentIndex - 1] }, () => {\n          this.onSwitchAction();\n        });\n      } else {\n        this.setState({ currentMusic: musicList[musicList.length - 1] }, () => {\n          this.onSwitchAction();\n        });\n      }\n    } else {\n      this.audio.currentTime = 0;\n      this.onSwitchAction();\n    }\n  };\n\n  onSwitchAction = () => {\n    const { isPause } = this.state;\n    this.resetProcess();\n    if (isPause) {\n      this.onPlay();\n    }\n  };\n\n  resetProcess = () => {\n    this.processPlayed.style.width = \"0px\";\n    this.processItem.style.left = \"-4px\";\n  };\n\n\n  onVolumeControl = () => {\n    const { volumeControl } = this.state;\n    this.setState({ volumeControl: !volumeControl });\n  };\n\n  onVolumeControlHide = () => {\n    const { volumeControl } = this.state;\n    if (volumeControl) {\n      this.setState({ volumeControl: false });\n    }\n  };\n\n  initVolumeProcess = () => {\n\n    const processLength = this.volumeProcess.offsetHeight;\n\n    this.volumeProcessCurrent.style.height = `${processLength / 2}px`;\n\n    this.volumeProcessItem.style.bottom = `${processLength / 2 - 6}px`;\n  \n    this.audio.volume = 0.5;\n  };\n\n\n  onVolumeProcessSet = e => {\n    const processLength = this.volumeProcess.offsetHeight;\n    let volumeOffsetHeight =\n      processLength -\n      (e.pageY - this.volumeProcess.getBoundingClientRect().top);\n    let volumepercentage = 0;\n\n    if (volumeOffsetHeight < 0) {\n      volumeOffsetHeight = 0;\n    }\n    if (volumeOffsetHeight > processLength) {\n      volumeOffsetHeight = processLength;\n    }\n    volumepercentage = volumeOffsetHeight / processLength;\n\n    this.volumeProcessCurrent.style.height = `${volumeOffsetHeight}px`;\n\n    this.volumeProcessItem.style.bottom = `${volumeOffsetHeight - 6}px`;\n\n    this.audio.volume = volumepercentage;\n  };\n\n  onVolumeProcessItemMouseDown = () => {\n    this.setState({ volumeProcessItemMove: true });\n  };\n\n\n  onVolumeProcessItemMouseUp = e => {\n    const { volumeProcessItemMove } = this.state;\n    if (volumeProcessItemMove) {\n      this.setState({ volumeProcessItemMove: false });\n    }\n  };\n\n  onVolumeProcessItemMove = e => {\n    const { volumeProcessItemMove } = this.state;\n    if (volumeProcessItemMove) {\n      this.onVolumeProcessSet(e);\n    }\n  };\n\n  onPlayModeChange = () => {\n    const { playMode } = this.state;\n    if (playMode === 3) {\n      this.setState({ playMode: 1 });\n    } else {\n      this.setState({ playMode: playMode + 1 });\n    }\n  };\n\n\n  addPlayList = () => {\n      this.setState({\n        addMusic: !this.state.addMusic\n      })\n  };\n\n\n  beforeUpload = (file) => {\n    const {upFiles} = this.state;\n    upFiles.push(file);\n    this.setState({upFiles: upFiles});\n  }\n\n\n  onMusicList = () => {\n    const { isMusicListShow } = this.state;\n    this.setState({ isMusicListShow: !isMusicListShow });\n  };\n\n\n  onDeleteMusic = (e, item) => {\n    e.stopPropagation();\n    const { onDeleteMusic } = this.props;\n    if (onDeleteMusic) {\n      onDeleteMusic(item.id);\n    }\n  };\n\n  onDeleteAllMusic = () => {\n    const { onDeleteAllMusic } = this.props;\n    if (onDeleteAllMusic) {\n      onDeleteAllMusic();\n    }\n  };\n\n  onMusicListItemClick = id => {\n    const { musicList } = this.state;\n    const { currentMusic } = this.state;\n    const index = musicList.findIndex(item => {\n      return item.id === id;\n    });\n    if (index !== -1) {\n      if (currentMusic.id === id) {\n        this.resetProcess();\n        this.audio.currentTime = 0;\n        this.onPlay();\n      } else {\n        this.setState({ currentMusic: musicList[index] }, () => {\n          this.resetProcess();\n          this.onPlay();\n        });\n      }\n    }\n  };\n\n  render() {\n    const {\n      currentMusic,\n      isPause,\n      totalTime,\n      currentTime,\n      volumeControl,\n      playMode,\n      isMusicListShow\n    } = this.state;\n    const { title, info, img, resource, id } = currentMusic || {};\n    const { musicList } = this.state;\n    let playModeIcon = \"\";\n    switch (playMode) {\n      case 1:\n        playModeIcon = \"icon-circulation-list\";\n        break;\n      case 2:\n        playModeIcon = \"icon-circulation-random\";\n        break;\n      case 3:\n        playModeIcon = \"icon-circulation-single\";\n        break;\n      default:\n        playModeIcon = \"icon-circulation-list\";\n        break;\n    }\n    return (\n      <div className=\"mainLayout\">\n        <div\n          className=\"mainContent\"\n          onMouseMove={this.onProcessItemMouseMove}\n          onMouseUp={this.onProcessItemMouseUp}\n        >\n          <div className=\"playContent\">\n            <div className=\"left-controler\">\n              <span\n                className=\"icon-prev prev-next-icon\"\n                onClick={this.previousMusic}\n              />\n              {isPause ? (\n                <span className=\"icon-pause playIcon\" onClick={this.onPause} />\n              ) : (\n                <span className=\"icon-play playIcon\" onClick={this.onPlay} />\n              )}\n              <span\n                className=\"icon-next prev-next-icon\"\n                onClick={this.nextMusic}\n              />\n            </div>\n            <div className=\"main-controler\">\n              <img src={img} alt=\"\" className=\"thumbnail\" />\n              <div className=\"music-control\">\n                <div className=\"music-info\">\n                  <span className=\"title-info\">{title}</span>\n                  <span className=\"author-info\">{info}</span>\n                </div>\n                <div className=\"process-time\">\n                  <div\n                    className=\"process-wrapper\"\n                    onClick={this.onProcessClick}\n                    ref={ref => (this.process = ref)}\n                  >\n                    <div className=\"process\">\n                      <div\n                        className=\"progress-buffered\"\n                        ref={ref => (this.processBuffered = ref)}\n                      />\n                      <div\n                        className=\"progress-played\"\n                        ref={ref => (this.processPlayed = ref)}\n                      >\n                        <div\n                          className=\"process-item\"\n                          ref={ref => (this.processItem = ref)}\n                          onMouseDown={this.onProcessItemMouseDown}\n                        >\n                          <div className=\"process-item-inside\" />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"time\">\n                    <span className=\"current-time\">{currentTime}</span>/\n                    <span className=\"total-time\">{totalTime}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"right-folder\">\n                  <span onClick={() => this.addPlayList()} className=\"icon-folder folder\"/>\n                        {this.state.addMusic\n                            ?<form>\n                              <Input></Input>\n                              <Upload {...props} showUploadList={false} beforeUpload={this.beforeUpload}>    \n                              </Upload>\n                            </form>\n                            :null\n                        }    \n            </div>\n            <div className=\"right-controler\">\n              <div\n                className=\"volume-controler\"\n                style={{ visibility: volumeControl ? \"visible\" : \"hidden\" }}\n                onMouseMove={this.onVolumeProcessItemMove}\n                onMouseUp={this.onVolumeProcessItemMouseUp}\n              >\n                <div\n                  className=\"volume-process\"\n                  onClick={this.onVolumeProcessSet}\n                  ref={ref => (this.volumeProcess = ref)}\n                >\n                  <div\n                    className=\"volume-current\"\n                    ref={ref => (this.volumeProcessCurrent = ref)}\n                  >\n                    <div\n                      className=\"volume-item\"\n                      ref={ref => (this.volumeProcessItem = ref)}\n                      onMouseDown={this.onVolumeProcessItemMouseDown}\n                      onMouseUp={this.onVolumeProcessItemMouseUp}\n                    >\n                      <div className=\"volume-item-inside\" />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <span\n                className=\"icon-volume volume\"\n                onClick={this.onVolumeControl}\n              />\n              <span\n                className={`${playModeIcon} circulation`}\n                onClick={this.onPlayModeChange}\n              />\n              <span className=\"icon-list list\" onClick={this.onMusicList} />\n            </div>\n            {isMusicListShow && (\n              <div className=\"musicList\">\n                <div className=\"music-list-head\">\n                  <h4 className=\"music-list-head-title\">\n                     Playlist(\n                    <span>\n                      {musicList && musicList.length ? musicList.length : 0}\n                    </span>\n                    )\n                  </h4>\n                  <span\n                    className=\"music-list-head-collect\"\n                    onClick={this.onCollect}\n                  >\n                    <span className=\"icon-addfile music-list-common-icon\" />\n                  </span>\n                  <span className=\"music-list-head-line\" />\n                  <span\n                    className=\"music-list-head-clear\"\n                    onClick={this.onDeleteAllMusic}\n                  >\n                  </span>\n                  <p className=\"music-list-head-name\">{title}</p>\n                  <span className=\"music-list-head-close\">\n                    <span\n                      className=\"icon-close music-list-common-icon\"\n                      onClick={this.onMusicList}\n                    />\n                  </span>\n                </div>\n                <div className=\"music-list-body\">\n                  <div className=\"music-list-body-content\">\n                    <ul className=\"music-list-body-ul\">\n                      {musicList &&\n                        musicList.length > 0 &&\n                        musicList.map(item => {\n                          return (\n                            <li\n                              className={`music-list-li ${id === item.id &&\n                                \"music-current\"}`}\n                              onClick={() => this.onMusicListItemClick(item.id)}\n                              key={item.id}\n                            >\n                              <div className=\"col music-list-li-col-1\">\n                                {id === item.id && (\n                                  <span className=\"play-triangle-icon icon-currentPlay\" />\n                                )}\n                              </div>\n                              <div className=\"col music-list-li-col-2\">\n                                <span className=\"music-list-li-text\">\n                                  {item.title}\n                                </span>\n                              </div>\n                              <div className=\"col music-list-li-col-3\">\n                                <span\n                                  className=\"icon-clear music-list-action-icon\"\n                                  onClick={e => this.onDeleteMusic(e, item)}\n                                />\n                              </div>\n                              <div className=\"col music-list-li-col-4\">\n                                <span className=\"music-list-li-text\">\n                                  {item.info}\n                                </span>\n                              </div>\n                              <div className=\"col music-list-li-col-5\">\n                                <span className=\"music-list-li-text\">\n                                  {item.time}\n                                </span>\n                              </div>\n                              <div className=\"col music-list-li-col-6\">\n                                <span className=\"icon-link music-list-action-icon\" />\n                              </div>\n                            </li>\n                          );\n                        })}\n                    </ul>\n                  </div>\n                  <div className=\"music-cover\">\n                  </div>\n                </div>\n              </div>\n            )}\n            <audio src={resource} ref={ref => (this.audio = ref)} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n\n"]},"metadata":{},"sourceType":"module"}