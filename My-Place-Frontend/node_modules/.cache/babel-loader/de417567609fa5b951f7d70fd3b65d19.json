{"ast":null,"code":"var _jsxFileName = \"/home/lin/phase5/My-Place-Frontend/my-place/src/Component/Music.js\";\nimport React, { Component } from \"react\";\nimport { Upload, Input, Button } from 'antd';\nimport { CloseOutlined, UploadOutlined } from '@ant-design/icons';\nimport _ from \"lodash\";\nimport \"../static/style.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst musicList = [{\n  id: \"1\",\n  title: \"Mariage d'amour \",\n  info: \"Paul de Senneville \",\n  resource: \"http://m7.music.126.net/20210708034809/6c94250fbe265d93b04f11dab52132cf/ymusic/obj/w5zDlMODwrDDiGjCn8Ky/3463824034/c986/8c67/7d20/648bf98985577cfa9b6c89ed8ebcdd0f.mp3\",\n  time: \"5:00\",\n  img: \"http://singerimg.kugou.com/uploadpic/softhead/400/20160913/20160913140233132.jpg\"\n}, {\n  id: \"2\",\n  title: \"Kiss The Rain \",\n  info: \"Yiruma\",\n  resource: \"https://sharefs.ali.kugou.com/202107080001/570d32e1e386eacd9a133fa2e4d56f12/G203/M07/0B/0F/a4cBAF5d-ziAQNadAEnQf8bIoLs857.mp3\",\n  time: \"04:50\",\n  img: \"http://singerimg.kugou.com/uploadpic/softhead/400/20160913/20160913140233132.jpg\"\n}, {\n  id: \"3\",\n  title: \"My Soul\",\n  info: \"July\",\n  resource: \"https://sharefs.ali.kugou.com/202107080002/c0dffd58af5ed3012eceeb2152717ab4/G096/M08/01/09/oA0DAFkb-fqAKdpbADgXpJHizC0506.mp3\",\n  time: \"04:50\",\n  img: \"http://singerimg.kugou.com/uploadpic/softhead/400/20160913/20160913140233132.jpg\"\n}];\nconst props = {\n  action: 'http://localhost:3000/musicpreview'\n};\nexport default class Music extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isPause: false,\n      musicList: [],\n      currentMusic: musicList ? musicList[0] : {},\n      totalTime: \"00:00\",\n      currentTime: \"00:00\",\n      processItemMove: false,\n      volumeProcessItemMove: false,\n      volumeControl: false,\n      playMode: 1,\n      isMusicListShow: false,\n      addMusic: false,\n      placement: 'top',\n      fileList: [],\n      upFiles: {},\n      title: \"\",\n      author: \"\",\n      img: \"\",\n      description: \"\"\n    };\n\n    this.getTime = time => {\n      if (time) {\n        const minute = parseInt(time / 60 % 60);\n        const second = parseInt(time % 60);\n        let minuteText = `${minute}`;\n        let secondText = `${second}`;\n\n        if (minute < 10) {\n          minuteText = `0${minute}`;\n        }\n\n        if (second < 10) {\n          secondText = `0${second}`;\n        }\n\n        return `${minuteText}:${secondText}`;\n      } else {\n        return \"00:00\";\n      }\n    };\n\n    this.onPlay = () => {\n      const audio = this.audio;\n      this.setState({\n        isPause: true\n      });\n      audio.play();\n    };\n\n    this.onPause = () => {\n      const audio = this.audio;\n      this.setState({\n        isPause: false\n      });\n      audio.pause();\n    };\n\n    this.onProcessClick = e => {\n      this.setProcess(e, \"click\");\n    };\n\n    this.setProcess = (e, key) => {\n      let offsetWidth = e.pageX - this.processPlayed.getBoundingClientRect().left;\n\n      if (offsetWidth < 0) {\n        offsetWidth = 0;\n      }\n\n      if (offsetWidth > this.process.offsetWidth) {\n        offsetWidth = this.process.offsetWidth;\n      }\n\n      const offsetPercentage = offsetWidth / this.process.offsetWidth;\n      const currentTime = this.audio.duration * offsetPercentage;\n\n      if (key == \"click\" || key == \"dragMove\") {\n        this.processPlayed.style.width = `${offsetWidth}px`;\n        this.processItem.style.left = `${offsetWidth - 4}px`;\n        this.setState({\n          currentTime: this.getTime(currentTime)\n        });\n      }\n\n      if (key == \"dragEnd\" || key == \"click\") {\n        this.audio.currentTime = currentTime;\n      }\n    };\n\n    this.onProcessItemMouseDown = e => {\n      e.stopPropagation();\n      this.setState({\n        processItemMove: true\n      });\n    };\n\n    this.onProcessItemMouseMove = e => {\n      e.stopPropagation();\n      const {\n        processItemMove\n      } = this.state;\n\n      if (processItemMove) {\n        this.setProcess(e, \"dragMove\");\n      }\n    };\n\n    this.onProcessItemMouseUp = e => {\n      const {\n        processItemMove\n      } = this.state;\n      e.stopPropagation();\n\n      if (processItemMove) {\n        this.setState({\n          processItemMove: false\n        });\n        this.setProcess(e, \"dragEnd\");\n      }\n    };\n\n    this.endedPlayMusic = () => {\n      const {\n        playMode,\n        currentMusic\n      } = this.state;\n      const {\n        musicList\n      } = this.state;\n\n      if (musicList.length > 0 && currentMusic) {\n        const currentIndex = musicList.findIndex(item => {\n          return item.id === currentMusic.id;\n        });\n\n        if (playMode === 1) {\n          if (musicList[currentIndex + 1]) {\n            this.setState({\n              currentMusic: musicList[currentIndex + 1]\n            }, () => {\n              this.onSwitchAction();\n            });\n          } else {\n            this.setState({\n              currentMusic: musicList[0]\n            }, () => {\n              this.onSwitchAction();\n            });\n          }\n        } else if (playMode === 2) {\n          const randomIndex = Math.floor(Math.random() * 3 + 1);\n\n          if (musicList[randomIndex + 1]) {\n            this.setState({\n              currentMusic: musicList[randomIndex + 1]\n            }, () => {\n              this.onSwitchAction();\n            });\n          } else {\n            this.setState({\n              currentMusic: musicList[0]\n            }, () => {\n              this.onSwitchAction();\n            });\n          }\n        } else if (playMode === 3) {\n          this.onSwitchAction();\n        }\n      } else {\n        this.onSwitchAction();\n      }\n    };\n\n    this.nextMusic = () => {\n      const {\n        currentMusic\n      } = this.state;\n      const {\n        musicList\n      } = this.state;\n\n      if (musicList.length > 1 && currentMusic) {\n        const currentIndex = musicList.findIndex(item => {\n          return item.id === currentMusic.id;\n        });\n\n        if (musicList[currentIndex + 1]) {\n          this.setState({\n            currentMusic: musicList[currentIndex + 1]\n          }, () => {\n            this.onSwitchAction();\n          });\n        } else {\n          this.setState({\n            currentMusic: musicList[0]\n          }, () => {\n            this.onSwitchAction();\n          });\n        }\n      } else {\n        this.audio.currentTime = 0;\n        this.onSwitchAction();\n      }\n    };\n\n    this.previousMusic = () => {\n      const {\n        currentMusic\n      } = this.state;\n      const {\n        musicList\n      } = this.state;\n\n      if (musicList.length > 1 && currentMusic) {\n        const currentIndex = musicList.findIndex(item => {\n          return item.id === currentMusic.id;\n        });\n\n        if (musicList[currentIndex - 1]) {\n          this.setState({\n            currentMusic: musicList[currentIndex - 1]\n          }, () => {\n            this.onSwitchAction();\n          });\n        } else {\n          this.setState({\n            currentMusic: musicList[musicList.length - 1]\n          }, () => {\n            this.onSwitchAction();\n          });\n        }\n      } else {\n        this.audio.currentTime = 0;\n        this.onSwitchAction();\n      }\n    };\n\n    this.onSwitchAction = () => {\n      const {\n        isPause\n      } = this.state;\n      this.resetProcess();\n\n      if (isPause) {\n        this.onPlay();\n      }\n    };\n\n    this.resetProcess = () => {\n      this.processPlayed.style.width = \"0px\";\n      this.processItem.style.left = \"-4px\";\n    };\n\n    this.onVolumeControl = () => {\n      const {\n        volumeControl\n      } = this.state;\n      this.setState({\n        volumeControl: !volumeControl\n      });\n    };\n\n    this.onVolumeControlHide = () => {\n      const {\n        volumeControl\n      } = this.state;\n\n      if (volumeControl) {\n        this.setState({\n          volumeControl: false\n        });\n      }\n    };\n\n    this.initVolumeProcess = () => {\n      const processLength = this.volumeProcess.offsetHeight;\n      this.volumeProcessCurrent.style.height = `${processLength / 2}px`;\n      this.volumeProcessItem.style.bottom = `${processLength / 2 - 6}px`;\n      this.audio.volume = 0.5;\n    };\n\n    this.onVolumeProcessSet = e => {\n      const processLength = this.volumeProcess.offsetHeight;\n      let volumeOffsetHeight = processLength - (e.pageY - this.volumeProcess.getBoundingClientRect().top);\n      let volumepercentage = 0;\n\n      if (volumeOffsetHeight < 0) {\n        volumeOffsetHeight = 0;\n      }\n\n      if (volumeOffsetHeight > processLength) {\n        volumeOffsetHeight = processLength;\n      }\n\n      volumepercentage = volumeOffsetHeight / processLength;\n      this.volumeProcessCurrent.style.height = `${volumeOffsetHeight}px`;\n      this.volumeProcessItem.style.bottom = `${volumeOffsetHeight - 6}px`;\n      this.audio.volume = volumepercentage;\n    };\n\n    this.onVolumeProcessItemMouseDown = () => {\n      this.setState({\n        volumeProcessItemMove: true\n      });\n    };\n\n    this.onVolumeProcessItemMouseUp = e => {\n      const {\n        volumeProcessItemMove\n      } = this.state;\n\n      if (volumeProcessItemMove) {\n        this.setState({\n          volumeProcessItemMove: false\n        });\n      }\n    };\n\n    this.onVolumeProcessItemMove = e => {\n      const {\n        volumeProcessItemMove\n      } = this.state;\n\n      if (volumeProcessItemMove) {\n        this.onVolumeProcessSet(e);\n      }\n    };\n\n    this.onPlayModeChange = () => {\n      const {\n        playMode\n      } = this.state;\n\n      if (playMode === 3) {\n        this.setState({\n          playMode: 1\n        });\n      } else {\n        this.setState({\n          playMode: playMode + 1\n        });\n      }\n    };\n\n    this.titleOnChange = e => {\n      this.setState({\n        title: e.target.value\n      });\n    };\n\n    this.authorOnChange = e => {\n      this.setState({\n        author: e.target.value\n      });\n    };\n\n    this.imgOnChange = e => {\n      this.setState({\n        img: e.target.value\n      });\n    };\n\n    this.descriptionOnChnage = e => {\n      this.setState({\n        description: e.target.value\n      });\n    };\n\n    this.addPlayList = () => {\n      this.setState({\n        addMusic: !this.state.addMusic\n      });\n    };\n\n    this.submitAddMusic = () => {\n      const {\n        upFiles,\n        title,\n        author,\n        img,\n        description\n      } = this.state;\n      let formData = new FormData();\n      formData.append('music', upFiles);\n      formData.append('user_id', this.props.loginUser.id);\n      formData.append('title', title);\n      formData.append('author', author);\n      formData.append('img', img);\n      formData.append('description', description);\n      fetch(\"http://localhost:3000/musics\", {\n        method: \"POST\",\n        body: formData\n      }).then(res => res.json()).then(() => {// this.componentDidMount()\n      });\n    };\n\n    this.beforeUpload = file => {\n      const {\n        upFiles\n      } = this.state;\n      upFiles.push(file);\n      this.setState({\n        upFiles: upFiles\n      });\n    };\n\n    this.onMusicList = () => {\n      const {\n        isMusicListShow\n      } = this.state;\n      this.setState({\n        isMusicListShow: !isMusicListShow\n      });\n    };\n\n    this.onDeleteMusic = (e, item) => {\n      e.stopPropagation();\n      const {\n        onDeleteMusic\n      } = this.props;\n\n      if (onDeleteMusic) {\n        onDeleteMusic(item.id);\n      }\n    };\n\n    this.onDeleteAllMusic = () => {\n      const {\n        onDeleteAllMusic\n      } = this.props;\n\n      if (onDeleteAllMusic) {\n        onDeleteAllMusic();\n      }\n    };\n\n    this.onMusicListItemClick = id => {\n      const {\n        musicList\n      } = this.state;\n      const {\n        currentMusic\n      } = this.state;\n      const index = musicList.findIndex(item => {\n        return item.id === id;\n      });\n\n      if (index !== -1) {\n        if (currentMusic.id === id) {\n          this.resetProcess();\n          this.audio.currentTime = 0;\n          this.onPlay();\n        } else {\n          this.setState({\n            currentMusic: musicList[index]\n          }, () => {\n            this.resetProcess();\n            this.onPlay();\n          });\n        }\n      }\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevState.currentMusic.id !== this.state.currentMusic.id) {\n      this.resetProcess();\n\n      if (this.state.isPause) {\n        this.onPlay();\n      }\n    }\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:3000/musics').then(res => res.json()).then(musicList => this.setState({\n      musicList\n    }));\n    const audio = this.audio;\n    audio.addEventListener(\"canplay\", () => {\n      const totalTime = parseInt(audio.duration);\n      this.setState({\n        totalTime: this.getTime(totalTime)\n      });\n    });\n    audio.addEventListener(\"timeupdate\", () => {\n      const {\n        processItemMove\n      } = this.state;\n      const currentTime = parseInt(audio.currentTime);\n      const buffered = audio.buffered;\n      let bufferTime = 0;\n\n      if (buffered.length !== 0) {\n        bufferTime = buffered.end(buffered.length - 1);\n      }\n\n      const bufferWidth = 500 * (bufferTime / audio.duration);\n      const playWidth = 500 * (audio.currentTime / audio.duration);\n\n      if (this.processPlayed || this.processItem.style) {\n        if (!processItemMove) {\n          this.processPlayed.style.width = `${playWidth}px`;\n          this.processItem.style.left = `${playWidth - 4}px`;\n          this.setState({\n            currentTime: this.getTime(currentTime)\n          });\n        }\n      }\n\n      this.processBuffered.style.width = `${bufferWidth}px`;\n    });\n    audio.addEventListener(\"ended\", () => {\n      this.endedPlayMusic();\n    });\n    this.initVolumeProcess();\n  }\n\n  render() {\n    const {\n      currentMusic,\n      isPause,\n      totalTime,\n      currentTime,\n      volumeControl,\n      playMode,\n      isMusicListShow\n    } = this.state;\n    const {\n      title,\n      info,\n      img,\n      resource,\n      id\n    } = currentMusic || {};\n    const {\n      musicList\n    } = this.state;\n    let playModeIcon = \"\";\n\n    switch (playMode) {\n      case 1:\n        playModeIcon = \"icon-circulation-list\";\n        break;\n\n      case 2:\n        playModeIcon = \"icon-circulation-random\";\n        break;\n\n      case 3:\n        playModeIcon = \"icon-circulation-single\";\n        break;\n\n      default:\n        playModeIcon = \"icon-circulation-list\";\n        break;\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mainLayout\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mainContent\",\n        onMouseMove: this.onProcessItemMouseMove,\n        onMouseUp: this.onProcessItemMouseUp,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"playContent\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"left-controler\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-prev prev-next-icon\",\n              onClick: this.previousMusic\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 15\n            }, this), isPause ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-pause playIcon\",\n              onClick: this.onPause\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-play playIcon\",\n              onClick: this.onPlay\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-next prev-next-icon\",\n              onClick: this.nextMusic\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"main-controler\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: img,\n              alt: \"\",\n              className: \"thumbnail\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"music-control\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"music-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"title-info\",\n                  children: title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 517,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"author-info\",\n                  children: info\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"process-time\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"process-wrapper\",\n                  onClick: this.onProcessClick,\n                  ref: ref => this.process = ref,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"process\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"progress-buffered\",\n                      ref: ref => this.processBuffered = ref\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 527,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"progress-played\",\n                      ref: ref => this.processPlayed = ref,\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"process-item\",\n                        ref: ref => this.processItem = ref,\n                        onMouseDown: this.onProcessItemMouseDown,\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"process-item-inside\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 540,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 535,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 531,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 526,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 521,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"time\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"current-time\",\n                    children: currentTime\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 546,\n                    columnNumber: 21\n                  }, this), \"/\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"total-time\",\n                    children: totalTime\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 547,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 545,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 520,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"right-folder\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: () => this.addPlayList(),\n              className: \"icon-folder folder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 19\n            }, this), this.state.addMusic ? /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"upload-title\",\n                children: \"Upload Music\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 34\n              }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                className: \"add-music\",\n                children: [/*#__PURE__*/_jsxDEV(CloseOutlined, {\n                  className: \"close-add\",\n                  onClick: () => this.addPlayList()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 559,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 560,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(Upload, { ...props,\n                  showUploadList: false,\n                  beforeUpload: this.beforeUpload,\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    className: \"add-upload\",\n                    icon: /*#__PURE__*/_jsxDEV(UploadOutlined, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 562,\n                      columnNumber: 74\n                    }, this),\n                    children: \"Upload\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 562,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 561,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  className: \"add-input\",\n                  addonBefore: \"Title: \",\n                  onChange: e => this.titleOnChange(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 564,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  className: \"add-input\",\n                  addonBefore: \"Author: \",\n                  onChange: e => this.authorOnChange(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 565,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  className: \"add-input\",\n                  addonBefore: \"Image: \",\n                  onChange: e => this.imgOnChange(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 566,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(Input, {\n                  className: \"add-input\",\n                  addonBefore: \"Description: \",\n                  onChange: e => this.descriptionOnChnage(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 567,\n                  columnNumber: 35\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"add-submit\",\n                  children: \"Submit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 568,\n                  columnNumber: 35\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 35\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 35\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"right-controler\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"volume-controler\",\n              style: {\n                visibility: volumeControl ? \"visible\" : \"hidden\"\n              },\n              onMouseMove: this.onVolumeProcessItemMove,\n              onMouseUp: this.onVolumeProcessItemMouseUp,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"volume-process\",\n                onClick: this.onVolumeProcessSet,\n                ref: ref => this.volumeProcess = ref,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"volume-current\",\n                  ref: ref => this.volumeProcessCurrent = ref,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"volume-item\",\n                    ref: ref => this.volumeProcessItem = ref,\n                    onMouseDown: this.onVolumeProcessItemMouseDown,\n                    onMouseUp: this.onVolumeProcessItemMouseUp,\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"volume-item-inside\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 596,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 590,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 586,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-volume volume\",\n              onClick: this.onVolumeControl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `${playModeIcon} circulation`,\n              onClick: this.onPlayModeChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"icon-list list\",\n              onClick: this.onMusicList\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 609,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 13\n          }, this), isMusicListShow && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"musicList\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"music-list-head\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"music-list-head-title\",\n                children: [\"Playlist(\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: musicList && musicList.length ? musicList.length : 0\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 616,\n                  columnNumber: 21\n                }, this), \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 614,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"music-list-head-collect\",\n                onClick: this.onCollect,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"icon-addfile music-list-common-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 625,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 621,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"music-list-head-line\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 627,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"music-list-head-clear\",\n                onClick: this.onDeleteAllMusic\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 628,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"music-list-head-name\",\n                children: title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"music-list-head-close\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"icon-close music-list-common-icon\",\n                  onClick: this.onMusicList\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 635,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 634,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 613,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"music-list-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"music-list-body-content\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"music-list-body-ul\",\n                  children: musicList && musicList.length > 0 && musicList.map(item => {\n                    return /*#__PURE__*/_jsxDEV(\"li\", {\n                      className: `music-list-li ${id === item.id && \"music-current\"}`,\n                      onClick: () => this.onMusicListItemClick(item.id),\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-1\",\n                        children: id === item.id && /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"play-triangle-icon icon-currentPlay\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 656,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 654,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-2\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"music-list-li-text\",\n                          children: item.title\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 660,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 659,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-3\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"icon-clear music-list-action-icon\",\n                          onClick: e => this.onDeleteMusic(e, item)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 665,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 664,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-4\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"music-list-li-text\",\n                          children: item.info\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 671,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 670,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-5\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"music-list-li-text\",\n                          children: item.time\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 676,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 675,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col music-list-li-col-6\",\n                        children: /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"icon-link music-list-action-icon\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 681,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 680,\n                        columnNumber: 31\n                      }, this)]\n                    }, item.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 648,\n                      columnNumber: 29\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 643,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 642,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"music-cover\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 688,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 641,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 612,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n            src: resource,\n            ref: ref => this.audio = ref\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 693,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/lin/phase5/My-Place-Frontend/my-place/src/Component/Music.js"],"names":["React","Component","Upload","Input","Button","CloseOutlined","UploadOutlined","_","musicList","id","title","info","resource","time","img","props","action","Music","state","isPause","currentMusic","totalTime","currentTime","processItemMove","volumeProcessItemMove","volumeControl","playMode","isMusicListShow","addMusic","placement","fileList","upFiles","author","description","getTime","minute","parseInt","second","minuteText","secondText","onPlay","audio","setState","play","onPause","pause","onProcessClick","e","setProcess","key","offsetWidth","pageX","processPlayed","getBoundingClientRect","left","process","offsetPercentage","duration","style","width","processItem","onProcessItemMouseDown","stopPropagation","onProcessItemMouseMove","onProcessItemMouseUp","endedPlayMusic","length","currentIndex","findIndex","item","onSwitchAction","randomIndex","Math","floor","random","nextMusic","previousMusic","resetProcess","onVolumeControl","onVolumeControlHide","initVolumeProcess","processLength","volumeProcess","offsetHeight","volumeProcessCurrent","height","volumeProcessItem","bottom","volume","onVolumeProcessSet","volumeOffsetHeight","pageY","top","volumepercentage","onVolumeProcessItemMouseDown","onVolumeProcessItemMouseUp","onVolumeProcessItemMove","onPlayModeChange","titleOnChange","target","value","authorOnChange","imgOnChange","descriptionOnChnage","addPlayList","submitAddMusic","formData","FormData","append","loginUser","fetch","method","body","then","res","json","beforeUpload","file","push","onMusicList","onDeleteMusic","onDeleteAllMusic","onMusicListItemClick","index","componentDidUpdate","prevProps","prevState","snapshot","componentDidMount","addEventListener","buffered","bufferTime","end","bufferWidth","playWidth","processBuffered","render","playModeIcon","ref","visibility","onCollect","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Upload, Input, Button } from 'antd';\nimport {  CloseOutlined, UploadOutlined } from '@ant-design/icons';\nimport _ from \"lodash\";\nimport \"../static/style.css\";\n\n\nconst musicList = [\n  {\n    id: \"1\",\n    title: \"Mariage d'amour \",\n    info: \"Paul de Senneville \",\n    resource: \"http://m7.music.126.net/20210708034809/6c94250fbe265d93b04f11dab52132cf/ymusic/obj/w5zDlMODwrDDiGjCn8Ky/3463824034/c986/8c67/7d20/648bf98985577cfa9b6c89ed8ebcdd0f.mp3\",\n    time: \"5:00\",\n    img:\n      \"http://singerimg.kugou.com/uploadpic/softhead/400/20160913/20160913140233132.jpg\"\n  },\n  {\n    id: \"2\",\n    title: \"Kiss The Rain \",\n    info: \"Yiruma\",\n    resource: \"https://sharefs.ali.kugou.com/202107080001/570d32e1e386eacd9a133fa2e4d56f12/G203/M07/0B/0F/a4cBAF5d-ziAQNadAEnQf8bIoLs857.mp3\",\n    time: \"04:50\",\n    img:\n      \"http://singerimg.kugou.com/uploadpic/softhead/400/20160913/20160913140233132.jpg\"\n  },\n  {\n    id: \"3\",\n    title: \"My Soul\",\n    info: \"July\",\n    resource: \"https://sharefs.ali.kugou.com/202107080002/c0dffd58af5ed3012eceeb2152717ab4/G096/M08/01/09/oA0DAFkb-fqAKdpbADgXpJHizC0506.mp3\",\n    time: \"04:50\",\n    img:\n      \"http://singerimg.kugou.com/uploadpic/softhead/400/20160913/20160913140233132.jpg\"\n  }]\n\n  const props = {\n    action: 'http://localhost:3000/musicpreview'\n  };\n\n\nexport default class Music extends Component {\n\n    state = {\n      isPause: false,\n      musicList: [],\n      currentMusic: musicList ? musicList[0] : {},\n      totalTime: \"00:00\",\n      currentTime: \"00:00\",\n      processItemMove: false,\n      volumeProcessItemMove: false,\n      volumeControl: false,\n      playMode: 1,\n      isMusicListShow: false,\n      addMusic: false,\n      placement: 'top',\n      fileList: [],\n      upFiles: {},\n      title: \"\",\n      author: \"\",\n      img: \"\",\n      description: \"\",\n\n    };\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevState.currentMusic.id !== this.state.currentMusic.id) {\n      this.resetProcess();\n      if (this.state.isPause) {\n        this.onPlay();\n      }\n    }\n  }\n\n  componentDidMount() {\n\n    fetch('http://localhost:3000/musics')\n      .then(res => res.json())\n      .then(musicList => this.setState({musicList}))\n\n    const audio = this.audio;\n    audio.addEventListener(\"canplay\", () => {\n      const totalTime = parseInt(audio.duration);\n      this.setState({\n        totalTime: this.getTime(totalTime)\n      });\n    });\n    audio.addEventListener(\"timeupdate\", () => {\n      const { processItemMove } = this.state;\n      const currentTime = parseInt(audio.currentTime);\n      const buffered = audio.buffered;\n      let bufferTime = 0;\n      if (buffered.length !== 0) {\n        bufferTime = buffered.end(buffered.length - 1);\n      }\n      const bufferWidth = 500 * (bufferTime / audio.duration);\n      const playWidth = 500 * (audio.currentTime / audio.duration);\n      if(this.processPlayed || this.processItem.style){\n        if (!processItemMove) {\n          this.processPlayed.style.width = `${playWidth}px`;\n          this.processItem.style.left = `${playWidth - 4}px`;\n          this.setState({\n            currentTime: this.getTime(currentTime)\n          });\n        }\n    }\n      this.processBuffered.style.width = `${bufferWidth}px`;\n    });\n\n    audio.addEventListener(\"ended\", () => {\n      this.endedPlayMusic();\n    });\n    this.initVolumeProcess();\n  }\n\n  getTime = time => {\n    if (time) {\n      const minute = parseInt((time / 60) % 60);\n      const second = parseInt(time % 60);\n      let minuteText = `${minute}`;\n      let secondText = `${second}`;\n      if (minute < 10) {\n        minuteText = `0${minute}`;\n      }\n      if (second < 10) {\n        secondText = `0${second}`;\n      }\n      return `${minuteText}:${secondText}`;\n    } else {\n      return \"00:00\";\n    }\n  };\n\n  onPlay = () => {\n    const audio = this.audio;\n    this.setState({ isPause: true });\n    audio.play();\n  };\n\n  onPause = () => {\n    const audio = this.audio;\n    this.setState({ isPause: false });\n    audio.pause();\n  };\n\n  onProcessClick = e => {\n    this.setProcess(e, \"click\");\n  };\n\n  setProcess = (e, key) => {\n    let offsetWidth = e.pageX - this.processPlayed.getBoundingClientRect().left;\n    if (offsetWidth < 0) {\n      offsetWidth = 0;\n    }\n    if (offsetWidth > this.process.offsetWidth) {\n      offsetWidth = this.process.offsetWidth;\n    }\n    const offsetPercentage = offsetWidth / this.process.offsetWidth;\n    const currentTime = this.audio.duration * offsetPercentage;\n    if (key == \"click\" || key == \"dragMove\") {\n      this.processPlayed.style.width = `${offsetWidth}px`;\n      this.processItem.style.left = `${offsetWidth - 4}px`;\n      this.setState({ currentTime: this.getTime(currentTime) });\n    }\n    if (key == \"dragEnd\" || key == \"click\") {\n      this.audio.currentTime = currentTime;\n    }\n  };\n\n  onProcessItemMouseDown = e => {\n    e.stopPropagation();\n    this.setState({ processItemMove: true });\n  };\n\n  onProcessItemMouseMove = e => {\n    e.stopPropagation();\n    const { processItemMove } = this.state;\n    if (processItemMove) {\n      this.setProcess(e, \"dragMove\");\n    }\n  };\n  \n  onProcessItemMouseUp = e => {\n    const { processItemMove } = this.state;\n    e.stopPropagation();\n    if (processItemMove) {\n      this.setState({ processItemMove: false });\n      this.setProcess(e, \"dragEnd\");\n    }\n  };\n\n  endedPlayMusic = () => {\n    const { playMode, currentMusic } = this.state;\n    const { musicList } = this.state;\n    if (musicList.length > 0 && currentMusic) {\n      const currentIndex = musicList.findIndex(item => {\n        return item.id === currentMusic.id;\n      });\n      if (playMode === 1) {\n        if (musicList[currentIndex + 1]) {\n          this.setState({ currentMusic: musicList[currentIndex + 1] }, () => {\n            this.onSwitchAction();\n          });\n        } else {\n          this.setState({ currentMusic: musicList[0] }, () => {\n            this.onSwitchAction();\n          });\n        }\n      }\n      else if (playMode === 2) {\n        const randomIndex = Math.floor(Math.random() * 3 + 1);\n        if (musicList[randomIndex + 1]) {\n          this.setState({ currentMusic: musicList[randomIndex + 1] }, () => {\n            this.onSwitchAction();\n          });\n        } else {\n          this.setState({ currentMusic: musicList[0] }, () => {\n            this.onSwitchAction();\n          });\n        }\n      }\n      else if (playMode === 3) {\n        this.onSwitchAction();\n      }\n    } else {\n      this.onSwitchAction();\n    }\n  };\n\n  nextMusic = () => {\n    const { currentMusic } = this.state;\n    const { musicList } = this.state;\n    if (musicList.length > 1 && currentMusic) {\n      const currentIndex = musicList.findIndex(item => {\n        return item.id === currentMusic.id;\n      });\n      if (musicList[currentIndex + 1]) {\n        this.setState({ currentMusic: musicList[currentIndex + 1] }, () => {\n          this.onSwitchAction();\n        });\n      } else {\n        this.setState({ currentMusic: musicList[0] }, () => {\n          this.onSwitchAction();\n        });\n      }\n    } else {\n      this.audio.currentTime = 0;\n      this.onSwitchAction();\n    }\n  };\n\n  previousMusic = () => {\n    const { currentMusic } = this.state;\n    const { musicList } = this.state;\n    if (musicList.length > 1 && currentMusic) {\n      const currentIndex = musicList.findIndex(item => {\n        return item.id === currentMusic.id;\n      });\n      if (musicList[currentIndex - 1]) {\n        this.setState({ currentMusic: musicList[currentIndex - 1] }, () => {\n          this.onSwitchAction();\n        });\n      } else {\n        this.setState({ currentMusic: musicList[musicList.length - 1] }, () => {\n          this.onSwitchAction();\n        });\n      }\n    } else {\n      this.audio.currentTime = 0;\n      this.onSwitchAction();\n    }\n  };\n\n  onSwitchAction = () => {\n    const { isPause } = this.state;\n    this.resetProcess();\n    if (isPause) {\n      this.onPlay();\n    }\n  };\n\n  resetProcess = () => {\n    this.processPlayed.style.width = \"0px\";\n    this.processItem.style.left = \"-4px\";\n  };\n\n\n  onVolumeControl = () => {\n    const { volumeControl } = this.state;\n    this.setState({ volumeControl: !volumeControl });\n  };\n\n  onVolumeControlHide = () => {\n    const { volumeControl } = this.state;\n    if (volumeControl) {\n      this.setState({ volumeControl: false });\n    }\n  };\n\n  initVolumeProcess = () => {\n\n    const processLength = this.volumeProcess.offsetHeight;\n\n    this.volumeProcessCurrent.style.height = `${processLength / 2}px`;\n\n    this.volumeProcessItem.style.bottom = `${processLength / 2 - 6}px`;\n  \n    this.audio.volume = 0.5;\n  };\n\n\n  onVolumeProcessSet = e => {\n    const processLength = this.volumeProcess.offsetHeight;\n    let volumeOffsetHeight =\n      processLength -\n      (e.pageY - this.volumeProcess.getBoundingClientRect().top);\n    let volumepercentage = 0;\n\n    if (volumeOffsetHeight < 0) {\n      volumeOffsetHeight = 0;\n    }\n    if (volumeOffsetHeight > processLength) {\n      volumeOffsetHeight = processLength;\n    }\n    volumepercentage = volumeOffsetHeight / processLength;\n\n    this.volumeProcessCurrent.style.height = `${volumeOffsetHeight}px`;\n\n    this.volumeProcessItem.style.bottom = `${volumeOffsetHeight - 6}px`;\n\n    this.audio.volume = volumepercentage;\n  };\n\n  onVolumeProcessItemMouseDown = () => {\n    this.setState({ volumeProcessItemMove: true });\n  };\n\n\n  onVolumeProcessItemMouseUp = e => {\n    const { volumeProcessItemMove } = this.state;\n    if (volumeProcessItemMove) {\n      this.setState({ volumeProcessItemMove: false });\n    }\n  };\n\n  onVolumeProcessItemMove = e => {\n    const { volumeProcessItemMove } = this.state;\n    if (volumeProcessItemMove) {\n      this.onVolumeProcessSet(e);\n    }\n  };\n\n  onPlayModeChange = () => {\n    const { playMode } = this.state;\n    if (playMode === 3) {\n      this.setState({ playMode: 1 });\n    } else {\n      this.setState({ playMode: playMode + 1 });\n    }\n  };\n\n\n  titleOnChange = (e) => {\n    this.setState({\n      title: e.target.value\n    })\n  }\n\n  authorOnChange = (e) => {\n    this.setState({\n      author: e.target.value,\n    })\n  }\n\n  imgOnChange = (e) => {\n    this.setState({\n      img: e.target.value,\n    })\n  }\n\n  descriptionOnChnage = (e) => {\n    this.setState({\n      description: e.target.value\n    })\n  }\n\n  addPlayList = () => {\n      this.setState({\n        addMusic: !this.state.addMusic\n      })\n  };\n\n\n  submitAddMusic = () => {\n    const {upFiles, title, author, img, description } = this.state\n    let formData = new FormData();\n    formData.append('music', upFiles);\n    formData.append('user_id', this.props.loginUser.id);\n    formData.append('title', title);\n    formData.append('author', author);\n    formData.append('img', img);\n    formData.append('description', description);\n\n    fetch(\"http://localhost:3000/musics\", {\n      method: \"POST\",\n      body: formData\n    })\n    .then(res => res.json())\n    .then(() => {\n      // this.componentDidMount()\n    })\n  }\n\n\n  beforeUpload = (file) => {\n    const {upFiles} = this.state;\n    upFiles.push(file);\n    this.setState({upFiles: upFiles});\n  }\n\n\n  onMusicList = () => {\n    const { isMusicListShow } = this.state;\n    this.setState({ isMusicListShow: !isMusicListShow });\n  };\n\n\n  onDeleteMusic = (e, item) => {\n    e.stopPropagation();\n    const { onDeleteMusic } = this.props;\n    if (onDeleteMusic) {\n      onDeleteMusic(item.id);\n    }\n  };\n\n  onDeleteAllMusic = () => {\n    const { onDeleteAllMusic } = this.props;\n    if (onDeleteAllMusic) {\n      onDeleteAllMusic();\n    }\n  };\n\n  onMusicListItemClick = id => {\n    const { musicList } = this.state;\n    const { currentMusic } = this.state;\n    const index = musicList.findIndex(item => {\n      return item.id === id;\n    });\n    if (index !== -1) {\n      if (currentMusic.id === id) {\n        this.resetProcess();\n        this.audio.currentTime = 0;\n        this.onPlay();\n      } else {\n        this.setState({ currentMusic: musicList[index] }, () => {\n          this.resetProcess();\n          this.onPlay();\n        });\n      }\n    }\n  };\n\n  render() {\n    const {\n      currentMusic,\n      isPause,\n      totalTime,\n      currentTime,\n      volumeControl,\n      playMode,\n      isMusicListShow\n    } = this.state;\n    const { title, info, img, resource, id } = currentMusic || {};\n    const { musicList } = this.state;\n    let playModeIcon = \"\";\n    switch (playMode) {\n      case 1:\n        playModeIcon = \"icon-circulation-list\";\n        break;\n      case 2:\n        playModeIcon = \"icon-circulation-random\";\n        break;\n      case 3:\n        playModeIcon = \"icon-circulation-single\";\n        break;\n      default:\n        playModeIcon = \"icon-circulation-list\";\n        break;\n    }\n    return (\n      <div className=\"mainLayout\">\n        <div\n          className=\"mainContent\"\n          onMouseMove={this.onProcessItemMouseMove}\n          onMouseUp={this.onProcessItemMouseUp}\n        >\n          <div className=\"playContent\">\n            <div className=\"left-controler\">\n              <span\n                className=\"icon-prev prev-next-icon\"\n                onClick={this.previousMusic}\n              />\n              {isPause ? (\n                <span className=\"icon-pause playIcon\" onClick={this.onPause} />\n              ) : (\n                <span className=\"icon-play playIcon\" onClick={this.onPlay} />\n              )}\n              <span\n                className=\"icon-next prev-next-icon\"\n                onClick={this.nextMusic}\n              />\n            </div>\n            <div className=\"main-controler\">\n              <img src={img} alt=\"\" className=\"thumbnail\" />\n              <div className=\"music-control\">\n                <div className=\"music-info\">\n                  <span className=\"title-info\">{title}</span>\n                  <span className=\"author-info\">{info}</span>\n                </div>\n                <div className=\"process-time\">\n                  <div\n                    className=\"process-wrapper\"\n                    onClick={this.onProcessClick}\n                    ref={ref => (this.process = ref)}\n                  >\n                    <div className=\"process\">\n                      <div\n                        className=\"progress-buffered\"\n                        ref={ref => (this.processBuffered = ref)}\n                      />\n                      <div\n                        className=\"progress-played\"\n                        ref={ref => (this.processPlayed = ref)}\n                      >\n                        <div\n                          className=\"process-item\"\n                          ref={ref => (this.processItem = ref)}\n                          onMouseDown={this.onProcessItemMouseDown}\n                        >\n                          <div className=\"process-item-inside\" />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"time\">\n                    <span className=\"current-time\">{currentTime}</span>/\n                    <span className=\"total-time\">{totalTime}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"right-folder\">\n                  <span onClick={() => this.addPlayList()} className=\"icon-folder folder\"/>\n                          {this.state.addMusic\n                                 ?<div>\n                                 <h4 className=\"upload-title\">Upload Music</h4>\n                                  <form className=\"add-music\"\n                                  >\n                                  <CloseOutlined className=\"close-add\" onClick={() => this.addPlayList()}/>\n                                  <br/>\n                                  <Upload {...props} showUploadList={false} beforeUpload={this.beforeUpload}>\n                                    <Button className=\"add-upload\" icon={<UploadOutlined />}>Upload</Button>    \n                                  </Upload>\n                                  <Input  className=\"add-input\" addonBefore=\"Title: \" onChange={(e) => this.titleOnChange(e)}></Input>\n                                  <Input className=\"add-input\" addonBefore=\"Author: \" onChange={(e) => this.authorOnChange(e)}></Input>\n                                  <Input className=\"add-input\" addonBefore=\"Image: \" onChange={(e) => this.imgOnChange(e)}></Input>\n                                  <Input className=\"add-input\" addonBefore=\"Description: \" onChange={(e) => this.descriptionOnChnage(e)}></Input>\n                                  <button className=\"add-submit\">Submit</button> \n                                </form>\n                                </div>\n                                :null\n                          }\n            </div>\n            <div className=\"right-controler\">\n              <div\n                className=\"volume-controler\"\n                style={{ visibility: volumeControl ? \"visible\" : \"hidden\" }}\n                onMouseMove={this.onVolumeProcessItemMove}\n                onMouseUp={this.onVolumeProcessItemMouseUp}\n              >\n                <div\n                  className=\"volume-process\"\n                  onClick={this.onVolumeProcessSet}\n                  ref={ref => (this.volumeProcess = ref)}\n                >\n                  <div\n                    className=\"volume-current\"\n                    ref={ref => (this.volumeProcessCurrent = ref)}\n                  >\n                    <div\n                      className=\"volume-item\"\n                      ref={ref => (this.volumeProcessItem = ref)}\n                      onMouseDown={this.onVolumeProcessItemMouseDown}\n                      onMouseUp={this.onVolumeProcessItemMouseUp}\n                    >\n                      <div className=\"volume-item-inside\" />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <span\n                className=\"icon-volume volume\"\n                onClick={this.onVolumeControl}\n              />\n              <span\n                className={`${playModeIcon} circulation`}\n                onClick={this.onPlayModeChange}\n              />\n              <span className=\"icon-list list\" onClick={this.onMusicList} />\n            </div>\n            {isMusicListShow && (\n              <div className=\"musicList\">\n                <div className=\"music-list-head\">\n                  <h4 className=\"music-list-head-title\">\n                     Playlist(\n                    <span>\n                      {musicList && musicList.length ? musicList.length : 0}\n                    </span>\n                    )\n                  </h4>\n                  <span\n                    className=\"music-list-head-collect\"\n                    onClick={this.onCollect}\n                  >\n                    <span className=\"icon-addfile music-list-common-icon\" />\n                  </span>\n                  <span className=\"music-list-head-line\" />\n                  <span\n                    className=\"music-list-head-clear\"\n                    onClick={this.onDeleteAllMusic}\n                  >\n                  </span>\n                  <p className=\"music-list-head-name\">{title}</p>\n                  <span className=\"music-list-head-close\">\n                    <span\n                      className=\"icon-close music-list-common-icon\"\n                      onClick={this.onMusicList}\n                    />\n                  </span>\n                </div>\n                <div className=\"music-list-body\">\n                  <div className=\"music-list-body-content\">\n                    <ul className=\"music-list-body-ul\">\n                      {musicList &&\n                        musicList.length > 0 &&\n                        musicList.map(item => {\n                          return (\n                            <li\n                              className={`music-list-li ${id === item.id &&\n                                \"music-current\"}`}\n                              onClick={() => this.onMusicListItemClick(item.id)}\n                              key={item.id}\n                            >\n                              <div className=\"col music-list-li-col-1\">\n                                {id === item.id && (\n                                  <span className=\"play-triangle-icon icon-currentPlay\" />\n                                )}\n                              </div>\n                              <div className=\"col music-list-li-col-2\">\n                                <span className=\"music-list-li-text\">\n                                  {item.title}\n                                </span>\n                              </div>\n                              <div className=\"col music-list-li-col-3\">\n                                <span\n                                  className=\"icon-clear music-list-action-icon\"\n                                  onClick={e => this.onDeleteMusic(e, item)}\n                                />\n                              </div>\n                              <div className=\"col music-list-li-col-4\">\n                                <span className=\"music-list-li-text\">\n                                  {item.info}\n                                </span>\n                              </div>\n                              <div className=\"col music-list-li-col-5\">\n                                <span className=\"music-list-li-text\">\n                                  {item.time}\n                                </span>\n                              </div>\n                              <div className=\"col music-list-li-col-6\">\n                                <span className=\"icon-link music-list-action-icon\" />\n                              </div>\n                            </li>\n                          );\n                        })}\n                    </ul>\n                  </div>\n                  <div className=\"music-cover\">\n                  </div>\n                </div>\n              </div>\n            )}\n            <audio src={resource} ref={ref => (this.audio = ref)} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n\n"]},"metadata":{},"sourceType":"module"}